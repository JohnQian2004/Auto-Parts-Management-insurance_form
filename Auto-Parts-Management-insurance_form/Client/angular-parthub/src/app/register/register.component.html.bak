<div class="center-screen" *ngIf="form.role==null">
  <div class="card-deck">
    <div class="card">
      <img class="card-img-top" src="../../assets/images/Laptop.png" alt="Card image cap">
      <div class="card-body">
        <h5 class="card-title">As Indivisual</h5>
        <p class="card-text">Allow to access to auto part market</p>
      </div>
      <div class="card-footer d-flex justify-content-center">
        <a (click)="form.role='ROLE_USER'" class="btn btn-primary">Sign Up</a>
      </div>
    </div>
    <div class="card">
      <img class="card-img-top" src="../../assets/images/Laptop.png" alt="Card image cap">
      <div class="card-body">
        <h5 class="card-title">As Auto Part Recycler/Shop</h5>
        <p class="card-text">Allow to access to auto part market.</p>
      </div>
      <div class="card-footer d-flex justify-content-center">
        <a (click)="form.role='ROLE_RECYCLER'" class="btn btn-primary">Sign Up</a>
      </div>
    </div>
    <div class="card">
      <img class="card-img-top" src="../../assets/images/Laptop.png" alt="Card image cap">
      <div class="card-body">
        <h5 class="card-title">As Body/Mechanic Shop</h5>
        <p class="card-text">Allow to access to auto part market as well as auto body shop/mechanic managements.
        </p>
      </div>
      <div class="card-footer d-flex justify-content-center">
        <a (click)="form.role='ROLE_SHOP'" class="btn btn-primary">Sign Up</a>
      </div>
    </div>
  </div>
</div>

<div class="col-md-12" *ngIf="form.role!=null">

  <div class="card1 card-container">

    <!-- <img id="profile-img" src="//ssl.gstatic.com/accounts/ui/avatar_2x.png" class="profile-img-card" /> -->
    <form *ngIf="!isSuccessful" name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>

      <div class="form-group">
        <label for="type">Type</label>
        <select class="form-control" name="role" #type="ngModel" size="1" [(ngModel)]="form.role" required disabled
          [ngClass]="{ 'is-invalid': f.submitted && type.errors }">
          <option value="ROLE_USER" selected>Individual</option>
          <option value="ROLE_SHOP">Auto Shop</option>
          <option value="ROLE_RECYCLER">Auto Recycler</option>
          <!-- <option value="ROLE_ADMIN">Admin</option> -->
        </select>
        <div class="invalid-feedback" *ngIf="type.errors && f.submitted">
          <div *ngIf="type.errors['required']">Type is required</div>
        </div>
      </div>

      <div class="form-group ">
        <label>First Name</label>
        <input type="text" class="form-control" name="firstName" [(ngModel)]="form.firstName" required minlength="2"
          maxlength="20" #firstName="ngModel" [ngClass]="{ 'is-invalid': f.submitted && firstName.errors }" />
        <div class="invalid-feedback" *ngIf="firstName.errors && f.submitted">
          <div *ngIf="firstName.errors['required']">First Name is required</div>
          <div *ngIf="firstName.errors['minlength']">
            First Name must be at least 2 characters
          </div>
          <div *ngIf="firstName.errors['maxlength']">
            Username must be at most 20 characters
          </div>
        </div>
      </div>

      <div class="form-group ">
        <label>Last Name</label>
        <input type="text" class="form-control" name="lastName" [(ngModel)]="form.lastName" required minlength="2"
          maxlength="20" #lastName="ngModel" [ngClass]="{ 'is-invalid': f.submitted && lastName.errors }" />
        <div class="invalid-feedback" *ngIf="lastName.errors && f.submitted">
          <div *ngIf="lastName.errors['required']">First Name is required</div>
          <div *ngIf="lastName.errors['minlength']">
            First Name must be at least 2 characters
          </div>
          <div *ngIf="lastName.errors['maxlength']">
            Username must be at most 20 characters
          </div>
        </div>
      </div>

      <div class="form-group " *ngIf="form.role == 'ROLE_RECYCLER' || form.role == 'ROLE_SHOP' ">
        <label for="bussinessname">Bussness Name</label>
        <input type="text" class="form-control" name="bussinessname" [(ngModel)]="form.bussinessname" required
          minlength="5" maxlength="200" #bussinessname="ngModel"
          [ngClass]="{ 'is-invalid': f.submitted && bussinessname.errors }" />
        <div class="invalid-feedback" *ngIf="bussinessname.errors && f.submitted">
          <div *ngIf="bussinessname.errors['required']">Bussness name is required</div>
          <div *ngIf="bussinessname.errors['minlength']">
            Bussness name must be at least 5 characters
          </div>
          <div *ngIf="bussinessname.errors['maxlength']">
            Bussness name must be at most 200 characters
          </div>
        </div>
      </div>

      <div class="form-group " *ngIf="form.role == 'ROLE_RECYCLER' || form.role == 'ROLE_SHOP' ">
        <label for="bussinessurl">Bussness URL</label>
        <input type="text" class="form-control" name="bussinessurl" [(ngModel)]="form.bussinessurl" required
          minlength="5" maxlength="200" #bussinessurl="ngModel"
          [ngClass]="{ 'is-invalid': f.submitted && bussinessurl.errors }" />
        <div class="invalid-feedback" *ngIf="bussinessurl.errors && f.submitted">
          <div *ngIf="bussinessurl.errors['required']">Bussness name is required</div>
          <div *ngIf="bussinessurl.errors['minlength']">
            Bussness url must be at least 5 characters
          </div>
          <div *ngIf="bussinessurl.errors['maxlength']">
            Bussness url must be at most 200 characters
          </div>
        </div>
      </div>

      <!-- <div class="form-group ">
        <label for="username">Username</label>
        <input type="text" class="form-control" name="username" [(ngModel)]="form.username" required minlength="3"
          maxlength="20" #username="ngModel" [ngClass]="{ 'is-invalid': f.submitted && username.errors }" />
        <div class="invalid-feedback" *ngIf="username.errors && f.submitted">
          <div *ngIf="username.errors['required']">Username is required</div>
          <div *ngIf="username.errors['minlength']">
            Username must be at least 3 characters
          </div>
          <div *ngIf="username.errors['maxlength']">
            Username must be at most 20 characters
          </div>
        </div>
      </div> -->

      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" class="form-control" name="email" [(ngModel)]="form.email" required email #email="ngModel"
          [ngClass]="{ 'is-invalid': f.submitted && email.errors }" />
        <div class="invalid-feedback" *ngIf="email.errors && f.submitted">
          <div *ngIf="email.errors['required']">Email is required</div>
          <div *ngIf="email.errors['email']">
            Email must be a valid email address
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="phone">Phone</label>
        <input type="text" class="form-control" name="phone" [(ngModel)]="form.phone" required #phone="ngModel"
          [ngClass]="{ 'is-invalid': f.submitted && phone.errors }" pattern="^[-+()0-9]{10,12}(?:-\d+)?$" />
        <div class="invalid-feedback" *ngIf="phone.errors && f.submitted">
          <div *ngIf="phone.errors['required']">Phone is required</div>
          <div *ngIf="phone.errors['phone']">
            Phone must be a valid phone number
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <input type="password" class="form-control" name="password" [(ngModel)]="form.password" required minlength="6"
          #password="ngModel" [ngClass]="{ 'is-invalid': f.submitted && password.errors }" />
        <div class="invalid-feedback" *ngIf="password.errors && f.submitted">
          <div *ngIf="password.errors['required']">Password is required</div>
          <div *ngIf="password.errors['minlength']">
            Password must be at least 6 characters
          </div>
        </div>
      </div>


      <div class="form-group ">
        <label for="username">Steet</label>
        <input type="text" class="form-control" name="street" [(ngModel)]="form.street" required minlength="3"
          maxlength="200" #street="ngModel" [ngClass]="{ 'is-invalid': f.submitted && street.errors }" />
        <div class="invalid-feedback" *ngIf="street.errors && f.submitted">
          <div *ngIf="street.errors['required']">Street is required</div>
          <div *ngIf="street.errors['minlength']">
            Street must be at least 3 characters
          </div>
          <div *ngIf="street.errors['maxlength']">
            Street must be at most 200 characters
          </div>
        </div>
      </div>

      <div class="form-group ">
        <label for="city">City</label>
        <input type="text" class="form-control" name="city" [(ngModel)]="form.city" required minlength="3"
          maxlength="200" #city="ngModel" [ngClass]="{ 'is-invalid': f.submitted && city.errors }" />
        <div class="invalid-feedback" *ngIf="city.errors && f.submitted">
          <div *ngIf="city.errors['required']">City is required</div>
          <div *ngIf="city.errors['minlength']">
            City must be at least 3 characters
          </div>
          <div *ngIf="city.errors['maxlength']">
            City must be at most 200 characters
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="type">State</label>
        <select class="form-control" name="state" #state="ngModel" size="1" required [(ngModel)]="form.state"
          [ngClass]="{ 'is-invalid': f.submitted && state.errors }">
          <option value="AL">Alabama</option>
          <option value="AK">Alaska</option>
          <option value="AZ">Arizona</option>
          <option value="AR">Arkansas</option>
          <option value="CA">California</option>
          <option value="CO">Colorado</option>
          <option value="CT">Connecticut</option>
          <option value="DE">Delaware</option>
          <option value="DC">District Of Columbia</option>
          <option value="FL">Florida</option>
          <option value="GA">Georgia</option>
          <option value="HI">Hawaii</option>
          <option value="ID">Idaho</option>
          <option value="IL">Illinois</option>
          <option value="IN">Indiana</option>
          <option value="IA">Iowa</option>
          <option value="KS">Kansas</option>
          <option value="KY">Kentucky</option>
          <option value="LA">Louisiana</option>
          <option value="ME">Maine</option>
          <option value="MD">Maryland</option>
          <option value="MA">Massachusetts</option>
          <option value="MI">Michigan</option>
          <option value="MN">Minnesota</option>
          <option value="MS">Mississippi</option>
          <option value="MO">Missouri</option>
          <option value="MT">Montana</option>
          <option value="NE">Nebraska</option>
          <option value="NV">Nevada</option>
          <option value="NH">New Hampshire</option>
          <option value="NJ">New Jersey</option>
          <option value="NM">New Mexico</option>
          <option value="NY">New York</option>
          <option value="NC">North Carolina</option>
          <option value="ND">North Dakota</option>
          <option value="OH">Ohio</option>
          <option value="OK">Oklahoma</option>
          <option value="OR">Oregon</option>
          <option value="PA">Pennsylvania</option>
          <option value="RI">Rhode Island</option>
          <option value="SC">South Carolina</option>
          <option value="SD">South Dakota</option>
          <option value="TN">Tennessee</option>
          <option value="TX">Texas</option>
          <option value="UT">Utah</option>
          <option value="VT">Vermont</option>
          <option value="VA">Virginia</option>
          <option value="WA">Washington</option>
          <option value="WV">West Virginia</option>
          <option value="WI">Wisconsin</option>
          <option value="WY">Wyoming</option>
        </select>
        <div class="invalid-feedback" *ngIf="state.errors && f.submitted">
          <div *ngIf="state.errors['required']">State is required</div>
        </div>
      </div>

      <div class="form-group ">
        <label for="zip">Zip</label>
        <input type="text" class="form-control" pattern="[0-9]*" name="zip" [(ngModel)]="form.zip" required
          minlength="5" maxlength="200" #zip="ngModel" [ngClass]="{ 'is-invalid': f.submitted && zip.errors }" />
        <div class="invalid-feedback" *ngIf="zip.errors && f.submitted">
          <div *ngIf="zip.errors['required']">Zip is required</div>
          <div *ngIf="zip.errors['minlength']">
            Zip must be at least 5 numbers
          </div>
          <div *ngIf="zip.errors['maxlength']">
            Zip must be at most 200 characters
          </div>
        </div>
      </div>

      <div class="form-group">
        <button class="btn btn-primary btn-block">Sign Up</button>
      </div>
      <div class="form-group">
        <a class="d-flex justify-content-center" (click)="reset()">Reset/Go Back</a>
      </div>

      <div class="alert alert-warning" *ngIf="f.submitted && isSignUpFailed">
        Signup failed!<br />{{ errorMessage }}
      </div>
    </form>

    <div class="alert alert-success" *ngIf="isSuccessful">
      Your registration is successful! Please check your email for comfirmation and activation.
    </div>
  </div>
</div>