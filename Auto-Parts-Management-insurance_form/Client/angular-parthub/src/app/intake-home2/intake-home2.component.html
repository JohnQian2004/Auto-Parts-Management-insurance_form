<!-- <div class="container-fluid">
    <div class="row">
        <div class="col-sm-auto bg-light sticky-top nopadding">
            <div class="d-flex flex-sm-column flex-row flex-nowrap bg-light align-items-center  sticky-top"
                style="max-width:50px">

                <div class="nav nav-pills nav-flush flex-sm-column flex-row flex-nowrap mb-auto mx-auto text-center 
                    justify-content-between w-100 px-3 align-items-center" role="tablist">

                    <a class="nav-link py-0 px-0" title="Add Customer or Vehicle" data-bs-target="#nav-vehicle-add"
                        data-bs-toggle="tab" aria-selected="true" aria-controls="nav-vehicle-add"
                        data-bs-placement="right" data-bs-original-title="Home">
                        <i class="bi-house fs-3"></i>
                    </a>


                    <a class="nav-link py-0 px-0" title="Counter Receipt" data-bs-target="#nav-vehicle-receipt"
                        aria-controls="nav-vehicle-receipt" data-bs-placement="right" data-bs-toggle="tab"
                        aria-selected="true" data-bs-original-title="Dashboard">
                        <i class="bi-table fs-3"></i>
                    </a>

                    <a class="nav-link py-0 px-0" title="Purchase Orders and Parts" data-bs-toggle="tab"
                        data-bs-target="#nav-vehicle-part" data-bs-placement="right" data-bs-original-title="Orders">
                        <i class="bi-table fs-3"></i>
                    </a>

                    <a class="nav-link py-0 px-0" title="sth" data-bs-toggle="tab" data-bs-placement="right"
                        data-bs-original-title="Products">
                        <i class="bi-truck fs-3"></i>
                    </a>

                    <a class="nav-link py-0 px-0" title="sth" data-bs-toggle="tab" data-bs-placement="right"
                        data-bs-original-title="Customers">
                        <i class="bi-people fs-3"></i>
                    </a>

                </div>
            </div>
        </div>

    </div>
</div> -->
<div class="container-fluid">
    <section class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':displayStyle}">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header" style="background-color: lightgrey">
                                    <h4 class="modal-title">Purchase Order for [{{ this.autopart.title}}]</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="form-group nopadding">
                                        <label>Reason for Rejection</label>
                                        <div class="input-group">
                                            <input type="text" name="reason" class="form-control"
                                                placeholder="Reason for Rejection" required
                                                [(ngModel)]="autopart.reason" #reason="ngModel"
                                                [ngClass]="{ 'is-invalid': reason.errors }" />
                                        </div>
                                    </div>
                                    <div class="form-group nopadding">
                                        <label> </label>
                                    </div>
                                    <div class="alert alert-danger" *ngIf="messageReasonRejection !=''">
                                        {{ messageReasonRejection}}
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" (click)="closePopupYes()">
                                        Reject It
                                    </button>
                                    <button type="button" class="btn btn-secondary" (click)="closePopup()">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':displayStyleMarket}">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header" style="background-color: lightgrey">
                                    <h4 class="modal-title">Posting [{{ this.autopart.title}}] to market</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="form-group nopadding">
                                        <label>Sale Price (the origianl is ${{ autopart.price}})</label>
                                        <div class="input-group">
                                            <input type="number" name="reason" class="form-control"
                                                placeholder="Save Price" required [(ngModel)]="autopart.salePrice"
                                                #salePrice="ngModel" [ngClass]="{ 'is-invalid': salePrice.errors }" />
                                        </div>
                                    </div>
                                    <div class="form-group nopadding">
                                        <label> </label>
                                    </div>
                                    <div class="alert alert-danger" *ngIf="messageReasonMarket !=''">
                                        {{ messageReasonMarket}}
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" (click)="closePopupYesMarket()">
                                        Post It
                                    </button>
                                    <button type="button" class="btn btn-secondary" (click)="closePopupMarket()">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div><!-- /.container-fluid -->
    </section>
</div>

<div>
    <div class="row nogot">
        <div class="col-pixel-width-300" *ngIf="showAccordian==true">
            <div class="accordion" id="accordionExample">
                <div class="accordion-item">
                    <h6 class="accordion-header" id="headingOne">
                        <button class="accordion-button accordion-title" type="button" data-bs-toggle="collapse"
                            (click)="getAllNotes(this.user.companyId)" data-bs-target="#collapseOne"
                            aria-expanded="true" aria-controls="collapseOne">

                            <i
                                class="bi bi-newspaper text-center d-flex align-items-center justify-content-center h-100"></i>
                            Reminders <span class="badge badge-dark">{{notes.length}}</span>
                        </button>
                    </h6>
                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
                        data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <div class="input-group">
                                <input type="text" class="form-control" [(ngModel)]="note.notes" name="reminder"
                                    placeholder="reminder" (keyup.enter)="onSaveNote($event)">


                                <div class="input-group-append">
                                    <input colorPicker="note.color" style="width: 40px"
                                        (colorPickerChange)="note.color=$event" [style.background]="note.color" />
                                </div>
                                <div class="input-group-append" *ngIf="note.id> 0">
                                    <button class="btn btn-outline-secondary"><i class="bi-trash"
                                            (click)="deleteNote(note)"></i></button>
                                </div>
                            </div>
                            <div class="input-group">
                                <label> </label>
                            </div>
                            <div class="list-group shadow" cdkDropList (cdkDropListDropped)="droppedNote($event)">


                                <a class="list-group-item list-group-item-action active py-1">
                                    <div class="btn btn-primary btn-sm" *ngIf="user.allowAddNotes == true"
                                        (click)="addNewNote()">
                                        <i class="bi-plus-lg"></i>
                                    </div>
                                    Reminders
                                </a>
                                <ng-container *ngFor="let note of notes; let i=index ">
                                    <a class="list-group-item list-group-item-action py-0" (click)="getNoteDetail(note)"
                                        title="{{note.createdAt| date}}" [style.color]="note.color" cdkDrag>
                                        {{i+1}}. {{note.notes}}
                                    </a>
                                </ng-container>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h6 class="accordion-header" id="headingTwo">
                        <button class="accordion-button accordion-title collapsed" type="button"
                            data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false"
                            aria-controls="collapseTwo">
                            <i
                                class="bi bi-truck text-center d-flex align-items-center justify-content-center h-100"></i>
                            {{today | date }}'s [{{this.vehiclesToday.length}}]
                        </button>
                    </h6>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                        data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <div class="list-group shadow">
                                <a class="list-group-item list-group-item-action py-1"
                                    *ngFor="let vehicle of this.vehiclesToday; let i=index"
                                    (click)="getDetail(vehicle, i )" [class.active]="i == cindex">
                                    <!-- <i (click)="printPage('print-content')" class="bi-printer"></i> -->
                                    {{i+1}}.
                                    #{{vehicle.id}}
                                    {{vehicle.year}}
                                    {{vehicle.make}} {{vehicle.model}}
                                    {{vehicle.color}}
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h6 class="accordion-header" id="headingThree">
                        <button class="accordion-button accordion-title collapsed" type="button"
                            data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false"
                            aria-controls="collapseThree"><i
                                class="bi bi-list-stars text-center d-flex align-items-center justify-content-center h-100"></i>
                            Daily [{{reportCarrier.reports.length}}]
                        </button>
                    </h6>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                        data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <table *ngIf="reportCarrier.reports.length> 0" style="width: 100%">
                                <tr class="col-md-3">
                                    <th style="text-align: center">#</th>
                                    <th style="text-align: center">Date</th>
                                    <th style="text-align: center">counts</th>
                                </tr>
                                <tr *ngFor="let report of reportCarrier.reports; let i=index"
                                    (click)="getVehiclesTodayString(report.label)">
                                    <td style="text-align: center">{{i+1}}</td>
                                    <!-- <td style="text-align: center">{{report.label | date }}</td> -->
                                    <td style="text-align: center">{{report.counts}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- <div class="accordion-item">
                    <h6 class="accordion-header" id="headingFour">
                        <button class="accordion-button accordion-title collapsed" type="button"
                            data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false"
                            aria-controls="collapseFour">
                            #3
                        </button>
                    </h6>
                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour"
                        data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <strong>This is the third item's accordion body.</strong> It is hidden by default, until
                            the
                            collapse plugin adds the appropriate classes that we use to style each element. These
                            classes control the overall appearance, as well as the showing and hiding via CSS
                            transitions. You can modify any of this with custom CSS or overriding our default
                            variables.
                            It's also worth noting that just about any HTML can go within the
                            <code>.accordion-body</code>, though the transition does limit overflow.
                        </div>
                    </div>
                </div> -->
            </div>
        </div>
        <div
            [ngClass]="showAccordian==false? 'col-xl-12 col-lg-12 col-md-12 col-sm-12' : (true ? 'my-fluid-col' : 'my-fluid-col')">
            <div class="row">
                <div class="input-group mb-12 callout callout-primary px-1 p-0">
                    <label for="placeholder"> </label>
                    <div class="input-group-append">


                        <button type="button" class="btn-outline-secondary" *ngIf="showAccordian==true"
                            (click)="showAccordian =!showAccordian" title="toggle left panel">
                            <i class="bi bi-arrow-bar-left"></i>
                        </button>

                        <button type="button" class="btn-outline-secondary" *ngIf="showAccordian==false"
                            (click)="showAccordian =!showAccordian" title="toggle left panel">
                            <i class="bi bi-arrow-bar-right"></i>
                        </button>

                    </div>
                    <div class="input-group-append">
                        <button type="button" class="btn-outline-secondary" title="Today's"
                            (click)="getVehiclesToday(null)">
                            <i class="bi bi-calendar-week"></i>
                        </button>
                    </div>
                    <div class="input-group-append">
                        <input type="date" (change)="getVehiclesToday($event)" [ngModel]="today |  date:'yyyy-MM-dd'">
                    </div>
                    <div class="input-group-append">
                        <nav>
                            <div class="nav nav-tabs" id="nav-tab" role="tablist2">
                                <button class="btn-outline-secondary" id="nav-vehicle-add-tab" data-bs-toggle="tab"
                                    title="Add Vehicle" data-bs-target="#nav-vehicle-add" type="button" role="tab"
                                    aria-controls="nav-vehicle-add" aria-selected="true"><i
                                        class="bi bi-plus-lg"></i></button>
                                <button class="btn-outline-secondary" id="nav-vehicle-receipt-tab" data-bs-toggle="tab"
                                    title="Counter Invoice" data-bs-target="#nav-vehicle-receipt" type="button"
                                    role="tab" aria-controls="nav-vehicle-receipt" aria-selected="true"><i
                                        class="bi bi-card-list"></i></button>
                                <button class="btn-outline-secondary" id="nav-vehicle-part-tab" data-bs-toggle="tab"
                                    title="Receive/Return Parts" data-bs-target="#nav-vehicle-part" type="button"
                                    role="tab" aria-controls="nav-vehicle-part" aria-selected="true"><i
                                        class="bi bi-card-list"></i></button>
                            </div>
                        </nav>
                    </div>
                    <label for="placeholder"> </label>
                </div>
            </div>
            <div class="row">
                <div class="tab-content col-12" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-vehicle-add" role="tabpanel" #taggroup
                        style="min-height: 500px;" aria-labelledby="nav-vehicle-add-tab">
                        <div class="row">
                            <h5>Customers and Vehicles</h5>
                        </div>
                        <div class="row">
                            <div class="col-md-5 px-1">
                                <div class="card card-primary card-outline">
                                    <div class="card-header" style="padding: 0.3rem rem 1.25rem;">

                                        <div class="card-title" (click)="editModeCustomer =!editModeCustomer"
                                            title="Toggle to view or edit">
                                            <i class="bi-person"></i>
                                            Customer
                                        </div>

                                        <div class="card-tools">
                                            <div class="input-group input-group-sm">
                                                <input type="text" class="form-control" [(ngModel)]="searchInput"
                                                    (input)="onSearchChangeCustomer($event)"
                                                    title="Search Customer Last Name"
                                                    placeholder="Search Customer last name">

                                                <div class="input-group-append">
                                                    <div class="btn btn-primary" title="Search Customer Last Name"
                                                        (click)="searchCustomerByLastName(searchInput)">
                                                        <i class="bi-search"></i>
                                                    </div>
                                                </div>

                                                <div class="input-group-append">
                                                    <div class="btn btn-primary"
                                                        *ngIf="user.allowUpdateCustomerInfo == true"
                                                        title="Add A New Customer" (click)="reset(true)">
                                                        Add Customer
                                                    </div>
                                                </div>
                                                <!-- <div class="input-group-append" *ngIf="editModeCustomer == true">
                                                    <div class="btn btn-primary" title="Save Customer Info"
                                                        (click)="saveCustomerInfo(vehicle.customer)">
                                                        <i class="bi-save"></i>
                                                    </div>
                                                </div> -->
                                            </div>
                                        </div>

                                    </div>
                                    <div class="card-body px-2 py-2">

                                        <div class="form-group nopadding" *ngIf="customers.length > 0">
                                            <div class="row">
                                                <div class="card2 card-primary col-md-6"
                                                    *ngFor="let customer2 of customers; let i=index;  let even=even"
                                                    (click)="getCustomerDetail(customer2, i)"
                                                    [style.background-color]="i == cindexCustomer? 'lightyellow' : (even ? 'white' : 'white')">

                                                    <h6>
                                                        {{customer2.title}} {{customer2.firstName}} {{
                                                        customer2.lastName }}
                                                    </h6>

                                                    <div><i class="bi-phone"></i>
                                                        {{ formatPhoneNumber(customer2.phone) }}
                                                        {{ formatPhoneNumber( customer2.phone2)}}
                                                        {{formatPhoneNumber(customer2.phone3) }}</div>
                                                    <div><i class="bi-house"></i> {{customer2.street}},
                                                        {{customer2.city}},
                                                        {{customer2.state}} {{customer2.zip}}
                                                    </div>
                                                    <div><i class="bi-clock"></i> Since {{ customer2.createdAt |
                                                        date}}
                                                    </div>

                                                </div>

                                            </div>
                                        </div>

                                        <div class="input-group" *ngIf="editModeCustomer==true">
                                            <div class="form-group col-12 nopadding">
                                                <label for="title">Title</label>
                                                <select class="form-control" name="title" #title="ngModel" size="1"
                                                    required [(ngModel)]="vehicle.customer.title"
                                                    [ngClass]="{ 'is-invalid': title.errors }">
                                                    <option *ngFor="let title of optionsTitle">{{ title}}</option>
                                                </select>
                                            </div>
                                            <div class="form-group col-6 nopadding">
                                                <label for="firstname">First Name</label>
                                                <input trimText class="form-control" type="text" name="firstName"
                                                    placeholder="first name" required minlength="2" maxlength="200"
                                                    #firstName="ngModel" [ngClass]="{ 'is-invalid': firstName.errors }"
                                                    [(ngModel)]="vehicle.customer.firstName" />
                                                <div class="invalid-feedback" *ngIf="firstName.errors">
                                                    <div *ngIf="firstName.errors['required']">First Name is required
                                                    </div>
                                                    <div *ngIf="firstName.errors['minlength']">
                                                        First Name must be at least 2 characters
                                                    </div>
                                                    <div *ngIf="firstName.errors['maxlength']">
                                                        First Name must be at most 200 characters
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group col-6 nopadding">
                                                <label>Last Name</label>
                                                <div class="input-group">
                                                    <input trimText class="form-control" type="text" placeholder="last name"
                                                        required minlength="2" maxlength="200" #lastName="ngModel"
                                                        [ngClass]="{ 'is-invalid': lastName.errors }"
                                                        [(ngModel)]="vehicle.customer.lastName" />
                                                    <div class="input-group-append">
                                                        <button class="btn btn-outline-secondary" type="button"
                                                            title="Search Vehicle with last name"
                                                            (click)="searchLastName(vehicle.customer.lastName)">
                                                            <i class="bi-truck"></i>
                                                        </button>
                                                    </div>
                                                    <div class="input-group-append">
                                                        <button class="btn btn-outline-secondary" type="button"
                                                            title="Search with last name"
                                                            (click)="searchCustomerByLastName(vehicle.customer.lastName)">
                                                            <i class="bi-person"></i>
                                                        </button>
                                                    </div>
                                                    <div class="invalid-feedback" *ngIf="lastName.errors">
                                                        <div *ngIf="lastName.errors['required']">Last Name is
                                                            required
                                                        </div>
                                                        <div *ngIf="lastName.errors['minlength']">
                                                            Last Name must be at least 2 characters
                                                        </div>
                                                        <div *ngIf="lastName.errors['maxlength']">
                                                            Last Name must be at most 200 characters
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>


                                            <div class="form-group col-6 nopadding">
                                                <label for="Phone">Mobile Phone</label>
                                                <div class="input-group">
                                                    <input type="text" name="phone" class="form-control" required
                                                        placeholder="Phone" [(ngModel)]="vehicle.customer.phone"
                                                        #phone="ngModel" [ngClass]="{ 'is-invalid': phone.errors }"
                                                        pattern="^[-+()0-9]{10,12}(?:-\d+)?$" />

                                                    <div class="input-group-append">
                                                        <button class="btn btn-outline-secondary" type="button"
                                                            (click)="searchPhone(vehicle.customer.phone)"
                                                            title="Search Vehicle with phone number">
                                                            <i class="bi-truck"></i>
                                                        </button>
                                                    </div>
                                                    <div class="input-group-append">
                                                        <button class="btn btn-outline-secondary" type="button"
                                                            title="Search Customer with phone number "
                                                            (click)="searchCustomerByPhoneOnly(vehicle.customer.phone)">
                                                            <i class="bi-person"></i>
                                                        </button>
                                                    </div>
                                                    <div class="invalid-feedback" *ngIf="phone.errors ">
                                                        <div *ngIf="phone.errors['required']">Phone is required
                                                        </div>
                                                        <div *ngIf="phone.errors['pattern']">
                                                            Phone must be a valid phone number
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group col-6 nopadding">
                                                <label for="homePhone">Home Phone</label>
                                                <div class="input-group">
                                                    <input type="text" name="phone2" class="form-control"
                                                        placeholder="Home Phone" [(ngModel)]="vehicle.customer.phone2"
                                                        #phone2="ngModel" [ngClass]="{ 'is-invalid': phone2.errors }"
                                                        pattern="^[-+()0-9]{10,12}(?:-\d+)?$" />

                                                    <div class="invalid-feedback" *ngIf="phone2.errors ">
                                                        <div *ngIf="phone2.errors['pattern']">
                                                            Phone must be a valid phone number
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group col-6 nopadding">
                                                <label for="workPhone">Work Phone</label>
                                                <div class="input-group">
                                                    <input type="text" name="phone3" class="form-control"
                                                        placeholder="Wrok Phone" [(ngModel)]="vehicle.customer.phone3"
                                                        #phone3="ngModel" [ngClass]="{ 'is-invalid': phone3.errors }"
                                                        pattern="^[-+()0-9]{10,12}(?:-\d+)?$" />

                                                    <div class="invalid-feedback" *ngIf="phone3.errors ">
                                                        <div *ngIf="phone3.errors['pattern']">
                                                            Phone must be a valid phone number
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group col-6 nopadding">
                                                <label>Email</label>
                                                <input trimText class="form-control" type="text" placeholder="email"
                                                    [(ngModel)]="vehicle.customer.email" />
                                            </div>
                                            <div class="form-group col-6 nopadding">
                                                <label>Zip</label>
                                                <input trimText class="form-control" type="text" placeholder="zip" minlength="5"
                                                    required #zip="ngModel" [ngClass]="{ 'is-invalid': zip.errors }"
                                                    #zipCode (keyup.enter)="searchZip(zipCode.value, vehicle)"
                                                    title="Enter/Return to Search" maxlength="5"
                                                    [(ngModel)]="vehicle.customer.zip" />
                                                <div class="invalid-feedback" *ngIf="zip.errors ">
                                                    <div *ngIf="zip.errors['required']">Zip is required</div>
                                                    <div *ngIf="zip.errors['zip']">
                                                        Must be a valid zip
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="form-group col-6 nopadding">
                                                <label>Street</label>
                                                <input trimText class="form-control" type="text" placeholder="street"
                                                    minlength="2" maxlength="200" #street="ngModel" required
                                                    [ngClass]="{ 'is-invalid': street.errors }"
                                                    [(ngModel)]="vehicle.customer.street" />
                                                <div class="invalid-feedback" *ngIf="street.errors">
                                                    <div *ngIf="street.errors['required']">Street is required
                                                    </div>
                                                    <div *ngIf="street.errors['minlength']">
                                                        Street must be at least 2 characters
                                                    </div>
                                                    <div *ngIf="street.errors['maxlength']">
                                                        Street must be at most 200 characters
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group col-6 nopadding">
                                                <label>City</label>
                                                <input trimText class="form-control" type="text" placeholder="city" minlength="2"
                                                    #city="ngModel" maxlength="200" required
                                                    [ngClass]="{ 'is-invalid': city.errors }"
                                                    [(ngModel)]="vehicle.customer.city" />
                                                <div class="invalid-feedback" *ngIf="city.errors">
                                                    <div *ngIf="city.errors['required']">City is required
                                                    </div>
                                                    <div *ngIf="city.errors['minlength']">
                                                        City must be at least 2 characters
                                                    </div>
                                                    <div *ngIf="city.errors['maxlength']">
                                                        City must be at most 200 characters
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="form-group col-6 nopadding">
                                                <label>State</label>
                                                <select class="form-control" name="state" #state="ngModel" size="1"
                                                    required [(ngModel)]="vehicle.customer.state"
                                                    [ngClass]="{ 'is-invalid': state.errors }">
                                                    <option value="AL">Alabama</option>
                                                    <option value="AK">Alaska</option>
                                                    <option value="AZ">Arizona</option>
                                                    <option value="AR">Arkansas</option>
                                                    <option value="CA">California</option>
                                                    <option value="CO">Colorado</option>
                                                    <option value="CT">Connecticut</option>
                                                    <option value="DE">Delaware</option>
                                                    <option value="DC">District Of Columbia</option>
                                                    <option value="FL">Florida</option>
                                                    <option value="GA">Georgia</option>
                                                    <option value="HI">Hawaii</option>
                                                    <option value="ID">Idaho</option>
                                                    <option value="IL">Illinois</option>
                                                    <option value="IN">Indiana</option>
                                                    <option value="IA">Iowa</option>
                                                    <option value="KS">Kansas</option>
                                                    <option value="KY">Kentucky</option>
                                                    <option value="LA">Louisiana</option>
                                                    <option value="ME">Maine</option>
                                                    <option value="MD">Maryland</option>
                                                    <option value="MA">Massachusetts</option>
                                                    <option value="MI">Michigan</option>
                                                    <option value="MN">Minnesota</option>
                                                    <option value="MS">Mississippi</option>
                                                    <option value="MO">Missouri</option>
                                                    <option value="MT">Montana</option>
                                                    <option value="NE">Nebraska</option>
                                                    <option value="NV">Nevada</option>
                                                    <option value="NH">New Hampshire</option>
                                                    <option value="NJ">New Jersey</option>
                                                    <option value="NM">New Mexico</option>
                                                    <option value="NY">New York</option>
                                                    <option value="NC">North Carolina</option>
                                                    <option value="ND">North Dakota</option>
                                                    <option value="OH">Ohio</option>
                                                    <option value="OK">Oklahoma</option>
                                                    <option value="OR">Oregon</option>
                                                    <option value="PA">Pennsylvania</option>
                                                    <option value="RI">Rhode Island</option>
                                                    <option value="SC">South Carolina</option>
                                                    <option value="SD">South Dakota</option>
                                                    <option value="TN">Tennessee</option>
                                                    <option value="TX">Texas</option>
                                                    <option value="UT">Utah</option>
                                                    <option value="VT">Vermont</option>
                                                    <option value="VA">Virginia</option>
                                                    <option value="WA">Washington</option>
                                                    <option value="WV">West Virginia</option>
                                                    <option value="WI">Wisconsin</option>
                                                    <option value="WY">Wyoming</option>
                                                </select>
                                                <div class="invalid-feedback d-block" *ngIf="state.errors ">
                                                    <div *ngIf="state.errors['required']">State is required</div>
                                                </div>
                                            </div>

                                            <div class="form-group col-12 nopadding">
                                                <label>Notes</label>
                                                <input trimText class="form-control" type="text" placeholder="notes"
                                                    [(ngModel)]="vehicle.customer.notes" />

                                            </div>
                                            <div *ngIf="errorMessage" class="form-group col-12 nopadding">
                                                <div class="form-group">
                                                    <label *ngIf="errorMessage">Error</label>
                                                    <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
                                                        {{ errorMessage }}
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngIf="successMessage" class="form-group col-12 nopadding">
                                                <div class="form-group">
                                                    <label *ngIf="successMessage">Success</label>
                                                    <div *ngIf="successMessage" class="alert alert-success"
                                                        role="alert">
                                                        {{ successMessage }}
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="input-group"
                                            *ngIf="editModeCustomer==false && vehicle.customer.id> 0">

                                            <div class="card shadow" style="width: 100%;"
                                                (click)="editModeCustomer = !editModeCustomer">
                                                <div class="card-body p-0">
                                                    <div class="list-group">
                                                        <a class="list-group-item list-group-item-action active py-1">
                                                            <i class="bi-person"></i>
                                                            {{vehicle.customer.title}}
                                                            {{vehicle.customer.firstName}}
                                                            {{ vehicle.customer.lastName }}
                                                        </a>

                                                        <a class="list-group-item list-group-item-action py-0">
                                                            <i class="bi-phone"></i>
                                                            {{ formatPhoneNumber(vehicle.customer.phone) }} {{
                                                            formatPhoneNumber( vehicle.customer.phone2) }}
                                                            {{formatPhoneNumber(vehicle.customer.phone3) }}</a>
                                                        <a class="list-group-item list-group-item-action py-0">
                                                            <i class="bi-house"></i>
                                                            {{vehicle.customer.street}},
                                                            {{vehicle.customer.city}},
                                                            {{vehicle.customer.state}} {{vehicle.customer.zip}}</a>
                                                        <a class="list-group-item list-group-item-action py-0">
                                                            <i class="bi bi-newspaper"></i>
                                                            {{ vehicle.customer.notes}}</a>
                                                        <a class="list-group-item list-group-item-action disabled py-1">
                                                            <i class="bi bi-clock"></i> Since {{
                                                            vehicle.customer.createdAt
                                                            |
                                                            date}}</a>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="card-footer py-1" *ngIf="editModeCustomer == true">
                                        <div class="form-group col-12 nopadding">
                                            <div class="input-group-append" *ngIf="editModeCustomer == true"
                                                style="float: right;">
                                                <div class="btn btn-primary" title="Save Customer Info"
                                                    (click)="saveCustomerInfo(vehicle.customer)">
                                                    Save
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-7 px-1">
                                <div class="card card-primary card-outline">
                                    <div class="card-header">


                                        <div class="card-title" title="Toggle to view or edit"
                                            (click)="editModeVehicle =!editModeVehicle; successMessageVehicle='';">
                                            <i class="bi-truck"></i>
                                            Vehicle
                                            <span *ngIf="vehicle.id>0"> #{{vehicle?.id}} &nbsp; </span>
                                        </div>

                                        <span *ngIf="vehicle.id> 0 && vehicle.paid==true">
                                            <button class="btn btn-success btn-xs"
                                                [disabled]="user.allowAddPayment == false"
                                                (click)="changePaidStatus(vehicle, false)">Paid</button></span>
                                        <span *ngIf="vehicle.id> 0 &&  vehicle.paid==false">
                                            <button class="btn btn-outline-secondary btn-xs"
                                                [disabled]="user.allowAddPayment == false"
                                                (click)="changePaidStatus(vehicle, true)">N.Paid</button></span>
                                        <div class="card-tools">
                                            <div class="input-group input-group-sm">
                                                <input type="text" class="form-control"
                                                    (input)="onSearchChangeVehicleVin($event)"
                                                    title="Search last 8 chars of the VIN"
                                                    (keyup.enter)="onSearchChangeVehicleVin($event)" size="21"
                                                    placeholder="Search VIN (last 8 chars)">
                                                <input type="text" class="form-control"
                                                    title="Search Customer Last Name"
                                                    (input)="onSearchChangeCustomerVehicle($event)"
                                                    placeholder="Search Customer last name">
                                                <div class="input-group-append">
                                                    <div class="btn btn-primary" title="Add A New Vehicle"
                                                        *ngIf="user.allowAddAndUpdateVehicle == true"
                                                        (click)="reset(false)">
                                                        Add Vehicle
                                                    </div>
                                                </div>
                                                <!-- <div class="input-group-append">
                                                    <div class="btn btn-primary" title="Save Vehicle Info"
                                                        *ngIf="user.allowAddAndUpdateVehicle == true && editModeVehicle==true"
                                                        (click)="createVehicle(vehicle)">
                                                        <i class="bi-save"></i>
                                                    </div>
                                                </div> -->
                                            </div>
                                        </div>
                                        <!-- /.card-tools -->
                                    </div>
                                    <div class="card-body px-2 py-2">
                                        <div class="form-group nopadding" *ngIf="vehicles.length > 0">
                                            <div class="row">
                                                <div class="card2 card-primary col-md-6"
                                                    *ngFor="let vehicles2 of vehicles; let i=index;  let even=even"
                                                    (click)="getDetail2(vehicles2, i)"
                                                    [style.background-color]="i == cindex? 'lightyellow' : (even ? 'white' : 'white')">

                                                    <h6>
                                                        <i class="bi-truck"></i> {{vehicles2.year}}
                                                        {{vehicles2.make}}
                                                        {{
                                                        vehicles2.model }}
                                                        {{ vehicles2.color }}
                                                    </h6>

                                                    <div><i class="bi-phone"></i> {{
                                                        formatPhoneNumber(vehicles2.customer.phone) }}
                                                        {{formatPhoneNumber(vehicles2.customer.phone2)
                                                        }} {{ formatPhoneNumber(vehicles2.customer.phone3) }}</div>
                                                    <div><i class="bi-house"></i> {{vehicles2.customer.street}},
                                                        {{vehicles2.customer.city}},
                                                        {{vehicles2.customer.state}} {{vehicles2.customer.zip}}
                                                    </div>
                                                    <div><i class="bi-clock"></i> Since {{ vehicles2.createdAt |
                                                        date}}
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="input-group  nopadding" *ngIf="editModeVehicle==true">
                                            <nav *ngIf="currentUser">
                                                <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                                    <button class="nav-link active" id="nav-vehicle-home-tab"
                                                        data-bs-toggle="tab" data-bs-target="#nav-vehicle-home"
                                                        type="button" role="tab" (click)="setStep(3)"
                                                        aria-controls="nav-vehicle-home"
                                                        aria-selected="true">Info</button>

                                                    <button class="nav-link" id="nav-vehicle-request-tab"
                                                        data-bs-toggle="tab" data-bs-target="#nav-vehicle-request"
                                                        type="button" role="tab" (click)="setStep(4)"
                                                        aria-controls="nav-vehicle-request"
                                                        aria-selected="true">Requests</button>

                                                    <!-- <button class="nav-link" id="nav-vehicle-tab" data-bs-toggle="tab"
                                    data-bs-target="#nav-vehicle" type="button" role="tab"
                                    ng-click="refresh(); setStep(0)" (click)="refresh();setStep(0)"
                                    aria-controls="nav-vehicle" aria-selected="true">Damages</button> -->

                                                    <button class="nav-link" id="nav-prior-damage-tab"
                                                        data-bs-toggle="tab" data-bs-target="#nav-prior-damage"
                                                        type="button" role="tab" (click)="setStep(1)"
                                                        aria-controls="nav-prior-damage" aria-selected="false">Prior
                                                        Damage</button>

                                                    <button class="nav-link" id="nav-vehicle-payment-tab"
                                                        data-bs-toggle="tab" *ngIf="vehicle.id>0"
                                                        data-bs-target="#nav-vehicle-payment" type="button" role="tab"
                                                        (click)="setStep(5)" aria-controls="nav-vehicle-payment"
                                                        aria-selected="true">Payment[{{payments.length}}]</button>

                                                    <button class="nav-link" id="nav-job-tab" data-bs-toggle="tab"
                                                        *ngIf="vehicle.id>0" data-bs-target="#nav-job" type="button"
                                                        role="tab" aria-controls="nav-job" (click)="setStep(2)"
                                                        aria-selected="false">Jobs[{{jobs.length}}]</button>
                                                </div>
                                            </nav>
                                            <div class="tab-content" id="nav-tabContent" style="width:100%">
                                                <div class="tab-pane fade show active" id="nav-vehicle-home"
                                                    role="tabpanel" #taggroup aria-labelledby="nav-vehicle-home-tab">
                                                    <div class="col-12 nopadding">
                                                        <div class="input-group mb-12">
                                                            <div class="input-group mb-12">
                                                                <div class="form-group col-3 nopadding">
                                                                    <label>License Plate</label>
                                                                    <input trimText class="form-control" type="text"
                                                                        placeholder="plate"
                                                                        [(ngModel)]="vehicle.plate" />
                                                                </div>
                                                                <div class="form-group col-9 nopadding">
                                                                    <label>VIN</label>
                                                                    <div class="input-group mb-12">
                                                                        <input type="text" class="form-control"
                                                                            placeholder="Search by VIN"
                                                                            [(ngModel)]="vehicle.vin" />
                                                                        <div class="input-group-append">
                                                                            <button class="btn btn-outline-secondary"
                                                                                type="button" (click)="searchVin()">
                                                                                Decode VIN
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group col-6 nopadding">
                                                                <label for="year">Year</label>
                                                                <div class="input-group">
                                                                    <select class="form-control" required size="1"
                                                                        #year="ngModel"
                                                                        [ngClass]="{ 'is-invalid': year.errors }"
                                                                        [(ngModel)]="vehicle.year" placeholder="Year">
                                                                        <option [value]="option"
                                                                            *ngFor="let option of optionsYear;let i=index;">
                                                                            {{option}}
                                                                        </option>
                                                                    </select>
                                                                    <div class="input-group-append">
                                                                        <button class="btn btn-outline-secondary"
                                                                            title="Search With Year" type="button"
                                                                            (click)="searchVehicle(4)">
                                                                            <i class="bi-search"></i>
                                                                        </button>
                                                                    </div>
                                                                    <div class="invalid-feedback d-block"
                                                                        *ngIf="year.errors ">
                                                                        <div *ngIf="year.errors['required']">Year is
                                                                            required</div>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group col-6 nopadding">
                                                                <label for="make">Make</label>
                                                                <div class="input-group">
                                                                    <select class="form-control" #device required
                                                                        size="1" #make="ngModel"
                                                                        [ngClass]="{ 'is-invalid': make.errors }"
                                                                        (change)="onChange($event, device.value)"
                                                                        [(ngModel)]="vehicle.make" placeholder="Make">
                                                                        <option [value]="option"
                                                                            *ngFor="let option of optionsMake;let i=index;">
                                                                            {{option}}
                                                                        </option>
                                                                    </select>
                                                                    <div class="input-group-append">
                                                                        <button class="btn btn-outline-secondary"
                                                                            title="Search with Year & Make"
                                                                            type="button" (click)="searchVehicle(3)">
                                                                            <i class="bi-search"></i>
                                                                        </button>
                                                                    </div>
                                                                    <div class="invalid-feedback" *ngIf="make.errors ">
                                                                        <div *ngIf="make.errors['required']">Make is
                                                                            required</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group col-6 nopadding">
                                                                <label for="model">Model</label>
                                                                <div class="input-group">
                                                                    <select class="form-control" required size="1"
                                                                        #model="ngModel" [(ngModel)]="vehicle.model"
                                                                        [ngClass]="{ 'is-invalid': model.errors }"
                                                                        placeholder="Model">
                                                                        <option [value]="option"
                                                                            *ngFor="let option of optionsModel;let i=index;">
                                                                            {{option}}
                                                                        </option>
                                                                    </select>
                                                                    <div class="input-group-append">
                                                                        <button class="btn btn-outline-secondary"
                                                                            title="Search With Year & Make & Model"
                                                                            type="button" (click)="searchVehicle(2)">
                                                                            <i class="bi-search"></i>
                                                                        </button>
                                                                    </div>
                                                                    <div class="invalid-feedback" *ngIf="model.errors ">
                                                                        <div *ngIf="model.errors['required']">Model
                                                                            is
                                                                            required</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group col-6 nopadding">
                                                                <label>Color</label>
                                                                <div class="input-group">
                                                                    <select class="form-control"
                                                                        [(ngModel)]="vehicle.color" required size="1"
                                                                        #color="ngModel"
                                                                        [ngClass]="{ 'is-invalid': color.errors }"
                                                                        style="background-color: {{vehicle.color}}"
                                                                        placeholder="color">
                                                                        <option style="background-color: {{color}}"
                                                                            *ngFor="let color of optionsColor;let i=index;">
                                                                            {{color}}</option>
                                                                    </select>
                                                                    <div class="input-group-append">
                                                                        <button class="btn btn-outline-secondary"
                                                                            title="Search With Year & Make & Model & Color"
                                                                            type="button" (click)="searchVehicle(1)">
                                                                            <i class="bi-search"></i>
                                                                        </button>
                                                                    </div>
                                                                    <div class="invalid-feedback" *ngIf="color.errors ">
                                                                        <div *ngIf="color.errors['required']">Color
                                                                            is
                                                                            required</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="input-group">
                                                            <div class="form-group col-3 nopadding">
                                                                <label for="year">Miles</label>
                                                                <input trimText class="form-control" type="text"
                                                                    placeholder="Miles" [(ngModel)]="vehicle.miles" />
                                                            </div>
                                                            <div class="form-group col-9 nopadding">
                                                                <label for="year">Description</label>
                                                                <input trimText class="form-control" type="text"
                                                                    placeholder="Description"
                                                                    [(ngModel)]="vehicle.description" />
                                                            </div>

                                                        </div>


                                                    </div>
                                                </div>
                                                <div class="tab-pane fade show" id="nav-vehicle-request" role="tabpanel"
                                                    #taggroup aria-labelledby="nav-vehicle-request-tab">
                                                    <div class="col-12 nopadding">

                                                        <div class="form-group col-12 nopadding">
                                                            <label for="workRequest">Work Requests</label>
                                                            <textarea class="form-control" rows="3"
                                                                [(ngModel)]="vehicle.workRequest" required
                                                                minlength="10" maxlength="200" #workRequest="ngModel"
                                                                [ngClass]="{ 'is-invalid': workRequest.errors }"
                                                                style="min-width: 100%"> </textarea>
                                                            <div class="invalid-feedback" *ngIf="workRequest.errors">
                                                                <div *ngIf="workRequest.errors['required']">Work
                                                                    Request
                                                                    is required
                                                                </div>
                                                                <div *ngIf="workRequest.errors['minlength']">
                                                                    Work Request must be at least 10 characters
                                                                </div>
                                                                <div *ngIf="workRequest.errors['maxlength']">
                                                                    Work Request must be at most 200 characters
                                                                </div>
                                                            </div>
                                                        </div>


                                                        <div class="input-group mb-12">
                                                            <div class="form-group col-6 nopadding">
                                                                <label for="Job Request Type">Job Requsst
                                                                    Type</label>
                                                                <div class="input-group">
                                                                    <select class="form-control" name="jobRequestType"
                                                                        required #jobRequestType="ngModel"
                                                                        [ngClass]="{ 'is-invalid': jobRequestType.errors }"
                                                                        [(ngModel)]="vehicle.jobRequestType"
                                                                        placeholder="Job Request Type">
                                                                        <option [value]="jobRequestType.id"
                                                                            *ngFor="let jobRequestType of jobRequestTypes;let i=index;">
                                                                            {{jobRequestType.name}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                                <div class="invalid-feedback d-block"
                                                                    *ngIf="jobRequestType.errors">
                                                                    <div *ngIf="jobRequestType.errors['required']">
                                                                        Job
                                                                        Request
                                                                        is required
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group col-6 nopadding">
                                                                <label>Claim Number</label>
                                                                <div class="input-group mb-12">
                                                                    <input type="text" class="form-control"
                                                                        placeholder="Claim Number"
                                                                        [(ngModel)]="vehicle.claimNumber" />

                                                                </div>
                                                            </div>
                                                            <div class="form-group col-6 nopadding">
                                                                <label>Price</label>
                                                                <div class="input-group mb-12">
                                                                    <input type="number" class="form-control" required
                                                                        #price="ngModel"
                                                                        [ngClass]="{ 'is-invalid': price.errors }"
                                                                        placeholder="Price"
                                                                        [(ngModel)]="vehicle.price" />

                                                                </div>
                                                                <div class="invalid-feedback d-block"
                                                                    *ngIf="price.errors">
                                                                    <div *ngIf="price.errors['required']">Price
                                                                        is required
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group col-6 nopadding">
                                                                <label>Supplement Price</label>
                                                                <div class="input-group mb-12">
                                                                    <input type="number" class="form-control"
                                                                        placeholder="Supplement Price"
                                                                        [(ngModel)]="vehicle.supplymentPrice" />

                                                                </div>

                                                            </div>
                                                            <div class="form-group col-6 nopadding">
                                                                <label for="Payment Method">Payment Method</label>
                                                                <div class="input-group">
                                                                    <select class="form-control"
                                                                        [(ngModel)]="vehicle.paymentMethod"
                                                                        placeholder="Model">
                                                                        <option [value]="paymentMethod.id"
                                                                            *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                                            {{paymentMethod.name}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>


                                                            <div class="form-group col-6 nopadding">
                                                                <label for="insuranceCompany">Insurance
                                                                    Company</label>
                                                                <div class="input-group">
                                                                    <select class="form-control"
                                                                        [(ngModel)]="vehicle.insuranceCompany"
                                                                        placeholder="Model">
                                                                        <option [value]="insurancer.name"
                                                                            *ngFor="let insurancer of insurancers;let i=index;">
                                                                            {{insurancer.name}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group col-6 nopadding">
                                                                <label for="insuranceCompany">Approval
                                                                    Status</label>
                                                                <div class="input-group">
                                                                    <select class="form-control"
                                                                        [(ngModel)]="vehicle.approvalStatus"
                                                                        placeholder="Model">
                                                                        <option [value]="approvalStatus.id"
                                                                            *ngFor="let approvalStatus of approvalStatuss;let i=index;">
                                                                            {{approvalStatus.name}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group col-6 nopadding">
                                                                <label for="loanerCarName">Rental Co.</label>
                                                                <div class="input-group">
                                                                    <select class="form-control"
                                                                        [(ngModel)]="vehicle.loanerCarName"
                                                                        placeholder="Model">
                                                                        <option [value]="rental.name"
                                                                            *ngFor="let rental of rentals;let i=index;">
                                                                            {{rental.name}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group col-6 nopadding"
                                                                *ngIf="vehicle.loanerCarName !=  null && vehicle.loanerCarName !=''">
                                                                <label for="loanerCarName">Rental Due
                                                                    Date</label>
                                                                <div class="input-group">
                                                                    <input type="date" class="form-control"
                                                                        (change)="onChangeVehicleCalendarRental($event, vehicle)"
                                                                        [ngModel]="vehicle.rentalDate |  date:'yyyy-MM-dd'">

                                                                </div>
                                                            </div>
                                                            <div class="form-group col-6 nopadding">
                                                                <label for="loanerCarName">Parking</label>
                                                                <div class="input-group">
                                                                    <select class="form-control"
                                                                        [(ngModel)]="vehicle.location"
                                                                        placeholder="Location">
                                                                        <option [value]="location.id"
                                                                            *ngFor="let location of locations;let i=index;">
                                                                            {{location.name}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group col-6 nopadding">
                                                                <label for="Job Request Type">Arrival Mode</label>
                                                                <div class="input-group">
                                                                    <select class="form-control"
                                                                        [(ngModel)]="vehicle.inTakeWay"
                                                                        placeholder="Model">
                                                                        <option [value]="inTakeWay.id"
                                                                            *ngFor="let inTakeWay of inTakeWays;let i=index;">
                                                                            {{inTakeWay.name}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group col-6 nopadding">
                                                                <label for="loanerCarName">Target Date</label>
                                                                <div class="input-group">
                                                                    <input type="date" class="form-control"
                                                                        [disabled]="user.allowChangeJobTargetDate == false"
                                                                        (change)="onChangeVehicleCalendar($event, vehicle)"
                                                                        [ngModel]="vehicle.targetDate |  date:'yyyy-MM-dd'">

                                                                </div>
                                                            </div>

                                                            <div class="form-group col-12 nopadding">
                                                                <label>Notes/Comments</label>
                                                                <div class="input-group">
                                                                    <input type="text" class="form-control"
                                                                        placeholder="Notes"
                                                                        [(ngModel)]="vehicle.comments" />
                                                                </div>
                                                            </div>
                                                            <div class="form-group col-12 nopadding"
                                                                *ngIf="vehicle.id> 0">
                                                                <label>Status</label>
                                                                <div class="input-group">
                                                                    <select class="form-control"
                                                                        [(ngModel)]="vehicle.status"
                                                                        placeholder="status" #status
                                                                        [disabled]="user.allowUpdateVehicleStatus == false"
                                                                        (change)="onChangeStatus($event, status.value)">
                                                                        <option
                                                                            *ngFor="let option of statuss; let i=index"
                                                                            value="{{option.id}}">
                                                                            {{option.name}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- <div class="tab-pane fade show" id="nav-vehicle" role="tabpanel" #taggroup
                                aria-labelledby="nav-vehicle-tab">

                                <div class="input-group col-12 nopadding" id="usa_image2"
                                    style="background-color: white;">


                                    <div class="col-9" id="usa_image3" style="background-color: white;">
                                        <img width="400px" [src]="getLinkPicture()" id="usa_image" #test
                                            usemap="#usa" style="background-color: white;"
                                            alt="this is a image">

                                        <map id="usa_image_map" name="usa">
                                            <area state="LHF" full="LH Fender" id="s1" target="" alt=""
                                                title=" LH Fender" href="#"
                                                (mousedown)="addDamage('LHF', 'LH Fender')"
                                                coords="109,318,116,317,123,314,132,310,140,308,150,308,159,307,169,306,181,306,194,303,202,300,211,299,211,307,209,318,208,327,208,337,208,344,211,352,212,358,213,367,202,365,200,354,196,346,189,338,178,331,165,333,151,336,143,344,138,350,135,357,132,365,135,334,119,336"
                                                shape="poly">

                                            <area state="RFB" full="RF Bumper" id="star1" target="" alt=""
                                                title="LF Bumper" href="#"
                                                (mousedown)="addDamage('RFB', 'RF Bumper')"
                                                coords="22,208,59,208,59,179,62,171,63,142,57,134,47,134,38,131,32,137,22,141"
                                                shape="poly">

                                            <area state="LFB" full="FR Bumper" id="star1" target="" alt=""
                                                title="LF Bumper" href="#"
                                                (mousedown)="addDamage('LFB', 'LF Bumper')"
                                                coords="22,207,61,207,59,235,62,241,62,275,58,280,46,280,34,283,26,277,22,271"
                                                shape="poly">

                                            <area state="LFT" full="LF Tire" target="" alt="" title="LF Tire"
                                                href="#" (mousedown)="addDamage('LFT','LF Tire')"
                                                coords="151,343,160,336,171,336,180,339,188,342,193,349,194,356,194,364,193,372,190,379,180,384,170,387,160,386,148,379,145,372,142,360,143,350"
                                                shape="poly">

                                            <area state="LRT" full="LR Tire" target="" alt="" title="LR Tire"
                                                href="#" (mousedown)="addDamage('LRT','LR Tire')"
                                                coords="390,344,401,336,413,336,422,338,429,346,435,360,433,368,431,376,424,383,416,387,408,388,394,384,386,377,382,363,385,352"
                                                shape="poly">

                                            <area state="LRQP" full="LR Qua Panel" target="" alt=""
                                                title="LR Qua Panel" href=""
                                                (mousedown)="addDamage('LRQP','LR Qua Panel')"
                                                coords="398,303,449,303,460,300,474,304,482,306,490,308,491,318,481,317,478,334,428,336,413,333,408,323,397,325,405,315"
                                                shape="poly">

                                            <area state="LRD" full="LR Door" target="" alt=""
                                                title="Cooling Fan" href=""
                                                (mousedown)="addDamage('LRD','LR Door')"
                                                coords="310,303,394,303,404,318,397,326,381,334,374,345,366,367,313,368,310,337"
                                                shape="poly">

                                            <area state="LFD" full="LF Door" target="" alt="" title="LF Door"
                                                href="" (mousedown)="addDamage('LFD','LR Door')"
                                                coords="213,302,227,302,242,302,256,300,274,302,305,300,312,303,309,336,313,368,215,368,211,353,208,334,208,318"
                                                shape="poly">

                                        </map>
                                    </div>
                                    <div class="col-2" style="background-color: white; font-size: 5px;">
                                        <label for="image">Damages</label>
                                        <div id="statelist">
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                                                <div class="tab-pane fade show" id="nav-prior-damage" role="tabpanel">
                                                    <div class="input-group mb-12">
                                                        <div class="form-group col-12 nopadding">
                                                            <label for="placeholder">Prior Damages
                                                                {{getPriorDamageWordCount()}}
                                                                words
                                                                (500
                                                                Max)</label>
                                                            <textarea [(ngModel)]="vehicle.priorDamage"
                                                                (keyup.enter)="onSavePriorDamage(vehicle)" rows="10"
                                                                class="form-control mb-12"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="tab-pane fade show" id="nav-vehicle-payment" role="tabpanel"
                                                    #taggroup aria-labelledby="nav-vehicle-payment-tab">
                                                    <div class="col-12 nopadding" cdkDropList
                                                        (cdkDropListDropped)="droppedPayment($event)">
                                                        <div class="input-group mb-12">
                                                            <label for="placeholder"> </label>
                                                            <div class="nopadding" *ngIf="user.allowAddPayment == true">
                                                                <li class="dropdown">
                                                                    <button type="button" class="dropdown-toggle"
                                                                        data-bs-toggle="dropdown" title="Add Payment"
                                                                        aria-expanded="false">
                                                                        <i class="bi-plus-lg"></i>
                                                                    </button>
                                                                    <div class="dropdown-menu">
                                                                        <ng-container
                                                                            *ngFor="let paymentType of paymentTypes; let i=index">
                                                                            <a (click)="addVehiclePayment(paymentType)"
                                                                                class="dropdown-item">
                                                                                {{paymentType.name}} </a>
                                                                        </ng-container>
                                                                    </div>
                                                                </li>
                                                            </div>
                                                        </div>
                                                        <div class="input-group mb-12"
                                                            *ngFor="let payment of payments; let i=index">

                                                            <div class="form-group col-3 nopadding">
                                                                <label *ngIf="i==0" for="header"># Name</label>
                                                                <div class="input-group">
                                                                    <button class="btn btn-outline-secondary"
                                                                        cdkDrag>{{i+1}}</button>
                                                                    <input for="job name" type="text"
                                                                        class="form-control" [(ngModel)]="payment.name"
                                                                        (keyup.enter)="onEnterPayment('payment name',payment)">
                                                                </div>

                                                            </div>
                                                            <div class="form-group col-2 nopadding">
                                                                <label *ngIf="i==0">Amount</label>
                                                                <div class="input-group mb-12">
                                                                    <input type="number" class="form-control"
                                                                        placeholder="Amount"
                                                                        [(ngModel)]="payment.amount" pattern="[0-9]" />
                                                                </div>
                                                            </div>
                                                            <div class="form-group col-2 nopadding">
                                                                <label *ngIf="i==0" for="Payment Method">Payment
                                                                    Method</label>
                                                                <div class="input-group">
                                                                    <select class="form-control"
                                                                        [(ngModel)]="payment.paymentMethodId"
                                                                        placeholder="Model">
                                                                        <option [value]="paymentMethod.id"
                                                                            *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                                            {{paymentMethod.name}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>


                                                            <div class="form-group col-2 nopadding">
                                                                <label *ngIf="i==0">Payment Status</label>
                                                                <div class="input-group">
                                                                    <select class="form-control"
                                                                        [(ngModel)]="payment.paymentStatusId"
                                                                        placeholder="Model">
                                                                        <option [value]="option.id"
                                                                            *ngFor="let option of paymentStatuss;let i=index;">
                                                                            {{option.name}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group col-3 nopadding">
                                                                <label *ngIf="i==0">Date</label>
                                                                <div class="input-group">
                                                                    <input type="date" class="form-control"
                                                                        (change)="onChangeVehiclePaymentCalendar($event, payment)"
                                                                        [ngModel]="payment.date |  date:'yyyy-MM-dd'">

                                                                    <div class="input-group-append">
                                                                        <button style="background-color: white;"
                                                                            title="Remove this payment"
                                                                            class="btn-outline-secondary"
                                                                            (click)="deleteVehiclePayment(null, payment)"><i
                                                                                class="bi-trash"></i></button>
                                                                    </div>
                                                                    <div class="input-group-append">
                                                                        <button style="background-color: white;"
                                                                            class="btn-outline-secondary"
                                                                            title="Save payment Info"
                                                                            (click)="savePayment(payment)"><i
                                                                                class="bi-save"></i></button>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="tab-pane fade show" id="nav-job" role="tabpanel">
                                                    <div class="input-group mb-12">
                                                        <label for="placeholder"> </label>
                                                        <div class="nopadding" *ngIf="user.allowAddService == true">
                                                            <li class="dropdown">
                                                                <button type="button" class="dropdown-toggle"
                                                                    data-bs-toggle="dropdown" title="Add Job"
                                                                    aria-expanded="false">
                                                                    <i class="bi-plus-lg"></i>
                                                                </button>
                                                                <div class="dropdown-menu">
                                                                    <ng-container
                                                                        *ngFor="let service of services; let i=index">
                                                                        <a (click)="addVehicleJob(service)"
                                                                            class="dropdown-item">
                                                                            {{service.name}} </a>
                                                                    </ng-container>
                                                                </div>
                                                            </li>
                                                        </div>
                                                    </div>
                                                    <div class="input-group mb-12" cdkDropList
                                                        (cdkDropListDropped)="dropped($event)">
                                                        <div class="input-group mb-12"
                                                            *ngFor="let job of jobs; let i=index"
                                                            (click)="setJobId(job.id)">
                                                            <div class="form-group col-3 nopadding">
                                                                <label *ngIf="i==0" for="header"># Job Name</label>
                                                                <div class="input-group">
                                                                    <button *ngIf="job.status ==0"
                                                                        [style.background-color]="job.id == currentJobId? 'blue' : (true ? 'white' : 'white')"
                                                                        class="btn btn-outline-secondary"
                                                                        cdkDrag>{{i+1}}</button>
                                                                    <button *ngIf="job.status ==1"
                                                                        class="btn btn-outline-danger"
                                                                        [style.background-color]="job.id == currentJobId? 'blue' : (true ? 'white' : 'white')"
                                                                        cdkDrag>{{i+1}}</button>
                                                                    <input for="job name" type="text"
                                                                        class="form-control" [(ngModel)]="job.name"
                                                                        (keyup.enter)="onEnter('job name',job)">
                                                                </div>
                                                            </div>
                                                            <div class="form-group col-3 nopadding">
                                                                <label *ngIf="i==0" for="header">Type/Payment</label>
                                                                <div class="input-group">
                                                                    <select class="form-control"
                                                                        [(ngModel)]="job.jobRequestType"
                                                                        placeholder="Job Requst Type" #jobRequestType
                                                                        (change)="onChangeJobJobRequestType($event, jobRequestType.value, job)">
                                                                        <option
                                                                            *ngFor="let jobRequestType of jobRequestTypes let i=index"
                                                                            value="{{jobRequestType.id}}">
                                                                            {{jobRequestType.name}}
                                                                        </option>
                                                                    </select>
                                                                    <select class="form-control"
                                                                        [(ngModel)]="job.paymentMethod"
                                                                        placeholder="Payment Method" #paymentMethod
                                                                        (change)="onChangeJobPaymentMethod($event, paymentMethod.value, job)">
                                                                        <option
                                                                            *ngFor="let paymentMethod of paymentMethods let i=index"
                                                                            value="{{paymentMethod.id}}">
                                                                            {{paymentMethod.name}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>

                                                            <div class="form-group col-3 nopadding">
                                                                <label *ngIf="i==0"
                                                                    for="header">To/Deadline/Status</label>
                                                                <div class="input-group">
                                                                    <select class="form-control"
                                                                        [(ngModel)]="job.employeeId" #device
                                                                        [disabled]="user.allowAssignUser == false"
                                                                        (change)="onChangeEmployee2($event, device.value, job)"
                                                                        placeholder="Model">
                                                                        <option [value]="employee.id"
                                                                            *ngFor="let employee of employees;let i=index;">
                                                                            {{employee.firstName}}
                                                                            {{employee.lastName}}
                                                                        </option>
                                                                    </select>
                                                                    <div class="input-group-append">
                                                                        <input type="date" *ngIf="job.employeeId > 0"
                                                                            style="width:110px"
                                                                            [disabled]="user.allowChangeJobTargetDate == false"
                                                                            (change)="onChangeCalendar($event, job)"
                                                                            max="{{vehicle.targetDate | date:'yyyy-MM-dd'}}"
                                                                            [ngModel]="job.targetDate |  date:'yyyy-MM-dd'">
                                                                    </div>
                                                                    <div class="input-group-append  form-control"
                                                                        style="flex: 0 40px;">
                                                                        <input type="checkbox"
                                                                            style="width:20px;height: 20px;"
                                                                            [checked]="isJobChecked(job)"
                                                                            [disabled]="user.allowUpdateJobStatus == false"
                                                                            *ngIf="job.employeeId > 0 && job.targetDate != null"
                                                                            (change)="updateJobStatus(job)">
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="form-group col-3 nopadding">
                                                                <label *ngIf="i==0" for="header">Job
                                                                    Instructions</label>
                                                                <div class="input-group">

                                                                    <textarea type="text" [(ngModel)]="job.notes"
                                                                        class="form-control"
                                                                        (keyup.enter)="onEnter('job notes',job)"
                                                                        rows="1"
                                                                        oninput='this.style.height = "";this.style.height = this.scrollHeight + "px"'
                                                                        [disabled]="user.allowUpdateJobStatus == false"></textarea>
                                                                    <div class="input-group-append">
                                                                        <button style="background-color: white;"
                                                                            title="Remove this job"
                                                                            class="btn-outline-secondary"
                                                                            (click)="deleteVehicleJob(null,job)"><i
                                                                                class="bi-trash"></i></button>
                                                                    </div>
                                                                    <div class="input-group-append">
                                                                        <button style="background-color: white;"
                                                                            title="Save Job Info"
                                                                            class="btn-outline-secondary"
                                                                            (click)="saveJobNotes(job)"><i
                                                                                class="bi-save"></i></button>
                                                                    </div>


                                                                </div>
                                                            </div>
                                                            <div class="form-group col-3 nopadding">

                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="input-group mb-12">

                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="input-group mb-12 nopadding"
                                            *ngIf="editModeVehicle==false && vehicle.id > 0">
                                            <div class="card shadow" style="width: 100%;" id="{{vehicle?.id}}"
                                                #target_{{vehicle?.id}}
                                                (click)="editModeVehicle =!editModeVehicle; refresh(); setStep(0)">
                                                <!-- <div class="progress">
                        <div class="progress-bar" role="progressbar"
                            style="width: {{vehicle.daysInShopPrecentage}}%" aria-valuenow="25"
                            aria-valuemin="0" aria-valuemax="100"></div>
                    </div> -->
                                                <!-- <img class="card-img-top" *ngIf="vehicle.imageModels"
                        src="{{baseUrlImage + '/' + vehicle.imageModels[0]?.id}}" alt=""> -->
                                                <div class="card-body p-0">
                                                    <div class="list-group">
                                                        <a class="list-group-item list-group-item-action active py-1">
                                                            <i class="bi-truck"></i>
                                                            #{{ vehicle.id }} {{ vehicle.year }} {{ vehicle.make }}
                                                            {{
                                                            vehicle.model }} {{ vehicle.color }}
                                                        </a>
                                                        <a class="list-group-item list-group-item-action py-0">
                                                            <i class="bi bi-newspaper"></i>
                                                            {{ vehicle.description }}</a>
                                                        <a class="list-group-item list-group-item-action py-0"
                                                            *ngIf="vehicle.vin !=''">
                                                            <i class="bi bi-newspaper"></i>
                                                            {{ vehicle.vin }}</a>
                                                        <a class="list-group-item list-group-item-action py-0">
                                                            <i class="bi bi-newspaper"></i>
                                                            R/O:{{ vehicle.workRequest }}</a>

                                                        <a class="list-group-item list-group-item-action py-0">
                                                            <i class="bi bi-menu-up"></i>
                                                            <ng-container
                                                                *ngFor="let jobRequestType of jobRequestTypes; let i=index">
                                                                <span *ngIf="vehicle.jobRequestType==jobRequestType.id">
                                                                    <strong> {{jobRequestType.name}}</strong></span>
                                                            </ng-container>
                                                        </a>

                                                        <a class="list-group-item list-group-item-action py-0">
                                                            <i class="bi bi-bank"></i>
                                                            ${{ vehicle.price }}</a>

                                                        <a class="list-group-item list-group-item-action py-0">
                                                            <i class="bi-ui-checks"></i> {{ vehicle.insuranceCompany
                                                            }}</a>

                                                        <a class="list-group-item list-group-item-action py-0">
                                                            <i class="bi-truck"></i> {{ vehicle.loanerCarName }}</a>

                                                        <a class="list-group-item list-group-item-action py-0">
                                                            <i class="bi bi-clock"></i> {{vehicle.targetDate |
                                                            date:'yyyy-MM-dd'}}</a>

                                                        <a class="list-group-item list-group-item-action py-0"
                                                            style="background-color: lightgrey;">
                                                            <i class="bi bi-menu-up"></i>
                                                            <ng-container *ngFor="let option of statuss; let i=index">
                                                                <strong *ngIf="vehicle.status==option.id">
                                                                    {{option.name}}</strong>
                                                            </ng-container>
                                                        </a>

                                                        <a class="list-group-item list-group-item-action disabled py-1">
                                                            <i class="bi bi-clock"></i>
                                                            {{ vehicle.createdAt | date}} Been
                                                            {{vehicle.daysInShop}}
                                                            days</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div *ngIf="errorMessageVehicle" class="form-group col-12 nopadding">
                                            <div class="form-group">
                                                <label *ngIf="errorMessageVehicle">Error</label>
                                                <div *ngIf="errorMessageVehicle" class="alert alert-danger"
                                                    role="alert">
                                                    {{ errorMessageVehicle }}
                                                </div>
                                            </div>
                                        </div>
                                        <div *ngIf="successMessageVehicle" class="form-group col-12 nopadding">
                                            <div class="form-group">
                                                <label *ngIf="successMessageVehicle">Success</label>
                                                <div *ngIf="successMessageVehicle" class="alert alert-success"
                                                    role="alert">
                                                    {{ successMessageVehicle }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer py-1"
                                        *ngIf="editModeVehicle == true && user.allowAddAndUpdateVehicle == true && editModeVehicle==true">
                                        <div class="form-group col-12 nopadding">
                                            <div class="input-group-append" *ngIf="editModeVehicle == true"
                                                style="float: right;">
                                                <div class="btn btn-primary" title="Save Vehicle Info"
                                                    (click)="createVehicle(vehicle)">
                                                    Save
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade show " id="nav-vehicle-receipt" role="tabpanel" #taggroup
                        aria-labelledby="nav-vehicle-receipt-tab" style="min-height: 500px;">

                        <div class="card card-primary card-outline">
                            <div class="card-header" style="padding: 0.3rem rem 1.25rem;">

                                <div class="card-title" (click)="editModeCustomer =!editModeCustomer"
                                    title="Toggle to view or edit">
                                    <i class="bi-person"></i>
                                    Customer
                                </div>

                                <div class="card-tools">
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control" [(ngModel)]="searchInput"
                                            (input)="onSearchChangeCustomer($event)"
                                            placeholder="Search Customer last name">

                                        <div class="input-group-append">
                                            <div class="btn btn-primary" title="Search"
                                                (click)="searchCustomerByLastName(searchInput)">
                                                <i class="bi-search"></i>
                                            </div>
                                        </div>

                                        <div class="input-group-append">
                                            <div class="btn btn-primary" *ngIf="user.allowUpdateCustomerInfo == true"
                                                title="Add A New Customer" (click)="reset(true)">
                                                <i class="bi-plus-lg"></i>
                                            </div>
                                        </div>
                                        <div class="input-group-append" *ngIf="editModeCustomer == true">
                                            <div class="btn btn-primary" (click)="saveCustomerInfo(vehicle.customer)">
                                                <i class="bi-save" title="Save"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="card-body">

                                <div class="form-group nopadding" *ngIf="customers.length > 0">
                                    <div class="row">
                                        <div class="card2 card-primary col-md-6"
                                            *ngFor="let customer2 of customers; let i=index;  let even=even"
                                            (click)="getCustomerDetail(customer2, i)"
                                            [style.background-color]="i == cindexCustomer? 'lightyellow' : (even ? 'white' : 'white')">

                                            <h6>
                                                {{customer2.title}} {{customer2.firstName}} {{
                                                customer2.lastName }}
                                            </h6>

                                            <div><i class="bi-phone"></i> {{ formatPhoneNumber(customer2.phone) }} {{
                                                formatPhoneNumber( customer2.phone2)
                                                }} {{
                                                formatPhoneNumber(customer2.phone3) }}</div>
                                            <div><i class="bi-house"></i> {{customer2.street}},
                                                {{customer2.city}},
                                                {{customer2.state}} {{customer2.zip}}
                                            </div>
                                            <div><i class="bi-clock"></i> Since {{ customer2.createdAt | date}}</div>

                                        </div>

                                    </div>
                                </div>

                                <div class="input-group" *ngIf="editModeCustomer==true">
                                    <div class="form-group col-4 nopadding">
                                        <label for="title">Title</label>
                                        <select class="form-control" name="title" #title="ngModel" size="1" required
                                            [(ngModel)]="vehicle.customer.title"
                                            [ngClass]="{ 'is-invalid': title.errors }">
                                            <option *ngFor="let title of optionsTitle">{{ title}}</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-4 nopadding">
                                        <label for="firstname">First Name</label>
                                        <input trimText class="form-control" type="text" name="firstName"
                                            placeholder="first name" required minlength="2" maxlength="200"
                                            #firstName="ngModel" [ngClass]="{ 'is-invalid': firstName.errors }"
                                            [(ngModel)]="vehicle.customer.firstName" />
                                        <div class="invalid-feedback" *ngIf="firstName.errors">
                                            <div *ngIf="firstName.errors['required']">First Name is required
                                            </div>
                                            <div *ngIf="firstName.errors['minlength']">
                                                First Name must be at least 2 characters
                                            </div>
                                            <div *ngIf="firstName.errors['maxlength']">
                                                First Name must be at most 200 characters
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group col-4 nopadding">
                                        <label>Last Name</label>
                                        <div class="input-group">
                                            <input trimText class="form-control" type="text" placeholder="last name" required
                                                minlength="2" maxlength="200" #lastName="ngModel"
                                                [ngClass]="{ 'is-invalid': lastName.errors }"
                                                [(ngModel)]="vehicle.customer.lastName" />
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-secondary" type="button"
                                                    (click)="searchLastName(vehicle.customer.lastName)">
                                                    <i class="bi-truck"></i>
                                                </button>
                                            </div>
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-secondary" type="button"
                                                    (click)="searchCustomerByLastName(vehicle.customer.lastName)">
                                                    <i class="bi-person"></i>
                                                </button>
                                            </div>
                                            <div class="invalid-feedback" *ngIf="lastName.errors">
                                                <div *ngIf="lastName.errors['required']">Last Name is required
                                                </div>
                                                <div *ngIf="lastName.errors['minlength']">
                                                    Last Name must be at least 2 characters
                                                </div>
                                                <div *ngIf="lastName.errors['maxlength']">
                                                    Last Name must be at most 200 characters
                                                </div>
                                            </div>
                                        </div>

                                    </div>


                                    <div class="form-group col-4 nopadding">
                                        <label for="Phone">Mobile Phone</label>
                                        <div class="input-group">
                                            <input type="text" name="phone" class="form-control" required
                                                placeholder="Phone" [(ngModel)]="vehicle.customer.phone"
                                                #phone="ngModel" [ngClass]="{ 'is-invalid': phone.errors }"
                                                pattern="^[-+()0-9]{10,12}(?:-\d+)?$" />

                                            <div class="input-group-append">
                                                <button class="btn btn-outline-secondary" type="button"
                                                    (click)="searchPhone(vehicle.customer.phone)">
                                                    <i class="bi-truck"></i>
                                                </button>
                                            </div>
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-secondary" type="button"
                                                    (click)="searchCustomerByPhoneOnly(vehicle.customer.phone)">
                                                    <i class="bi-person"></i>
                                                </button>
                                            </div>
                                            <div class="invalid-feedback" *ngIf="phone.errors ">
                                                <div *ngIf="phone.errors['required']">Phone is required</div>
                                                <div *ngIf="phone.errors['pattern']">
                                                    Phone must be a valid phone number
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group col-4 nopadding">
                                        <label for="homePhone">Home Phone</label>
                                        <div class="input-group">
                                            <input type="text" name="phone2" class="form-control"
                                                placeholder="Home Phone" [(ngModel)]="vehicle.customer.phone2"
                                                #phone2="ngModel" [ngClass]="{ 'is-invalid': phone2.errors }"
                                                pattern="^[-+()0-9]{10,12}(?:-\d+)?$" />

                                            <div class="invalid-feedback" *ngIf="phone2.errors ">
                                                <div *ngIf="phone2.errors['pattern']">
                                                    Phone must be a valid phone number
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group col-4 nopadding">
                                        <label for="workPhone">Work Phone</label>
                                        <div class="input-group">
                                            <input type="text" name="phone3" class="form-control"
                                                placeholder="Wrok Phone" [(ngModel)]="vehicle.customer.phone3"
                                                #phone3="ngModel" [ngClass]="{ 'is-invalid': phone3.errors }"
                                                pattern="^[-+()0-9]{10,12}(?:-\d+)?$" />

                                            <div class="invalid-feedback" *ngIf="phone3.errors ">
                                                <div *ngIf="phone3.errors['pattern']">
                                                    Phone must be a valid phone number
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group col-4 nopadding">
                                        <label>Email</label>
                                        <input trimText class="form-control" type="text" placeholder="email"
                                            [(ngModel)]="vehicle.customer.email" />
                                    </div>
                                    <div class="form-group col-4 nopadding">
                                        <label>Street</label>
                                        <input trimText class="form-control" type="text" placeholder="street" minlength="2"
                                            maxlength="200" #street="ngModel" required
                                            [ngClass]="{ 'is-invalid': street.errors }"
                                            [(ngModel)]="vehicle.customer.street" />
                                        <div class="invalid-feedback" *ngIf="street.errors">
                                            <div *ngIf="street.errors['required']">Street is required
                                            </div>
                                            <div *ngIf="street.errors['minlength']">
                                                Street must be at least 2 characters
                                            </div>
                                            <div *ngIf="street.errors['maxlength']">
                                                Street must be at most 200 characters
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group col-4 nopadding">
                                        <label>City</label>
                                        <input trimText class="form-control" type="text" placeholder="city" minlength="2"
                                            #city="ngModel" maxlength="200" required
                                            [ngClass]="{ 'is-invalid': city.errors }"
                                            [(ngModel)]="vehicle.customer.city" />
                                        <div class="invalid-feedback" *ngIf="city.errors">
                                            <div *ngIf="city.errors['required']">City is required
                                            </div>
                                            <div *ngIf="city.errors['minlength']">
                                                City must be at least 2 characters
                                            </div>
                                            <div *ngIf="city.errors['maxlength']">
                                                City must be at most 200 characters
                                            </div>
                                        </div>

                                    </div>
                                    <div class="form-group col-4 nopadding">
                                        <label>State</label>
                                        <select class="form-control" name="state" #state="ngModel" size="1" required
                                            [(ngModel)]="vehicle.customer.state"
                                            [ngClass]="{ 'is-invalid': state.errors }">
                                            <option value="AL">Alabama</option>
                                            <option value="AK">Alaska</option>
                                            <option value="AZ">Arizona</option>
                                            <option value="AR">Arkansas</option>
                                            <option value="CA">California</option>
                                            <option value="CO">Colorado</option>
                                            <option value="CT">Connecticut</option>
                                            <option value="DE">Delaware</option>
                                            <option value="DC">District Of Columbia</option>
                                            <option value="FL">Florida</option>
                                            <option value="GA">Georgia</option>
                                            <option value="HI">Hawaii</option>
                                            <option value="ID">Idaho</option>
                                            <option value="IL">Illinois</option>
                                            <option value="IN">Indiana</option>
                                            <option value="IA">Iowa</option>
                                            <option value="KS">Kansas</option>
                                            <option value="KY">Kentucky</option>
                                            <option value="LA">Louisiana</option>
                                            <option value="ME">Maine</option>
                                            <option value="MD">Maryland</option>
                                            <option value="MA">Massachusetts</option>
                                            <option value="MI">Michigan</option>
                                            <option value="MN">Minnesota</option>
                                            <option value="MS">Mississippi</option>
                                            <option value="MO">Missouri</option>
                                            <option value="MT">Montana</option>
                                            <option value="NE">Nebraska</option>
                                            <option value="NV">Nevada</option>
                                            <option value="NH">New Hampshire</option>
                                            <option value="NJ">New Jersey</option>
                                            <option value="NM">New Mexico</option>
                                            <option value="NY">New York</option>
                                            <option value="NC">North Carolina</option>
                                            <option value="ND">North Dakota</option>
                                            <option value="OH">Ohio</option>
                                            <option value="OK">Oklahoma</option>
                                            <option value="OR">Oregon</option>
                                            <option value="PA">Pennsylvania</option>
                                            <option value="RI">Rhode Island</option>
                                            <option value="SC">South Carolina</option>
                                            <option value="SD">South Dakota</option>
                                            <option value="TN">Tennessee</option>
                                            <option value="TX">Texas</option>
                                            <option value="UT">Utah</option>
                                            <option value="VT">Vermont</option>
                                            <option value="VA">Virginia</option>
                                            <option value="WA">Washington</option>
                                            <option value="WV">West Virginia</option>
                                            <option value="WI">Wisconsin</option>
                                            <option value="WY">Wyoming</option>
                                        </select>
                                        <div class="invalid-feedback d-block" *ngIf="state.errors ">
                                            <div *ngIf="state.errors['required']">State is required</div>
                                        </div>
                                    </div>
                                    <div class="form-group col-4 nopadding">
                                        <label>Zip</label>
                                        <input trimText class="form-control" type="text" placeholder="zip" minlength="5" required
                                            #zip="ngModel" [ngClass]="{ 'is-invalid': zip.errors }" maxlength="5"
                                            #zipCode (keyup.enter)="searchZip(zipCode.value, vehicle)"
                                            [(ngModel)]="vehicle.customer.zip" />
                                        <div class="invalid-feedback" *ngIf="zip.errors ">
                                            <div *ngIf="zip.errors['required']">Zip is required</div>
                                            <div *ngIf="zip.errors['zip']">
                                                Must be a valid zip
                                            </div>
                                        </div>

                                    </div>
                                    <div class="form-group col-12 nopadding">
                                        <label>Notes</label>
                                        <input trimText class="form-control" type="text" placeholder="notes"
                                            [(ngModel)]="vehicle.customer.notes" />

                                    </div>
                                    <div *ngIf="errorMessage" class="form-group col-12 nopadding">
                                        <div class="form-group">
                                            <label *ngIf="errorMessage">Error</label>
                                            <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
                                                {{ errorMessage }}
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="successMessage" class="form-group col-12 nopadding">
                                        <div class="form-group">
                                            <label *ngIf="successMessage">Success</label>
                                            <div *ngIf="successMessage" class="alert alert-success" role="alert">
                                                {{ successMessage }}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="input-group" *ngIf="editModeCustomer==false && vehicle.customer.id> 0">

                                    <div class="card shadow" style="width: 100%;"
                                        (click)="editModeCustomer = !editModeCustomer">
                                        <div class="card-body p-0">
                                            <div class="list-group">
                                                <a class="list-group-item list-group-item-action active py-1">
                                                    <i class="bi-person"></i>
                                                    {{vehicle.customer.title}}
                                                    {{vehicle.customer.firstName}}
                                                    {{ vehicle.customer.lastName }}
                                                </a>

                                                <a class="list-group-item list-group-item-action py-0">
                                                    <i class="bi-phone"></i>
                                                    {{ formatPhoneNumber(vehicle.customer.phone) }} {{
                                                    formatPhoneNumber(vehicle.customer.phone2) }}
                                                    {{formatPhoneNumber(vehicle.customer.phone3) }}</a>
                                                <a class="list-group-item list-group-item-action py-0">
                                                    <i class="bi-house"></i>
                                                    {{vehicle.customer.street}},
                                                    {{vehicle.customer.city}},
                                                    {{vehicle.customer.state}} {{vehicle.customer.zip}}</a>
                                                <a class="list-group-item list-group-item-action py-0">
                                                    <i class="bi bi-newspaper"></i>
                                                    {{ vehicle.customer.notes}}</a>
                                                <a class="list-group-item list-group-item-action disabled py-1">
                                                    <i class="bi bi-clock"></i> Since {{
                                                    vehicle.customer.createdAt
                                                    |
                                                    date}}</a>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="input-group mb-12">
                            <label for="placeholder"> </label>
                        </div>
                        <div class="input-group mb-12 callout callout-primary px-1 p-0">
                            <label for="placeholder"> </label>

                            <div class="input-group-append">
                                <input type="text" class="form-control" [(ngModel)]="searchInputCounterInvoiceNumber"
                                    (keyup.enter)="onSearchInvoiceNumber($event, searchInputCounterInvoiceNumber)"
                                    placeholder="Search invoice number" title="11 Characters Required eg. GZ2-7HJ-EMG">
                            </div>
                            <div class="input-group-append">
                                <button type="button" class="btn-outline-secondary"
                                    title="Search Invoice Number. 11 Characters Required eg. GZ2-7HJ-EMG"
                                    (click)="onSearchInvoiceNumber(null,searchInputCounterInvoiceNumber)">
                                    <i class="bi-search"></i>
                                </button>
                            </div>
                            <div class="input-group-append"
                                *ngIf="user.allowAddCounterInvoice == true && vehicle.customer.id> 0">

                                <!-- Add Invoice -->
                                <button type="button" class="btn-outline-secondary"
                                    (click)="getCutomerCounterInvoice(vehicle.customer.id)"
                                    title="Get Customer Invoices (max 20 most recent)">
                                    <i class="bi-arrow-repeat"></i>
                                </button>

                            </div>
                            <div class="input-group-append">
                                <select [(ngModel)]="disclaimerId" #optionDisclaimerId
                                    (change)="setDisclaimerText(optionDisclaimerId.value)" placeholder="Disclaimer"
                                    title="please set a disclaimer">
                                    <option [value]="disclaimer.id" *ngFor="let disclaimer of disclaimers;let i=index;">
                                        {{disclaimer.name}}
                                    </option>
                                </select>
                            </div>
                            <div class="input-group-append"
                                *ngIf="user.allowAddCounterInvoice == true && vehicle.customer.id> 0">

                                <!-- Add Invoice -->
                                <button type="button" class="btn-outline-secondary" (click)="createCounterInvoice()"
                                    title="Add A New Invoice">
                                    <i class="bi-plus-lg"></i>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-12 px-1 p-0">
                            <div class="input-group">
                                <div class="input-group-append">


                                    <button type="button" class="btn-outline-secondary"
                                        (click)="getAllCounterInvoiceWithPage(0, pageSize)"
                                        title="Get All Invoices with Paging">
                                        <i class="bi-arrow-repeat"></i>
                                    </button>

                                </div>
                                <div class="input-group-append px-1">
                                    <select [(ngModel)]="pageSize" (change)="getAllCounterInvoiceWithPage(0, pageSize)">
                                        <option>10</option>
                                        <option>20</option>
                                        <option>30</option>
                                        <option>40</option>
                                        <option>50</option>
                                        <option>60</option>
                                        <option>70</option>
                                        <option>80</option>
                                        <option>90</option>
                                        <option>100</option>
                                        <option>200</option>
                                    </select>
                                </div>
                                <div class="input-group-append  px-1">
                                    <label>{{ messageCount}}</label>
                                </div>
                                <div class="input-group-append  px-1">
                                    <div>
                                        <a class="text-center" (click)="getAllCounterInvoiceWithPage(i, pageSize)"
                                            *ngFor="let page of pagesArray; let i=index"
                                            [style.background-color]="i == currantPageNumber? 'lightgrey' : (false ? 'white' : 'white')"
                                            style="TEXT-DECORATION: underline; padding: 5px;">{{page}}</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="errorMessageCounterInvoiceSearch" class="form-group col-12 nopadding">
                            <div class="form-group">
                                <label *ngIf="errorMessageCounterInvoiceSearch">Error</label>
                                <div *ngIf="errorMessageCounterInvoiceSearch" class="alert alert-danger" role="alert">
                                    {{ errorMessageCounterInvoiceSearch }}
                                </div>
                            </div>
                        </div>
                        <div class="input-group mb-12">
                            <label for="placeholder">Invoices [{{this.counterInvoices.length}}]</label>
                            <div class="table-responsive" *ngIf="counterInvoices.length> 0">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Type</th>
                                            <th>Name</th>
                                            <th>Amount</th>
                                            <th>Payment Method</th>
                                            <th>Items</th>
                                            <th>Description</th>
                                            <th>Date</th>
                                            <th>By</th>
                                            <th style="width:50px">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let counterInvoice of this.counterInvoices; let i=index; let even=even"
                                            [style.background-color]="i == cindexCounterInvoice? 'lightyellow' : (even ? 'white' : 'white')"
                                            (click)="getCounterInvoiceDetail(counterInvoice, i)">
                                            <td style="border: 1px solid lightgray;">{{i+1}}</td>
                                            <td style="border: 1px solid lightgray;">{{counterInvoice.type}}</td>
                                            <td style="border: 1px solid lightgray;">{{counterInvoice.name}}</td>
                                            <td style="border: 1px solid lightgray;">${{counterInvoice.amount}}</td>
                                            <td style="border: 1px solid lightgray;">
                                                <ng-container *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                    <ng-container
                                                        *ngIf="counterInvoice.paymentMethod ==paymentMethod.id">
                                                        {{paymentMethod.name}}
                                                    </ng-container>
                                                </ng-container>
                                            </td>
                                            <td style="border: 1px solid lightgray;">
                                                {{counterInvoice.itemCounts}}
                                            </td>
                                            <td style="border: 1px solid lightgray;">
                                                {{counterInvoice.notes}}</td>
                                            <td style="border: 1px solid lightgray;">{{counterInvoice.createdAt | date}}
                                            </td>
                                            <td style="border: 1px solid lightgray;">
                                                <ng-container *ngFor="let emplyee of users;let i=index;">
                                                    <ng-container *ngIf="emplyee.id ==counterInvoice.userId">
                                                        {{emplyee.firstName}} {{emplyee.lastName}}
                                                    </ng-container>
                                                </ng-container>
                                            </td>
                                            <td style="border: 1px solid lightgray;text-align: center;">
                                                <button class="btn-outline-secondary btn-xs" title="Remove this invoice"
                                                    [disabled]="user.allowAddCounterInvoice == false"
                                                    (click)="deleteCounterInvoice(null, counterInvoice)">
                                                    <i class="bi bi-trash" title="Delete this invoice"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                        <div class="card" *ngIf="counterInvoice.id> 0">
                            <div class="input-group mb-12 card-header shadow">
                                <div class="form-group col-1 nopadding">
                                    <label>Type</label>
                                    <div class="input-group">
                                        <input trimText for="receipt type" type="text" class="form-control"
                                            title="Document/Invoice Type" [(ngModel)]="counterInvoice.type"
                                            [disabled]="user.allowAddCounterInvoice == false"
                                            (keyup.enter)="onEnterCounterInvoice('invoice type',counterInvoice)">
                                    </div>
                                </div>
                                <div class="form-group col-3 nopadding">
                                    <label>Invoice Name</label>
                                    <div class="input-group">
                                        <input trimText for="receipt name" type="text" class="form-control"
                                            title="Name of Document/Receipt" [(ngModel)]="counterInvoice.name"
                                            [disabled]="user.allowAddCounterInvoice == false"
                                            (keyup.enter)="onEnterCounterInvoice('invoice name',counterInvoice)">
                                    </div>
                                </div>
                                <div class="form-group col-1 nopadding">
                                    <label>Amount($)</label>
                                    <div class="input-group mb-12">
                                        <input type="number" class="form-control" placeholder="Amount"
                                            title="Total Amount" [disabled]="user.allowAddCounterInvoice == false"
                                            (keyup.enter)="onEnterCounterInvoice('invoice amount',counterInvoice)"
                                            [(ngModel)]="counterInvoice.amount" pattern="[0-9]" />
                                    </div>
                                </div>
                                <div class="form-group col-2 nopadding">
                                    <label>Payment Method</label>
                                    <div class="input-group mb-12">
                                        <div class="input-group">
                                            <select class="form-control" [(ngModel)]="counterInvoice.paymentMethod"
                                                title="Payment Method" [disabled]="user.allowAddCounterInvoice == false"
                                                #paymentMethod
                                                (change)="onChangeCounterInvoicePaymentMethod($event, paymentMethod.value, counterInvoice)"
                                                placeholder="Model">
                                                <option [value]="paymentMethod.id"
                                                    *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                    {{paymentMethod.name}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-5 nopadding">
                                    <label>Description/Notes</label>
                                    <div class="input-group">
                                        <input trimText for="receipt note" type="text" class="form-control"
                                            title="Comments/Notes" [(ngModel)]="counterInvoice.notes"
                                            [disabled]="user.allowAddCounterInvoice == false"
                                            (keyup.enter)="onEnterCounterInvoice('invoice notes',counterInvoice)">
                                        <div class="input-group-append">
                                            <button class="btn-outline-secondary" title="Remove this invoice"
                                                [disabled]="user.allowAddCounterInvoice == false"
                                                (click)="deleteCounterInvoice(null, counterInvoice)">
                                                <i class="bi bi-trash" title="Delete this invoice"></i>
                                            </button>
                                            <button class="btn-outline-secondary" title="Save"
                                                [disabled]="user.allowAddCounterInvoice == false"
                                                (click)="onEnterCounterInvoice('update invoice', counterInvoice)"><i
                                                    class="bi-save" title="Save"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-12 nopadding">
                                    <label></label>
                                </div>
                            </div>

                            <div class="input-group mb-12 callout callout-primary px-1 p-0"
                                *ngIf="counterInvoice.id> 0">
                                <label for="placeholder"> </label>
                                <div class="input-group-append"
                                    *ngIf="user.allowAddCounterInvoice == true && vehicle.customer.id> 0 && counterInvoice.id> 0">

                                    <!-- Add Invoice -->
                                    <button type="button" class="btn-outline-secondary"
                                        (click)="createCounterInvoiceItem(counterInvoice.id)"
                                        title="Add an Invoice Item">
                                        <i class="bi-plus-lg" title="Add Invoice Item"></i>
                                    </button>
                                </div>
                                <div class="input-group-append">
                                    <button type="button" class="btn-outline-secondary" title="Print Invoice"
                                        (click)="printPage('print-content-receipt', 'Receipt')">
                                        <i class="bi bi-printer"></i>
                                    </button>
                                </div>
                                <div class="input-group-append">
                                    <input type="date" class="form-control"
                                        [disabled]="user.allowAddCounterInvoice == false" title="Change Date"
                                        (change)="onChangeCounterInvoiceDate($event)"
                                        [ngModel]="counterInvoice.createdAt |  date:'yyyy-MM-dd'">

                                </div>
                                <div class="input-group-append">
                                    <label class="form-check-label text-center">&nbsp;&nbsp;</label>
                                    <label class="form-check">

                                        <input trimText class="form-check-input" type="checkbox" style="width:20px;height:20px;"
                                            [(ngModel)]="counterInvoice.noTax" title="No Tax"
                                            (change)="onChangeNoTax($event)">

                                        <label class="form-check-label text-center">&nbsp; No Tax</label>
                                    </label>
                                </div>
                            </div>

                            <div class="input-group mb-12 card-body" cdkDropList
                                (cdkDropListDropped)="droppedCounterInvoiceItem($event)">
                                <div class="input-group mb-12"
                                    *ngFor="let counterInvoiceItem of this.counterInvoiceItems; let i=index"
                                    (click)="setCounterInvoice(counterInvoiceItem.id)">
                                    <div class="form-group col-3 nopadding">
                                        <!-- <label *ngIf="i==0" style="background-color: white;"># Item Name</label> -->
                                        <div class="input-group" *ngIf="i==0">

                                            <input trimText type="text" class="form-control"
                                                style="font-weight: bold;border:0;outline:0; padding-left:35px;"
                                                [disabled]="user.allowAddCounterInvoice == false"
                                                [(ngModel)]="counterInvoice.headingName">

                                        </div>
                                        <div class="input-group">
                                            <button class="btn btn-outline-secondary"
                                                [style.background-color]="counterInvoiceItem.id == currentReceiptId? '#0d6efd' : (true ? 'white' : 'white')"
                                                cdkDrag>{{i+1}}</button>

                                            <input trimText for="receipt name" type="text" class="form-control"
                                                [disabled]="user.allowAddCounterInvoice == false"
                                                [(ngModel)]="counterInvoiceItem.name"
                                                (keyup.enter)="onEnterCounterInvoiceItem('invoice item name',counterInvoiceItem)">

                                        </div>
                                    </div>
                                    <div class="form-group col-1 nopadding">
                                        <!-- <label *ngIf="i==0">Quantity</label> -->
                                        <div class="input-group" *ngIf="i==0">
                                            <input trimText type="text" class="form-control"
                                                style="font-weight: bold;border:0;outline:0; padding:0;"
                                                [disabled]="user.allowAddCounterInvoice == false"
                                                [(ngModel)]="counterInvoice.headingQuantity">

                                        </div>
                                        <div class="input-group mb-12">
                                            <input type="number" class="form-control" placeholder="Quantity" min="1"
                                                [disabled]="user.allowAddCounterInvoice == false"
                                                (keyup.enter)="onEnterCounterInvoiceItem('invoice item amount',counterInvoiceItem)"
                                                [(ngModel)]="counterInvoiceItem.quantity" pattern="[0-9]" />
                                        </div>
                                    </div>
                                    <div class="form-group col-1 nopadding">
                                        <!-- <label *ngIf="i==0">Amount</label> -->
                                        <div class="input-group" *ngIf="i==0">
                                            <input trimText type="text" class="form-control"
                                                style="font-weight: bold;border:0;outline:0; padding:0;"
                                                [disabled]="user.allowAddCounterInvoice == false"
                                                [(ngModel)]="headingAmount">

                                        </div>
                                        <div class="input-group mb-12">
                                            <input type="number" class="form-control" placeholder="Amount"
                                                [disabled]="user.allowAddCounterInvoice == false"
                                                (keyup.enter)="onEnterCounterInvoiceItem('invoice item amount',counterInvoiceItem)"
                                                [(ngModel)]="counterInvoiceItem.amount" pattern="[0-9]" />
                                        </div>
                                    </div>


                                    <div class="form-group col-5 nopadding">
                                        <!-- <label *ngIf="i==0" style="background-color: white;">Description</label> -->
                                        <div class="input-group" *ngIf="i==0">
                                            <input trimText type="text" class="form-control"
                                                style="font-weight: bold;border:0;outline:0; padding:0;"
                                                [disabled]="user.allowAddCounterInvoice == false"
                                                [(ngModel)]="counterInvoice.headingDescription">

                                        </div>
                                        <div class="input-group">

                                            <input trimText type="text" [(ngModel)]="counterInvoiceItem.notes"
                                                class="form-control"
                                                (keyup.enter)="onEnterCounterInvoiceItem('invoice item notes',counterInvoiceItem)"
                                                rows="1"
                                                oninput='this.style.height = "";this.style.height = this.scrollHeight + "px"'
                                                [disabled]="user.allowAddCounterInvoice == false">


                                        </div>
                                    </div>
                                    <div class="form-group col-2 nopadding">
                                        <!-- <label *ngIf="i==0" style="background-color: white;">Subtotal</label> -->
                                        <div class="input-group" *ngIf="i==0">
                                            <input trimText type="text" class="form-control"
                                                style="font-weight: bold;border:0;outline:0; padding:0;"
                                                [disabled]="user.allowAddCounterInvoice == false"
                                                [(ngModel)]="counterInvoice.headingSubtotal">

                                        </div>
                                        <div class="input-group">

                                            <div class="form-control">
                                                {{ counterInvoiceItem.quantity * counterInvoiceItem.amount }}
                                            </div>
                                            <div class="input-group-append">
                                                <button class="btn-outline-secondary" title="Remove this item"
                                                    [disabled]="user.allowAddCounterInvoice == false"
                                                    (click)="deleteCounterInvoiceItem(null, counterInvoiceItem)">
                                                    <i class="bi bi-trash" title="Delete this item"></i>
                                                </button>
                                                <button class="btn-outline-secondary" title="Save"
                                                    [disabled]="user.allowAddCounterInvoice == false"
                                                    (click)="onEnterCounterInvoiceItem('update invoice item', counterInvoiceItem)"><i
                                                        class="bi-save" title="Save this item"></i></button>
                                            </div>


                                        </div>
                                    </div>
                                    <div class="form-group col-3 nopadding">

                                    </div>

                                </div>
                            </div>
                            <div class="row mb-2" style="min-height:50px">
                                <div class="col-sm-6">

                                </div>

                            </div>
                            <div class="row card-body">
                                <div class="col-5"></div>
                                <div class="col-7" *ngIf="getSubtotal() > 0">
                                    <ng-container *ngFor="let paymentMethod of this.paymentMethods">
                                        <p class="lead" *ngIf="paymentMethod.id==counterInvoice.paymentMethod">
                                            Pay By {{paymentMethod.name}}
                                        </p>
                                    </ng-container>
                                    <div class="table-responsive">
                                        <table class="table">
                                            <tbody>
                                                <tr>
                                                    <td style="width:50%;">
                                                        <strong>Subtotal:</strong>
                                                    </td>
                                                    <td>${{getSubtotal()}}</td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <strong>Tax ({{company.taxRate
                                                            *100}}%)</strong>
                                                    </td>
                                                    <td>${{getTax() }}</td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <strong>Total:</strong>
                                                    </td>
                                                    <td>${{getTotal()}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <p class="lead"> </p>

                                </div>
                            </div>
                            <div class="row mb-2" style="min-height:100px">
                                <div class="col-sm-6">

                                </div>

                            </div>
                            <div class="input-group mb-12" id="print-content-receipt" *ngIf="this.counterInvoice.id> 0">
                                <div id="componentID" class="container-fluid">
                                    <div class="container-fluid">

                                        <div id="componentID2" class="container-fluid">

                                            <div class="row">
                                                <div class="col-12" style="flex: 0 0 auto; width: 100%;">
                                                    <h4>
                                                        <!-- <i class="bi bi-truck"></i> -->
                                                        <img [src]="company.iconString"
                                                            style="width: 100px;border: 0px solid #555;">
                                                        {{this.company.name}}, Inc.
                                                        <small style="float: right;">Date:
                                                            {{counterInvoice.createdAt|
                                                            date}}</small>
                                                    </h4>
                                                </div>
                                                <!-- /.col -->
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-4" style="flex: 0 0 auto; width: 33.33333333%;">
                                                    From
                                                    <address>
                                                        <strong>{{this.company.name}}</strong><br>
                                                        {{this.company.street}}<br>
                                                        {{this.company.city}} {{this.company.state}},
                                                        {{this.company.zip}}<br>
                                                        Phone: {{formatPhoneNumber(this.company.phone)}}<br>
                                                        <!-- Email: {{this.company.email}} -->
                                                    </address>
                                                </div>
                                                <!-- /.col -->
                                                <div class="col-sm-4">
                                                    To
                                                    <address>
                                                        <strong>
                                                            {{this.vehicle.customer.firstName}}
                                                            {{this.vehicle.customer.lastName}}</strong><br>
                                                        {{this.vehicle.customer.street}}<br>
                                                        {{this.vehicle.customer.city}}
                                                        {{this.vehicle.customer.state}},
                                                        {{this.vehicle.customer.zip}}<br>
                                                        Phone: {{formatPhoneNumber(this.vehicle.customer.phone)}}<br>
                                                        <!-- Email: {{this.vehicle.customer.email}} -->
                                                    </address>
                                                </div>
                                                <!-- /.col -->
                                                <div class="col-sm-4">
                                                    <b>{{this.counterInvoice.type}}
                                                        #: {{this.counterInvoice.invoiceNumber}}</b><br>
                                                    <b>For: </b> {{this.counterInvoice.name}}<br>
                                                    <b></b> {{this.counterInvoice.notes}}<br>

                                                </div>
                                                <!-- /.col -->
                                            </div>
                                            <div class="row">
                                                <div class="col-12">
                                                    <div [innerHtml]="company.slogan"></div>
                                                </div>
                                            </div>
                                            <div class="row" *ngIf="counterInvoiceItems.length >0">
                                                <div class="col-12 table-responsive">
                                                    <table class="table table-striped">
                                                        <thead>
                                                            <tr class="bg-primary">
                                                                <th style="background-color: rgb(13, 173, 226);">
                                                                    {{counterInvoice.headingQuantity}}</th>
                                                                <th style="background-color: rgb(13, 173, 226);">
                                                                    #</th>
                                                                <th style="background-color: rgb(13, 173, 226);">
                                                                    {{counterInvoice.headingName}}</th>
                                                                <th style="background-color: rgb(13, 173, 226);">
                                                                    {{counterInvoice.headingDescription}}</th>
                                                                <th style="background-color: rgb(13, 173, 226);">
                                                                    {{counterInvoice.headingSubtotal}}</th>
                                                                <!-- <th style="background-color: rgb(13, 173, 226);">
                                                                    Net</th> -->
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr
                                                                *ngFor="let counterInvoiceItem of counterInvoiceItems; let i=index">
                                                                <td style="border: 1px solid lightgray;">
                                                                    {{counterInvoiceItem.quantity}}</td>
                                                                <td style="border: 1px solid lightgray;">
                                                                    {{counterInvoiceItem.invoiceNumber}}</td>
                                                                <td style="border: 1px solid lightgray;">
                                                                    {{counterInvoiceItem.name}}</td>
                                                                <td style="border: 1px solid lightgray;">
                                                                    {{counterInvoiceItem.notes}}</td>
                                                                <td style="border: 1px solid lightgray;">
                                                                    ${{ counterInvoiceItem.quantity *
                                                                    counterInvoiceItem.amount }}</td>
                                                                <!-- <td style="border: 1px solid lightgray;">
                                                                    <ng-container *ngIf="i !=2">
                                                                        ${{ (counterInvoiceItem.quantity *
                                                                        counterInvoiceItem.amount * 0.75).toFixed(2) }}
                                                                    </ng-container>
                                                                    <ng-container *ngIf="i ==2">
                                                                        ${{ counterInvoiceItem.quantity *
                                                                        counterInvoiceItem.amount * 0.7 }}
                                                                    </ng-container>
                                                                </td> -->

                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-6"></div>
                                                <div class="col-6">
                                                    <p class="lead">Amount Due {{counterInvoice.createdAt | date}}</p>
                                                    <ng-container *ngFor="let paymentMethod of this.paymentMethods">
                                                        <p class="lead"
                                                            *ngIf="paymentMethod.id==counterInvoice.paymentMethod">
                                                            Paid By {{paymentMethod.name}}
                                                        </p>
                                                    </ng-container>
                                                    <div class="table-responsive">
                                                        <table class="table table-striped">
                                                            <tr>
                                                                <td style="width:50%;">
                                                                    <strong>Subtotal:</strong>
                                                                </td>
                                                                <td>${{getSubtotal()}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    <strong>Tax ({{company.taxRate
                                                                        *100}}%)</strong>
                                                                </td>
                                                                <td>${{getTax() }}</td>
                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    <strong>Total:</strong>
                                                                </td>
                                                                <td>${{getTotal()}}</td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-6">
                                                    <p><br></p>
                                                </div>
                                                <div class="col-6">
                                                    <p><br></p>
                                                </div>
                                                <div class="col-6">
                                                    <p><br></p>
                                                </div>
                                                <div class="col-6">
                                                    <p><br></p>
                                                </div>
                                            </div>
                                            <div class="row mb-12">
                                                <div class="col-sm-12" *ngIf="disclaimerText != ''">
                                                    <div [innerHtml]="disclaimerText"></div>
                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="col-6">
                                                    <p><br></p>
                                                </div>
                                                <div class="col-6">
                                                    <p><br></p>
                                                </div>
                                                <!-- <div class="col-6">
                                                    <p><br></p>
                                                </div>
                                                <div class="col-6">
                                                    <p><br></p>
                                                </div> -->
                                            </div>
                                            <div class="row">
                                                <div class="col-6"></div>

                                                <div class="col-2 text-right"><label>Signature:</label>
                                                </div>
                                                <div class="col-4">
                                                    _________________________________
                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="col-6">
                                                    <p></p>
                                                </div>
                                                <div class="col-6">
                                                    <p></p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-6"></div>

                                                <div class="col-2 text-right"><label>Date:</label>
                                                </div>
                                                <div class="col-4">
                                                    _________________________________
                                                </div>


                                            </div>
                                            <p class="col-lg-7 col-md-7 col-sm-7 col-xs-7"></p>
                                            <p class="col-lg-5 col-md-5 col-sm-5 col-xs-5"></p>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="row mb-12">
                                <div class="col-sm-12">

                                </div>

                            </div>

                        </div>
                    </div>
                    <div class="tab-pane fade show " id="nav-vehicle-part" role="tabpanel" #taggroup
                        aria-labelledby="nav-vehicle-part-tab" style="min-height: 500px;">


                        <div class="input-group mb-12">
                            <label for="placeholder"> </label>
                        </div>
                        <div class="input-group mb-12 callout callout-primary px-1 p-0">
                            <label for="placeholder"> </label>

                            <div class="input-group-append">
                                <input type="text" class="form-control" style="width:300px"
                                    [(ngModel)]="searchInputAutopart"
                                    (keyup.enter)="searchPartNumberOrTitle(searchInputAutopart)"
                                    placeholder="Search name, part # or decription"
                                    title="search name, part # or decription">
                            </div>
                            <div class="input-group-append">
                                <button type="button" class="btn-outline-secondary"
                                    title="Search Parts Name, Part # or description"
                                    (click)="searchPartNumberOrTitle(searchInputAutopart)">
                                    <i class="bi-search"></i>
                                </button>
                            </div>
                            <div class="input-group-append" *ngIf="user.allowAddUpdateAutopart == true">

                                <button type="button" class="btn-outline-secondary"
                                    (click)="getCompanyPurchaseOrder(this.user.companyId, 4)"
                                    title="Get All Purchase Orders">
                                    <i class="bi-arrow-repeat"></i>
                                </button>

                            </div>
                            <div class="input-group-append" *ngIf="user.allowAddUpdateAutopart == true">

                                <button type="button" class="btn-outline-secondary"
                                    (click)="getCompanyAutopart(this.user.companyId, 3)"
                                    title="Get All Received and Return Parts">
                                    <i class="bi-arrow-repeat"></i>
                                </button>

                            </div>
                            <div class="input-group-append" *ngIf="user.allowAddUpdateAutopart == true">

                                <!-- Add Invoice -->
                                <button type="button" class="btn-outline-secondary" (click)="createNewAutopart(true)"
                                    title="Add A New Purchase Order">
                                    <i class="bi-plus-lg"></i>
                                </button>
                            </div>
                            <div class="input-group-append" *ngIf="user.allowAddUpdateAutopart == true">

                                <!-- Add Invoice -->
                                <button type="button" class="btn-outline-secondary" (click)="createNewAutopart(false)"
                                    title="Add A New Part">
                                    <i class="bi-plus-lg"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card shadow">
                            <div class="card-header py-2">
                                <div class="card-title">
                                    <div>
                                        <h4>{{formTitle}}</h4>
                                    </div>
                                </div>
                            </div>
                            <div class="input-group mb-12 card-body">
                                <div class="form-group col-3 nopadding">
                                    <label>Parts Name</label>
                                    <div class="input-group">
                                        <input for="receipt name" type="text" class="form-control" required
                                            #title="ngModel" [(ngModel)]="autopart.title" minlength="5" maxlength="200"
                                            placeholder="Name" [ngClass]="{ 'is-invalid': title.errors }"
                                            (keyup.enter)="saveAutopart()"
                                            [disabled]="user.allowAddUpdateAutopart == false">
                                        <div class="invalid-feedback" *ngIf="title.errors">
                                            <div *ngIf="title.errors['required']">Name is required
                                            </div>
                                            <div *ngIf="title.errors['minlength']">
                                                Name must be at least 5 characters
                                            </div>
                                            <div *ngIf="title.errors['maxlength']">
                                                Name must be at most 200 characters
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-3 nopadding">
                                    <label>Parts Number</label>
                                    <div class="input-group">
                                        <input for="receipt name" type="text" class="form-control"
                                            [(ngModel)]="autopart.partNumber" placeholder="Parts Number"
                                            [disabled]="user.allowAddUpdateAutopart == false"
                                            (keyup.enter)="saveAutopart()">
                                    </div>
                                </div>
                                <div class="form-group col-6 nopadding">
                                    <label>Description</label>
                                    <div class="input-group">
                                        <input for="receipt name" type="text" class="form-control" required
                                            #description="ngModel" [(ngModel)]="autopart.description"
                                            placeholder="Description" [disabled]="user.allowAddUpdateAutopart == false"
                                            minlength="5" maxlength="200"
                                            [ngClass]="{ 'is-invalid': description.errors }"
                                            (keyup.enter)="saveAutopart()">
                                        <div class="invalid-feedback" *ngIf="description.errors">
                                            <div *ngIf="description.errors['required']">Description is required
                                            </div>
                                            <div *ngIf="description.errors['minlength']">
                                                Description must be at least 5 characters
                                            </div>
                                            <div *ngIf="description.errors['maxlength']">
                                                Description must be at most 200 characters
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-12 nopadding" *ngIf="forPurchaseOrder == true">
                                    <label>Source</label>
                                    <div class="input-group">
                                        <input for="receipt name" type="text" class="form-control"
                                            [(ngModel)]="autopart.source" placeholder="Source URL"
                                            [disabled]="user.allowAddUpdateAutopart == false"
                                            (keyup.enter)="saveAutopart()">
                                        <div class="input-group-append" *ngIf="autopart.source != ''">
                                            <button class="btn btn-outline-secondary" title="Open This link"
                                                type="button" (click)="openSourceLink(autopart.source)">
                                                <i class="bi-link-45deg"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-3 nopadding">
                                    <label>Price($)</label>
                                    <div class="input-group mb-12">
                                        <input type="number" class="form-control" placeholder="Price" required
                                            #price="ngModel" [ngClass]="{ 'is-invalid': price.errors }"
                                            [disabled]="user.allowAddUpdateAutopart == false"
                                            (keyup.enter)="saveAutopart()" [(ngModel)]="autopart.price" />
                                        <div class="invalid-feedback" *ngIf="price.errors">
                                            <div *ngIf="price.errors['required']">Price is required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-3 nopadding">
                                    <label>Sale Price($)</label>
                                    <div class="input-group mb-12">
                                        <input type="number" class="form-control" placeholder="Sale Price"
                                            #salePrice="ngModel" [ngClass]="{ 'is-invalid': salePrice.errors }"
                                            [disabled]="user.allowAddUpdateAutopart == false"
                                            (keyup.enter)="saveAutopart()" [(ngModel)]="autopart.salePrice" />
                                        <div class="invalid-feedback" *ngIf="salePrice.errors">
                                            <div *ngIf="salePrice.errors['required']">Sale Price is required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-3 nopadding">
                                    <label class="control-label" for="grade">Grade</label>
                                    <select class="form-control" name="grade" size="1" [(ngModel)]="autopart.grade"
                                        required #grade="ngModel" [ngClass]="{ 'is-invalid': grade.errors }">
                                        <option selected="selected">Select Grade</option>
                                        <option value="A">A</option>
                                        <option value="B">B</option>
                                        <option value="C">C</option>
                                        <option value="Used">Used</option>
                                        <option value="New">New</option>
                                        <option value="Insurance">Insurance</option>
                                    </select>
                                    <div class="invalid-feedback" *ngIf="grade.errors">
                                        <div *ngIf="grade.errors['required']">Grade is required
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-3 nopadding">
                                    <label>Vendor</label>
                                    <div class="input-group mb-12">
                                        <div class="input-group">
                                            <select class="form-control" [(ngModel)]="autopart.vendorId"
                                                [disabled]="user.allowAddUpdateAutopart == false" #vendor="ngModel"
                                                required [ngClass]="{ 'is-invalid': vendor.errors }"
                                                placeholder="Vendor">
                                                <option [value]="vendor.id" *ngFor="let vendor of vendors;let i=index;">
                                                    {{vendor.name}}</option>
                                            </select>
                                            <div class="invalid-feedback" *ngIf="vendor.errors">
                                                <div *ngIf="vendor.errors['required']">Vendor is required
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-3 nopadding">
                                    <label>Payment Method</label>
                                    <div class="input-group mb-12">
                                        <div class="input-group">
                                            <select class="form-control" [(ngModel)]="autopart.paymentMethodId"
                                                [disabled]="user.allowAddUpdateAutopart == false"
                                                #paymentMethod="ngModel" required
                                                [ngClass]="{ 'is-invalid': paymentMethod.errors }"
                                                placeholder="Payment Method">
                                                <option [value]="paymentMethod.id"
                                                    *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                    {{paymentMethod.name}}</option>
                                            </select>
                                            <div class="invalid-feedback" *ngIf="paymentMethod.errors">
                                                <div *ngIf="paymentMethod.errors['required']">Payment Method is required
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-9 nopadding">
                                    <label>Notes</label>
                                    <div class="input-group">
                                        <input for="receipt name" type="text" class="form-control"
                                            [(ngModel)]="autopart.comments" placeholder="Notes"
                                            (keyup.enter)="saveAutopart()"
                                            [disabled]="user.allowAddUpdateAutopart == false">
                                    </div>
                                </div>
                                <div class="form-group col-3 nopadding">
                                    <label>Year</label>
                                    <div class="input-group mb-12">
                                        <select class="form-control" #year="ngModel"
                                            [ngClass]="{ 'is-invalid': year.errors }" [(ngModel)]="autopart.year"
                                            placeholder="Year">
                                            <option [value]="option" *ngFor="let option of optionsYear;let i=index;">
                                                {{option}}</option>
                                        </select>
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary" title="Search With Year"
                                                type="button" (click)="searchPartWithYearMakeModel(4)">
                                                <i class="bi-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-3 nopadding">
                                    <label for="make">Make</label>
                                    <div class="input-group">
                                        <select class="form-control" #device #make="ngModel"
                                            (change)="onChange($event, device.value)" [(ngModel)]="autopart.make"
                                            placeholder="Make">
                                            <option [value]="option" *ngFor="let option of optionsMake;let i=index;">
                                                {{option}}</option>
                                        </select>
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary" title="Search with Year & Make"
                                                type="button" (click)="searchPartWithYearMakeModel(3)">
                                                <i class="bi-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-3 nopadding">
                                    <label for="model">Model</label>
                                    <div class="input-group">
                                        <select class="form-control" #model="ngModel" [(ngModel)]="autopart.model"
                                            placeholder="Model">
                                            <option [value]="option" *ngFor="let option of optionsModel;let i=index;">
                                                {{option}}</option>
                                        </select>
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary"
                                                title="Search With Year & Make & Model" type="button"
                                                (click)="searchPartWithYearMakeModel(2)">
                                                <i class="bi-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group col-12 nopadding"
                                    *ngIf="forPurchaseOrder == false && autopart.id > 0">
                                    <label>images</label>
                                    <div class="input-group">
                                        <div class="col-md-12 nopadding">

                                            <ng-container
                                                *ngIf="autopart.imageModels != null && autopart.imageModels.length > 0 ">
                                                <ng-container
                                                    *ngFor='let imageModel of autopart.imageModels;let i=index'>
                                                    <img class="preview"
                                                        *ngIf="autopart.showInSearchImageId != imageModel.id"
                                                        src="{{baseUrlResizeImage + '/' + imageModel.id}}"
                                                        (click)="setImage(i)" style="border: 3px solid #555;">
                                                    <img class="preview"
                                                        *ngIf="autopart.showInSearchImageId == imageModel.id"
                                                        title="Show In Search"
                                                        src="{{baseUrlResizeImage + '/' + imageModel.id}}"
                                                        (click)="setImage(i)" style="border: 3px solid lightcoral;">

                                                </ng-container>
                                            </ng-container>
                                            <ng-container *ngIf="autopart.imageModels.length > 0">
                                                &nbsp; &nbsp;
                                            </ng-container>

                                            <button class="btn btn-primary mr-1" (click)="fileInput.click()" style=""
                                                data-toggle="tooltip" data-placement="top" title="Add Images">
                                                <i class="bi-plus-circle"></i>
                                                <input #fileInput class="btn btn-primary" type='file'
                                                    (change)="onSelectFile($event)" multiple style="display:none;">
                                            </button>
                                            <div class="col-md-12">
                                                <h4>{{ message1}}</h4>
                                            </div>
                                        </div>
                                        <div><label> </label></div>

                                        <div class="col-md-12 nopadding">
                                            <div class="containerImage">
                                                <img *ngIf="autopart != null && selectedImage !=null && autopart.showInSearchImageId != selectedImage"
                                                    class="card-img-top" src="{{baseUrlImage + '/' + selectedImage}}"
                                                    (click)="exitPreview()" title="Click to exit preview" alt=""
                                                    style="border: 3px solid #555;">

                                                <img *ngIf="autopart != null && selectedImage !=null && autopart.showInSearchImageId == selectedImage"
                                                    class="card-img-top" src="{{baseUrlImage + '/' + selectedImage}}"
                                                    (click)="exitPreview()" title="Click to exit preview" alt=""
                                                    style="border: 3px solid lightcoral;">

                                                <label
                                                    *ngIf="selectedImage !=null && selectedImage == autopart.showInSearchImageId"
                                                    class="top-left" for="title">Will Show This During Search</label>
                                                <div class="bottom-right">
                                                    <button
                                                        *ngIf="selectedImage !=null && selectedImage != autopart.showInSearchImageId"
                                                        (click)="setImageForSearch(autopart.id, selectedImage)"
                                                        class="btn btn-primary  mr-1" for="title">Set for
                                                        Search</button>
                                                    <button *ngIf="selectedImage !=null"
                                                        (click)="deleteImage(autopart.id, selectedImage)"
                                                        data-toggle="tooltip" data-placement="top"
                                                        title="Remove this image" class="btn btn-primary  mr-1"
                                                        for="title">
                                                        <i class="bi-trash"></i>
                                                    </button>
                                                    <!-- <button class="btn btn-primary mr-1" (click)="fileInput.click()"
                                                        data-toggle="tooltip" data-placement="top"
                                                        title="Add More Images">
                                                        <i class="bi-plus-circle"></i>
                                                        <input #fileInput class="btn btn-primary" type='file'
                                                            (change)="onSelectFile($event)" multiple
                                                            style="display:none;">
                                                    </button> -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="card-footer py-2">
                                <div class="form-controll input-group-append float-right">
                                    <button class="btn-outline-primary" *ngIf="this.forPurchaseOrder == false"
                                        [disabled]="user.allowAddUpdateAutopart == false"
                                        (click)="previewAutopart()">Preview</button>

                                    <button class="btn-outline-primary" title="Save"
                                        [disabled]="user.allowAddUpdateAutopart == false"
                                        (click)="saveAutopart()">Save</button>
                                </div>
                            </div>


                        </div>

                        <div class="input-group mb-12">
                            <label for="placeholder"></label>
                        </div>
                        <div class="alert alert-success" *ngIf="messagePart !=''">
                            {{ messagePart}}
                        </div>
                        <div class="col-md-12 px-1 p-0">



                        </div>
                        <div *ngIf="errorMessageCounterInvoiceSearch" class="form-group col-12 nopadding">
                            <div class="form-group">
                                <label *ngIf="errorMessageCounterInvoiceSearch">Error</label>
                                <div *ngIf="errorMessageCounterInvoiceSearch" class="alert alert-danger" role="alert">
                                    {{ errorMessageCounterInvoiceSearch }}
                                </div>
                            </div>
                        </div>
                        <div class="input-group mb-12">
                            <label></label>
                        </div>
                        <div class="input-group mb-12">
                            <div class="input-group-append">
                                <nav>
                                    <div class="nav nav-tabs" id="nav-tab" role="tablist2">

                                        <a class="nav-link" id="nav-purchase-order-tab" data-bs-toggle="tab"
                                            title="Purchas Order" data-bs-target="#nav-purchase-order" type="button"
                                            role="tab" aria-controls="nav-purchase-order" aria-selected="true">Purchase
                                            Orders
                                            [{{filterPurchaseOrders(0).length}}]</a>

                                        <a class="nav-link" id="nav-purchase-order-submitted-tab" data-bs-toggle="tab"
                                            title="Submitted Purchse Orders"
                                            data-bs-target="#nav-purchase-order-submitted" type="button" role="tab"
                                            aria-controls="nav-purchase-order-submitted" aria-selected="true">Submitted
                                            PO
                                            [{{filterPurchaseOrders(1).length}}]</a>

                                        <a class="nav-link" id="nav-purchase-order-approved-tab" data-bs-toggle="tab"
                                            title="Approved Purchas Orders"
                                            data-bs-target="#nav-purchase-order-approved" type="button" role="tab"
                                            aria-controls="nav-purchase-order-approved" aria-selected="true">Approved
                                            PO
                                            [{{filterPurchaseOrders(2).length}}]</a>

                                        <a class="nav-link" id="nav-purchase-order-ordered-tab" data-bs-toggle="tab"
                                            title="Approved Purchas Orders" data-bs-target="#nav-purchase-order-ordered"
                                            type="button" role="tab" aria-controls="nav-purchase-order-ordered"
                                            aria-selected="true">Ordered
                                            PO
                                            [{{filterPurchaseOrders(3).length}}]</a>

                                        <a class="nav-link active" id="nav-autopart-received-tab" data-bs-toggle="tab"
                                            title="Part Received" data-bs-target="#nav-autopart-received" type="button"
                                            role="tab" aria-controls="nav-autopart-received"
                                            aria-selected="true">Received
                                            [{{filterAutoparts(0).length}}]</a>

                                        <a class="nav-link" id="nav-autopart-return-tab" data-bs-toggle="tab"
                                            title="Part return" data-bs-target="#nav-autopart-return" type="button"
                                            role="tab" aria-controls="nav-autopart-return" aria-selected="true">Return
                                            [{{filterAutoparts(1).length}}]</a>

                                        <a class="nav-link" id="nav-autopart-inventory-tab" data-bs-toggle="tab"
                                            title="Inventoried Parts" data-bs-target="#nav-autopart-inventory"
                                            type="button" role="tab" aria-controls="nav-autopart-inventory"
                                            aria-selected="true">Inventory
                                            [{{filterAutopartsInventory(2).length}}]</a>

                                        <a class="nav-link" id="nav-autopart-archived-tab" data-bs-toggle="tab"
                                            title="Archived Parts" data-bs-target="#nav-autopart-archived" type="button"
                                            role="tab" aria-controls="nav-autopart-archived"
                                            aria-selected="true">Archived
                                            [{{this.autopartsArchived.length}}]</a>

                                    </div>
                                </nav>
                            </div>
                            <div class="tab-content col-12" id="nav-tabContent-part">
                                <div class="tab-pane fade show" id="nav-purchase-order" role="tabpanel" #taggroup
                                    style="min-height: 500px;" aria-labelledby="nav-purchase-order-tab">
                                    <div class="row">
                                        <label for="placeholder">Purchase Orders
                                            [{{filterPurchaseOrders(0).length}}]</label>
                                        <div class="table-responsive" *ngIf="purchaseOrders.length> 0">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th (click)="sortListPurchaseOrder('title')">Name</th>
                                                        <th (click)="sortListPurchaseOrder('partNumber')">Part #</th>
                                                        <th (click)="sortListPurchaseOrder('description')">Description
                                                        </th>
                                                        <th (click)="sortListPurchaseOrder('price')">Price</th>
                                                        <th (click)="sortListPurchaseOrder('paymentMethodId')">Payment
                                                            Method
                                                        </th>
                                                        <th (click)="sortListPurchaseOrder('grade')">Grade</th>
                                                        <th>Year/Make/Model</th>
                                                        <th (click)="sortListPurchaseOrder('vendorId')">Vendor</th>
                                                        <th (click)="sortListPurchaseOrder('createdAt')">Date</th>
                                                        <th (click)="sortListPurchaseOrder('userId')">By</th>
                                                        <th style="width:80px">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let autopart of filterPurchaseOrders(0); let i=index; let even=even"
                                                        [style.background-color]="i == cindexAutopart? 'lightyellow' : (even ? 'white' : 'white')"
                                                        (click)="getAutopartDetail(autopart, i, true)">
                                                        <td style="border: 1px solid lightgray;">{{i+1}}</td>
                                                        <td style="border: 1px solid lightgray;">

                                                            <a href="{{autopart.source}}"
                                                                target="_blank">{{autopart.title}}</a>

                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.partNumber}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            {{autopart.description}}</td>
                                                        <td style="border: 1px solid lightgray;">${{autopart.price}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container
                                                                *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                                <ng-container
                                                                    *ngIf="autopart.paymentMethodId ==paymentMethod.id">
                                                                    {{paymentMethod.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            {{autopart.grade}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngIf="autopart.year > 0">
                                                                {{autopart.year}} {{autopart.make}} {{autopart.model}}
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let vendor of vendors;let i=index;">
                                                                <ng-container *ngIf="autopart.vendorId ==vendor.id">
                                                                    {{vendor.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.createdAt |
                                                            date}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let emplyee of users;let i=index;">
                                                                <ng-container *ngIf="emplyee.id ==autopart.userId">
                                                                    {{emplyee.firstName}} {{emplyee.lastName}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;text-align: center;">
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Remove this Purchse Order"
                                                                (click)="deletePurchseOrder(autopart)"
                                                                [disabled]="user.allowAddUpdatePurchaseOrder == false">
                                                                <i class="bi bi-trash"></i>
                                                            </button>
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Submit this purchase order for approval"
                                                                (click)="setPurchaseOrderStatus(autopart, 1)"
                                                                [disabled]="user.allowAddUpdatePurchaseOrder == false">
                                                                <i class="bi bi-arrow-bar-right"></i>
                                                            </button>
                                                            <!-- <button class="btn-outline-secondary btn-xs"
                                                                title="Un-Submit this Purchase Order"
                                                                (click)="setPurchaseOrderStatus(autopart, 0)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-arrow-bar-left"></i>
                                                            </button>
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Approve this purchase Order"
                                                                (click)="setPurchaseOrderStatus(autopart,2)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-check"></i>
                                                            </button> -->
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade show" id="nav-purchase-order-submitted" role="tabpanel"
                                    #taggroup style="min-height: 500px;"
                                    aria-labelledby="nav-purchase-order-submitted-tab">
                                    <div class="row">
                                        <label for="placeholder">Submitted Purchase Orders
                                            [{{filterPurchaseOrders(1).length}}]</label>
                                        <div class="table-responsive" *ngIf="purchaseOrders.length> 0">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th (click)="sortListPurchaseOrder('title')">Name</th>
                                                        <th (click)="sortListPurchaseOrder('partNumber')">Part #</th>
                                                        <th (click)="sortListPurchaseOrder('description')">Description
                                                        </th>
                                                        <th (click)="sortListPurchaseOrder('price')">Price</th>
                                                        <th (click)="sortListPurchaseOrder('paymentMethodId')">Payment
                                                            Method
                                                        </th>
                                                        <th (click)="sortListPurchaseOrder('grade')">Grade</th>
                                                        <th>Year/Make/Model</th>
                                                        <th (click)="sortListPurchaseOrder('vendorId')">Vendor</th>
                                                        <th>Rejection Reason</th>
                                                        <th (click)="sortListPurchaseOrder('createdAt')">Date</th>
                                                        <th (click)="sortListPurchaseOrder('userId')">Submitted By</th>
                                                        <th style="width:80px">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let autopart of filterPurchaseOrders(1); let i=index; let even=even"
                                                        [style.background-color]="i == cindexAutopart? 'lightyellow' : (even ? 'white' : 'white')"
                                                        (click)="getAutopartDetail(autopart, i, true)">
                                                        <td style="border: 1px solid lightgray;">{{i+1}}</td>
                                                        <td style="border: 1px solid lightgray;">

                                                            <a href="{{autopart.source}}"
                                                                target="_blank">{{autopart.title}}</a>

                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.partNumber}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            {{autopart.description}}</td>
                                                        <td style="border: 1px solid lightgray;">${{autopart.price}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container
                                                                *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                                <ng-container
                                                                    *ngIf="autopart.paymentMethodId ==paymentMethod.id">
                                                                    {{paymentMethod.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            {{autopart.grade}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngIf="autopart.year > 0">
                                                                {{autopart.year}} {{autopart.make}} {{autopart.model}}
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let vendor of vendors;let i=index;">
                                                                <ng-container *ngIf="autopart.vendorId ==vendor.id">
                                                                    {{vendor.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <b style="color:red">{{autopart.reason}}</b>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.createdAt |
                                                            date}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let emplyee of users;let i=index;">
                                                                <ng-container *ngIf="emplyee.id ==autopart.userId">
                                                                    {{emplyee.firstName}} {{emplyee.lastName}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;text-align: center;">
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Remove this Purchse Order"
                                                                (click)="deletePurchseOrder(autopart)"
                                                                [disabled]="user.allowAddUpdatePurchaseOrder == false">
                                                                <i class="bi bi-trash"></i>
                                                            </button>
                                                            <!-- <button class="btn-outline-secondary btn-xs"
                                                                title="Submit this purchase order for approval"
                                                                (click)="setPurchaseOrderStatus(autopart, 1)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-arrow-bar-right"></i>
                                                            </button> -->
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Reject this Purchase Order"
                                                                (click)="setPurchaseOrderStatus(autopart, 0)"
                                                                [disabled]="user.allowApproveRejectPurchaseOrder == false">
                                                                <i class="bi bi-x-lg"></i>
                                                            </button>
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Approve this purchase Order"
                                                                (click)="setPurchaseOrderStatus(autopart,2)"
                                                                [disabled]="user.allowApproveRejectPurchaseOrder == false">
                                                                <i class="bi bi-check"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade show" id="nav-purchase-order-approved" role="tabpanel"
                                    #taggroup style="min-height: 500px;"
                                    aria-labelledby="nav-purchase-order-approved-tab">
                                    <div class="row">
                                        <label for="placeholder">Approved Purchase Orders
                                            [{{filterPurchaseOrders(2).length}}]</label>
                                        <div class="table-responsive" *ngIf="purchaseOrders.length> 0">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th (click)="sortListPurchaseOrder('title')">Name</th>
                                                        <th (click)="sortListPurchaseOrder('partNumber')">Part #</th>
                                                        <th (click)="sortListPurchaseOrder('description')">Description
                                                        </th>
                                                        <th (click)="sortListPurchaseOrder('price')">Price</th>
                                                        <th (click)="sortListPurchaseOrder('paymentMethodId')">Payment
                                                            Method
                                                        </th>
                                                        <th (click)="sortListPurchaseOrder('grade')">Grade</th>
                                                        <th>Year/Make/Model</th>
                                                        <th (click)="sortListPurchaseOrder('vendorId')">Vendor</th>
                                                        <th (click)="sortListPurchaseOrder('createdAt')">Created Date
                                                        </th>
                                                        <th (click)="sortListPurchaseOrder('userId')">Created By</th>
                                                        <th (click)="sortListPurchaseOrder('createdAt')">Approved Date
                                                        </th>
                                                        <th (click)="sortListPurchaseOrder('userId')">Approved By</th>
                                                        <th style="width:80px">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let autopart of filterPurchaseOrders(2); let i=index; let even=even"
                                                        [style.background-color]="i == cindexAutopart? 'lightyellow' : (even ? 'white' : 'white')"
                                                        (click)="getAutopartDetail(autopart, i, true)">
                                                        <td style="border: 1px solid lightgray;">{{i+1}}</td>
                                                        <td style="border: 1px solid lightgray;">

                                                            <a href="{{autopart.source}}"
                                                                target="_blank">{{autopart.title}}</a>

                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.partNumber}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            {{autopart.description}}</td>
                                                        <td style="border: 1px solid lightgray;">${{autopart.price}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container
                                                                *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                                <ng-container
                                                                    *ngIf="autopart.paymentMethodId ==paymentMethod.id">
                                                                    {{paymentMethod.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            {{autopart.grade}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngIf="autopart.year > 0">
                                                                {{autopart.year}} {{autopart.make}} {{autopart.model}}
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let vendor of vendors;let i=index;">
                                                                <ng-container *ngIf="autopart.vendorId ==vendor.id">
                                                                    {{vendor.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.createdAt |
                                                            date}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let emplyee of users;let i=index;">
                                                                <ng-container *ngIf="emplyee.id ==autopart.userId">
                                                                    {{emplyee.firstName}} {{emplyee.lastName}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.approvedAt
                                                            |
                                                            date}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let emplyee of users;let i=index;">
                                                                <ng-container *ngIf="emplyee.id ==autopart.approvedBy">
                                                                    {{emplyee.firstName}} {{emplyee.lastName}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;text-align: center;">
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Remove this Purchse Order"
                                                                (click)="deletePurchseOrder(autopart)"
                                                                [disabled]="user.allowAddUpdatePurchaseOrder == false">
                                                                <i class="bi bi-trash"></i>
                                                            </button>
                                                            <!-- <button class="btn-outline-secondary btn-xs"
                                                                title="Submit this purchase order for approval"
                                                                (click)="setPurchaseOrderStatus(autopart, 1)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-arrow-bar-right"></i>
                                                            </button> -->
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Un-approve this Purchase Order"
                                                                (click)="setPurchaseOrderStatus(autopart, 1)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-x-lg"></i>
                                                            </button>
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Order this purchase Order"
                                                                (click)="setPurchaseOrderStatus(autopart,3)"
                                                                [disabled]="user.allowAddUpdatePurchaseOrder == false">
                                                                <i class="bi bi-check"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade show" id="nav-purchase-order-ordered" role="tabpanel"
                                    #taggroup style="min-height: 500px;"
                                    aria-labelledby="nav-purchase-order-ordered-tab">
                                    <div class="row">
                                        <label for="placeholder">Ordered Purchase Orders
                                            [{{filterPurchaseOrders(3).length}}]</label>
                                        <div class="table-responsive" *ngIf="purchaseOrders.length> 0">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th (click)="sortListPurchaseOrder('title')">Name</th>
                                                        <th (click)="sortListPurchaseOrder('partNumber')">Part #</th>
                                                        <th (click)="sortListPurchaseOrder('description')">Description
                                                        </th>
                                                        <th (click)="sortListPurchaseOrder('price')">Price</th>
                                                        <th (click)="sortListPurchaseOrder('paymentMethodId')">Payment
                                                            Method
                                                        </th>
                                                        <th (click)="sortListPurchaseOrder('grade')">Grade</th>
                                                        <th>Year/Make/Model</th>
                                                        <th (click)="sortListPurchaseOrder('vendorId')">Vendor</th>
                                                        <th (click)="sortListPurchaseOrder('createdAt')">Created Date
                                                        </th>
                                                        <th (click)="sortListPurchaseOrder('userId')">Created By</th>
                                                        <th (click)="sortListPurchaseOrder('createdAt')">Approved Date
                                                        </th>
                                                        <th (click)="sortListPurchaseOrder('userId')">Approved By</th>
                                                        <th style="width:80px">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let autopart of filterPurchaseOrders(3); let i=index; let even=even"
                                                        [style.background-color]="i == cindexAutopart? 'lightyellow' : (even ? 'white' : 'white')"
                                                        (click)="getAutopartDetail(autopart, i, true)">
                                                        <td style="border: 1px solid lightgray;">{{i+1}}</td>
                                                        <td style="border: 1px solid lightgray;">

                                                            <a href="{{autopart.source}}"
                                                                target="_blank">{{autopart.title}}</a>

                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.partNumber}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            {{autopart.description}}</td>
                                                        <td style="border: 1px solid lightgray;">${{autopart.price}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container
                                                                *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                                <ng-container
                                                                    *ngIf="autopart.paymentMethodId ==paymentMethod.id">
                                                                    {{paymentMethod.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            {{autopart.grade}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngIf="autopart.year > 0">
                                                                {{autopart.year}} {{autopart.make}} {{autopart.model}}
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let vendor of vendors;let i=index;">
                                                                <ng-container *ngIf="autopart.vendorId ==vendor.id">
                                                                    {{vendor.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.createdAt |
                                                            date}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let emplyee of users;let i=index;">
                                                                <ng-container *ngIf="emplyee.id ==autopart.userId">
                                                                    {{emplyee.firstName}} {{emplyee.lastName}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.approvedAt
                                                            |
                                                            date}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let emplyee of users;let i=index;">
                                                                <ng-container *ngIf="emplyee.id ==autopart.approvedBy">
                                                                    {{emplyee.firstName}} {{emplyee.lastName}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;text-align: center;">
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Remove this Purchse Order"
                                                                (click)="deletePurchseOrder(autopart)"
                                                                [disabled]="user.allowAddUpdatePurchaseOrder == false">
                                                                <i class="bi bi-trash"></i>
                                                            </button>
                                                            <!-- <button class="btn-outline-secondary btn-xs"
                                                            title="Submit this purchase order for approval"
                                                            (click)="setPurchaseOrderStatus(autopart, 1)"
                                                            [disabled]="user.allowAddUpdateAutopart == false">
                                                            <i class="bi bi-arrow-bar-right"></i>
                                                        </button> -->
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Un-Order this Purchase Order"
                                                                (click)="setPurchaseOrderStatus(autopart, 2)"
                                                                [disabled]="user.allowAddUpdatePurchaseOrder == false">
                                                                <i class="bi bi-arrow-bar-left"></i>
                                                            </button>
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Purchase Order received"
                                                                (click)="archivePurchaseOrder(autopart, true, 'arvhived')"
                                                                [disabled]="user.allowAddUpdatePurchaseOrder == false">
                                                                <i class="bi bi-check"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade show active" id="nav-autopart-received" role="tabpanel"
                                    #taggroup style="min-height: 500px;" aria-labelledby="nav-autopart-inventory-tab">
                                    <div class="row">
                                        <label for="placeholder">Received Parts
                                            [{{filterAutoparts(0).length}}]</label>
                                        <div class="table-responsive" *ngIf="autoparts.length> 0">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th (click)="sortListAutopart('title')">Name</th>
                                                        <th (click)="sortListAutopart('partNumber')">Part #</th>
                                                        <th (click)="sortListAutopart('description')">Description</th>
                                                        <th (click)="sortListAutopart('price')">Price</th>
                                                        <th (click)="sortListAutopart('paymentMethodId')">Payment Method
                                                        </th>
                                                        <th (click)="sortListAutopart('grade')">Grade</th>
                                                        <th>Year/Make/Model</th>
                                                        <th (click)="sortListAutopart('vendorId')">Vendor</th>
                                                        <th (click)="sortListAutopart('createdAt')">Date</th>
                                                        <th (click)="sortListAutopart('userId')">By</th>
                                                        <th style="width:80px">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let autopart of filterAutoparts(0); let i=index; let even=even"
                                                        [style.background-color]="i == cindexAutopart? 'lightyellow' : (even ? 'white' : 'white')"
                                                        (click)="getAutopartDetail(autopart, i, false)">
                                                        <td style="border: 1px solid lightgray;">{{i+1}}</td>
                                                        <td style="border: 1px solid lightgray;">

                                                            <ng-container
                                                                *ngIf="autopart.source != null && autopart.source !='' ">
                                                                <a href="{{autopart.source}}"
                                                                    target="_blank">{{autopart.title}}</a>
                                                            </ng-container>
                                                            <ng-container
                                                                *ngIf="autopart.source == null || autopart.source =='' ">
                                                                {{autopart.title}}
                                                            </ng-container>

                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.partNumber}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngIf="autopart.imageModels != null && autopart.imageModels.length > 0 && 
                                                                autopart.showInSearchImageId > 0">
                                                                <img height="100" width="100"
                                                                    src="{{baseUrlResizeImage + '/' + autopart?.showInSearchImageId}}">

                                                            </ng-container>
                                                            {{autopart.description}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">${{autopart.price}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container
                                                                *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                                <ng-container
                                                                    *ngIf="autopart.paymentMethodId ==paymentMethod.id">
                                                                    {{paymentMethod.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            {{autopart.grade}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngIf="autopart.year > 0">
                                                                {{autopart.year}} {{autopart.make}} {{autopart.model}}
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let vendor of vendors;let i=index;">
                                                                <ng-container *ngIf="autopart.vendorId ==vendor.id">
                                                                    {{vendor.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.createdAt |
                                                            date}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let emplyee of users;let i=index;">
                                                                <ng-container *ngIf="emplyee.id ==autopart.userId">
                                                                    {{emplyee.firstName}} {{emplyee.lastName}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;text-align: center;">
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Remove this Part"
                                                                (click)="deleteAutopart(autopart)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-trash"></i>
                                                            </button>
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="User this Part"
                                                                (click)="archiveAutopart(autopart, true, 'archive')"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-check"></i>
                                                            </button>
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Return this Part"
                                                                (click)="setAutopartStatus(autopart, 1)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-arrow-bar-right"></i>
                                                            </button>
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Inventory this Part"
                                                                (click)="setAutopartStatus(autopart,2)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-arrow-bar-right"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade show" id="nav-autopart-return" role="tabpanel" #taggroup
                                    style="min-height: 500px;" aria-labelledby="nav-autopart-return-tab">
                                    <div class="row">
                                        <label for="placeholder">Shall be Returned Parts
                                            [{{filterAutoparts(1).length}}]</label>
                                        <div class="table-responsive" *ngIf="autoparts.length> 0">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th (click)="sortListAutopart('title')">Name</th>
                                                        <th (click)="sortListAutopart('partNumber')">Part #</th>
                                                        <th (click)="sortListAutopart('description')">Description</th>
                                                        <th (click)="sortListAutopart('price')">Price</th>
                                                        <th (click)="sortListAutopart('paymentMethodId')">Payment Method
                                                        </th>
                                                        <th (click)="sortListAutopart('grade')">Grade</th>
                                                        <th>Year/Make/Model</th>
                                                        <th (click)="sortListAutopart('vendorId')">Vendor</th>
                                                        <th (click)="sortListAutopart('createdAt')">Date</th>
                                                        <th (click)="sortListAutopart('userId')">By</th>
                                                        <th style="width:80px">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let autopart of filterAutoparts(1); let i=index; let even=even"
                                                        [style.background-color]="i == cindexAutopart? 'lightyellow' : (even ? 'white' : 'white')"
                                                        (click)="getAutopartDetail(autopart, i, false)">
                                                        <td style="border: 1px solid lightgray;">{{i+1}}</td>
                                                        <td style="border: 1px solid lightgray;">

                                                            <ng-container
                                                                *ngIf="autopart.source != null && autopart.source !='' ">
                                                                <a href="{{autopart.source}}"
                                                                    target="_blank">{{autopart.title}}</a>
                                                            </ng-container>
                                                            <ng-container
                                                                *ngIf="autopart.source == null || autopart.source =='' ">
                                                                {{autopart.title}}
                                                            </ng-container>

                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.partNumber}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngIf="autopart.imageModels != null && autopart.imageModels.length > 0 && 
                                                                autopart.showInSearchImageId > 0">
                                                                <img height="100" width="100"
                                                                    src="{{baseUrlResizeImage + '/' + autopart?.showInSearchImageId}}">

                                                            </ng-container>
                                                            {{autopart.description}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">${{autopart.price}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container
                                                                *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                                <ng-container
                                                                    *ngIf="autopart.paymentMethodId ==paymentMethod.id">
                                                                    {{paymentMethod.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            {{autopart.grade}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngIf="autopart.year > 0">
                                                                {{autopart.year}} {{autopart.make}} {{autopart.model}}
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let vendor of vendors;let i=index;">
                                                                <ng-container *ngIf="autopart.vendorId ==vendor.id">
                                                                    {{vendor.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.createdAt |
                                                            date}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let emplyee of users;let i=index;">
                                                                <ng-container *ngIf="emplyee.id ==autopart.userId">
                                                                    {{emplyee.firstName}} {{emplyee.lastName}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;text-align: center;">
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Remove this Part"
                                                                (click)="deleteAutopart(autopart)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-trash"></i>
                                                            </button>
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Returned"
                                                                (click)="archiveAutopart(autopart, true, 'Returned')"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-check"></i>
                                                            </button>
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Un-Return this Part"
                                                                (click)="setAutopartStatus(autopart, 0)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-arrow-bar-left"></i>
                                                            </button>
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Inventory this Part"
                                                                (click)="setAutopartStatus(autopart,2)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-arrow-bar-right"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade show" id="nav-autopart-inventory" role="tabpanel" #taggroup
                                    style="min-height: 500px;" aria-labelledby="nav-autopart-inventory-tab">
                                    <div class="input-group mb-12 callout callout-primary px-1 p-0">
                                        <label for="placeholder"> </label>

                                        <div class="input-group-append">
                                            <input type="text" class="form-control" style="width:300px"
                                                [(ngModel)]="searchInputAutopartInventory"
                                                (keyup.enter)="searchPartNumberOrTitleInventory(searchInputAutopartInventory, 2, false)"
                                                placeholder="Search name, part # or description"
                                                title="Search inventoried part name, part # or descriptoin">
                                        </div>
                                        <div class="input-group-append">
                                            <button type="button" class="btn-outline-secondary"
                                                title="Search Inventoried Parts Name, Part # or decription"
                                                (click)="searchPartNumberOrTitleInventory(searchInputAutopartInventory,2, false)">
                                                <i class="bi-search"></i>
                                            </button>
                                        </div>

                                    </div>

                                    <div class="col-md-12 px-1 p-0">
                                        <div class="input-group">
                                            <div class="input-group-append">
                                                <button type="button" class="btn-outline-secondary"
                                                    (click)="getAllAutopartsWithPage(0, pageSize,2, false)"
                                                    title="Get All Inventoried Parts with Paging">
                                                    <i class="bi-arrow-repeat"></i>
                                                </button>
                                            </div>
                                            <div class="input-group-append px-1">
                                                <select [(ngModel)]="pageSizeInventory"
                                                    (change)="getAllAutopartsWithPage(0, pageSize,2, false)">
                                                    <option>10</option>
                                                    <option>20</option>
                                                    <option>30</option>
                                                    <option>40</option>
                                                    <option>50</option>
                                                    <option>60</option>
                                                    <option>70</option>
                                                    <option>80</option>
                                                    <option>90</option>
                                                    <option>100</option>
                                                    <option>200</option>
                                                </select>
                                            </div>
                                            <div class="input-group-append  px-1">
                                                <label>{{ messageCountInventory}}</label>
                                            </div>
                                            <div class="input-group-append  px-1">
                                                <div>
                                                    <a class="text-center"
                                                        (click)="getAllAutopartsWithPage(i, pageSize, 2, false)"
                                                        *ngFor="let page of pagesArrayInventory; let i=index"
                                                        [style.background-color]="i == currantPageNumberInventory? 'lightgrey' : (false ? 'white' : 'white')"
                                                        style="TEXT-DECORATION: underline; padding: 5px;">{{page}}</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label for="placeholder">Inventoried Parts
                                            [{{filterAutopartsInventory(2).length}}]</label>
                                        <div class="table-responsive" *ngIf="autopartsInventory.length> 0">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th>Name</th>
                                                        <th>Part #</th>
                                                        <th>Description</th>
                                                        <th>Price</th>
                                                        <th>Payment Method</th>
                                                        <th>Grade</th>
                                                        <th>Year/Make/Model</th>
                                                        <th>Vendor</th>
                                                        <th>Date</th>
                                                        <th>By</th>
                                                        <th>Posting Date</th>
                                                        <th style="width:80px">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let autopart of filterAutopartsInventory(2); let i=index; let even=even"
                                                        [style.background-color]="i == cindexAutopart? 'lightyellow' : (even ? 'white' : 'white')"
                                                        (click)="getAutopartDetail(autopart, i, false)">
                                                        <td style="border: 1px solid lightgray;">{{i+1}}</td>
                                                        <td style="border: 1px solid lightgray;">

                                                            <ng-container
                                                                *ngIf="autopart.source != null && autopart.source !='' ">
                                                                <a href="{{autopart.source}}"
                                                                    target="_blank">{{autopart.title}}</a>
                                                            </ng-container>
                                                            <ng-container
                                                                *ngIf="autopart.source == null || autopart.source =='' ">
                                                                {{autopart.title}}
                                                            </ng-container>

                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.partNumber}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngIf="autopart.imageModels != null && autopart.imageModels.length > 0 && 
                                                                autopart.showInSearchImageId > 0">
                                                                <img height="100" width="100"
                                                                    src="{{baseUrlResizeImage + '/' + autopart?.showInSearchImageId}}">

                                                            </ng-container>
                                                            {{autopart.description}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">${{autopart.price}}
                                                            <ng-container *ngIf="autopart.salePrice > 0">
                                                                <br><b style="color:red"
                                                                    title="Sale Price">${{autopart.salePrice}}</b>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container
                                                                *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                                <ng-container
                                                                    *ngIf="autopart.paymentMethodId ==paymentMethod.id">
                                                                    {{paymentMethod.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            {{autopart.grade}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngIf="autopart.year > 0">
                                                                {{autopart.year}} {{autopart.make}} {{autopart.model}}
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let vendor of vendors;let i=index;">
                                                                <ng-container *ngIf="autopart.vendorId ==vendor.id">
                                                                    {{vendor.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.createdAt |
                                                            date}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let emplyee of users;let i=index;">
                                                                <ng-container *ngIf="emplyee.id ==autopart.userId">
                                                                    {{emplyee.firstName}} {{emplyee.lastName}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngIf="autopart.published == true">
                                                                <b style="color:red">{{autopart.postingAt | date}}</b>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;text-align: center;">
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Remove this Part"
                                                                (click)="deleteAutopart(autopart)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-trash"></i>
                                                            </button>
                                                            <button class="btn-primary btn-xs"
                                                                title="Pull this Part off the market"
                                                                *ngIf="autopart.published == true"
                                                                (click)="setAutopartStatus(autopart, 2)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-arrow-bar-left"></i>
                                                            </button>
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Un-Invetory this Part"
                                                                *ngIf="autopart.published == false"
                                                                (click)="setAutopartStatus(autopart, 0)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-arrow-bar-left"></i>
                                                            </button>
                                                            <button class="btn-outline-secondary btn-xs"
                                                                *ngIf="autopart.published == false"
                                                                title="Post/Publish this to market"
                                                                (click)="publishAutopart(autopart)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-arrow-bar-right"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade show" id="nav-autopart-archived" role="tabpanel" #taggroup
                                    style="min-height: 500px;" aria-labelledby="nav-autopart-archived-tab">
                                    <div class="input-group mb-12 callout callout-primary px-1 p-0">
                                        <label for="placeholder"> </label>

                                        <div class="input-group-append">
                                            <input type="text" class="form-control" style="width:300px"
                                                [(ngModel)]="searchInputAutopartArchived"
                                                (keyup.enter)="searchPartNumberOrTitleInventory(searchInputAutopartArchived, 0, true)"
                                                placeholder="Search name, part # or description"
                                                title="Search Archived part name, part # or descriptoin">
                                        </div>
                                        <div class="input-group-append">
                                            <button type="button" class="btn-outline-secondary"
                                                title="Search Archived Parts Name, Part # or decription"
                                                (click)="searchPartNumberOrTitleInventory(searchInputAutopartArchived,0, true)">
                                                <i class="bi-search"></i>
                                            </button>
                                        </div>

                                    </div>

                                    <div class="col-md-12 px-1 p-0">
                                        <div class="input-group">
                                            <div class="input-group-append">
                                                <button type="button" class="btn-outline-secondary"
                                                    (click)="getAllAutopartsWithPage(0, pageSize, 0, true)"
                                                    title="Get All Archived Parts with Paging">
                                                    <i class="bi-arrow-repeat"></i>
                                                </button>
                                            </div>
                                            <div class="input-group-append px-1">
                                                <select [(ngModel)]="pageSizeArchived"
                                                    (change)="getAllAutopartsWithPage(0, pageSize, 0, true)">
                                                    <option>10</option>
                                                    <option>20</option>
                                                    <option>30</option>
                                                    <option>40</option>
                                                    <option>50</option>
                                                    <option>60</option>
                                                    <option>70</option>
                                                    <option>80</option>
                                                    <option>90</option>
                                                    <option>100</option>
                                                    <option>200</option>
                                                </select>
                                            </div>
                                            <div class="input-group-append  px-1">
                                                <label>{{ messageCountArchived}}</label>
                                            </div>
                                            <div class="input-group-append  px-1">
                                                <div>
                                                    <a class="text-center"
                                                        (click)="getAllAutopartsWithPage(i, pageSize, 0, true)"
                                                        *ngFor="let page of pagesArrayArchived; let i=index"
                                                        [style.background-color]="i == currantPageNumberArchived? 'lightgrey' : (false ? 'white' : 'white')"
                                                        style="TEXT-DECORATION: underline; padding: 5px;">{{page}}</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label for="placeholder">Archived Parts
                                            [{{autopartsArchived.length}}]</label>
                                        <div class="table-responsive" *ngIf="autopartsArchived.length> 0">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th>Name</th>
                                                        <th>Part #</th>
                                                        <th>Description</th>
                                                        <th>Price</th>
                                                        <th>Payment Method</th>
                                                        <th>Grade</th>
                                                        <th>Year/Make/Model</th>
                                                        <th>Vendor</th>
                                                        <th>Date</th>
                                                        <th>By</th>
                                                        <th style="width:80px">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let autopart of autopartsArchived ; let i=index; let even=even"
                                                        [style.background-color]="i == cindexAutopart? 'lightyellow' : (even ? 'white' : 'white')"
                                                        (click)="getAutopartDetail(autopart, i, false)">
                                                        <td style="border: 1px solid lightgray;">{{i+1}}</td>
                                                        <td style="border: 1px solid lightgray;">

                                                            <ng-container
                                                                *ngIf="autopart.source != null && autopart.source !='' ">
                                                                <a href="{{autopart.source}}"
                                                                    target="_blank">{{autopart.title}}</a>
                                                            </ng-container>
                                                            <ng-container
                                                                *ngIf="autopart.source == null || autopart.source =='' ">
                                                                {{autopart.title}}
                                                            </ng-container>

                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.partNumber}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngIf="autopart.imageModels != null && autopart.imageModels.length > 0 && 
                                                                autopart.showInSearchImageId > 0">
                                                                <img height="100" width="100"
                                                                    src="{{baseUrlResizeImage + '/' + autopart?.showInSearchImageId}}">

                                                            </ng-container>
                                                            {{autopart.description}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">${{autopart.price}}
                                                            <ng-container *ngIf="autopart.salePrice > 0">
                                                                <br><b style="color:red"
                                                                    title="Sale PriceF">${{autopart.salePrice}}</b>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container
                                                                *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                                <ng-container
                                                                    *ngIf="autopart.paymentMethodId ==paymentMethod.id">
                                                                    {{paymentMethod.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            {{autopart.grade}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngIf="autopart.year > 0">
                                                                {{autopart.year}} {{autopart.make}} {{autopart.model}}
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let vendor of vendors;let i=index;">
                                                                <ng-container *ngIf="autopart.vendorId ==vendor.id">
                                                                    {{vendor.name}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">{{autopart.createdAt |
                                                            date}}
                                                        </td>
                                                        <td style="border: 1px solid lightgray;">
                                                            <ng-container *ngFor="let emplyee of users;let i=index;">
                                                                <ng-container *ngIf="emplyee.id ==autopart.userId">
                                                                    {{emplyee.firstName}} {{emplyee.lastName}}
                                                                </ng-container>
                                                            </ng-container>
                                                        </td>
                                                        <td style="border: 1px solid lightgray;text-align: center;">
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Remove this Part"
                                                                (click)="deleteAutopart(autopart)"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-trash"></i>
                                                            </button>
                                                            <button class="btn-outline-secondary btn-xs"
                                                                title="Un-Archived this Part"
                                                                (click)="archiveAutopart(autopart, false, 'un-archive')"
                                                                [disabled]="user.allowAddUpdateAutopart == false">
                                                                <i class="bi bi-arrow-bar-left"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>


            </div>
            <div class="col-md-12 px-1">
            </div>
        </div>

    </div>
</div>

<div *ngIf="currentUser !=null  && currentUser?.roles.includes('ROLE_ADMIN')" (click)="getAllUsers()">
    <select [(ngModel)]="user" (change)="resetUser(user)">
        <option *ngFor="let user of users" [ngValue]="user">{{user.username}} {{user.companyId}}</option>
    </select>
</div>