<div class="container-fluid">
    <section class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <!-- <div class="col-12 offset-md-10">
                        <button (click)="printPage('print-content', 'test')"></button>
                        <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                            data-bs-target="#staticBackdropLive"> priview
                        </button>
                    </div> -->
                    <div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':displayStyleTargetReason}">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header" style="background-color: lightgrey">
                                    <h4 class="modal-title">{{ this.vehicle.year}} {{
                                        this.vehicle.make}} {{ this.vehicle.model}}</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="form-group nopadding">
                                        <label>Reason for Changing Target Date to {{ this.vehicle.targetDate |
                                            date}}</label>
                                        <div class="input-group">
                                            <input type="text" name="reason" class="form-control"
                                                placeholder="Reason for Rejection" required
                                                [(ngModel)]="vehicle.targetDateChangeReason" #reason="ngModel"
                                                [ngClass]="{ 'is-invalid': reason.errors }" />
                                        </div>
                                    </div>
                                    <div class="form-group nopadding">
                                        <label> </label>
                                    </div>
                                    <div class="alert alert-danger" *ngIf="messageTargetDateReason !=''">
                                        {{ messageTargetDateReason}}
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        (click)="closePopupYesTargetDateReason()">
                                        Comfirm
                                    </button>
                                    <button type="button" class="btn btn-secondary"
                                        (click)="closePopupTargetDateReason()">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':displayStyle}">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title">Confirmation</h4>
                                </div>
                                <div class="modal-body">
                                    <p>Are you sure to archive this vehicle?</p>

                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" (click)="closePopupYes()">
                                        Yes
                                    </button>
                                    <button type="button" class="btn btn-secondary" (click)="closePopup()">
                                        NO
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal fade" id="staticBackdropLive" data-bs-backdrop="static" data-bs-keyboard="false"
                        tabindex="-1" aria-labelledby="staticBackdropLiveLabel" aria-hidden="true"
                        style="display: none;">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="staticBackdropLiveLabel">Repair Order</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div id="print-content">
                                        <div id="componentID" class="container-fluid">
                                            <div class="container-fluid">

                                                <div id="componentID2" class="container-fluid">

                                                    <div class="row">
                                                        <div class="col-12">
                                                            <h4>
                                                                <!-- <i class="bi bi-truck"></i> -->
                                                                <img [src]="company.iconString"
                                                                    style="width: 100px;border: 0px solid #555;">

                                                                {{this.company.name}}, Inc.
                                                                <small style="float: right;">Date:
                                                                    {{currentDate|
                                                                    date}}</small>
                                                            </h4>
                                                        </div>
                                                        <!-- /.col -->
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-sm-4">
                                                            From
                                                            <address>
                                                                <strong>{{this.company.name}}</strong><br>
                                                                {{this.company.street}}<br>
                                                                {{this.company.city}} {{this.company.state}},
                                                                {{this.company.zip}}<br>
                                                                Phone: {{formatPhoneNumber(this.company.phone)}}<br>
                                                                Email: {{this.company.email}}
                                                            </address>
                                                        </div>
                                                        <!-- /.col -->
                                                        <div class="col-sm-4">
                                                            To
                                                            <address>
                                                                <ng-container *ngFor="let employee of this.employees">
                                                                    <ng-container
                                                                        *ngIf="employee.id==this.currentEmplyeeId">
                                                                        <strong>{{employee.firstName}}
                                                                            {{employee.lastName}}</strong><br>
                                                                        {{employee.phone}}<br>

                                                                        <ng-container
                                                                            *ngFor="let role of this.employeeRoles">
                                                                            <ng-container
                                                                                *ngIf="role.id==employee.roleId">
                                                                                {{role.name}} <br>
                                                                            </ng-container>
                                                                        </ng-container>
                                                                    </ng-container>
                                                                </ng-container>
                                                                <br>
                                                            </address>
                                                        </div>
                                                        <!-- /.col -->
                                                        <div class="col-sm-4">
                                                            <b>Repair Order for Vehicle #{{vehicleJob.id}}</b><br>
                                                            <br>

                                                            <b>Due Day:</b> {{vehicleJob.targetDate| date}}<br>

                                                        </div>
                                                        <!-- /.col -->
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-12">
                                                            <div [innerHtml]="company.slogan"></div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-12 table-responsive">
                                                            <table class="table table-striped">
                                                                <thead>
                                                                    <tr class="bg-primary">
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Item</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Info</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Vehicle</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicleJob.year}} {{vehicleJob.make}}
                                                                            {{vehicleJob.model}}
                                                                            {{vehicleJob.color}}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Specification</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicleJob.description}}</td>
                                                                    </tr>
                                                                    <tr *ngIf="vehicleJob.vin != ''">
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>VIN</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicleJob.vin}} </td>
                                                                    </tr>
                                                                    <tr *ngIf="vehicleJob.plate != ''">
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>License Plate</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicleJob.plate}} </td>
                                                                    </tr>
                                                                    <tr *ngIf="vehicleJob.priorDamage != ''">
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Prior Damanages</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicleJob.priorDamage}} </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Job Type</strong>
                                                                        </td>
                                                                        <ng-container
                                                                            *ngFor="let jobRequestType of this.jobRequestTypes">
                                                                            <td style="border: 1px solid lightgray;"
                                                                                *ngIf="jobRequestType.id == vehicle.jobRequestType">
                                                                                {{jobRequestType.name}} </td>
                                                                        </ng-container>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Work Request</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicleJob.workRequest}} </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="row" *ngIf="vehicleJob.jobs.length >0">
                                                        <div class="col-12 table-responsive">
                                                            <table class="table table-striped">
                                                                <thead>
                                                                    <tr class="bg-primary">
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            #</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Job Item</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Instructions</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Deadline</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Status</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr
                                                                        *ngFor="let job of vehicleJob.jobs; let i=index">
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{job.id}}</td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{job.name}}</td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{job.notes}}</td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{job.targetDate | date}}</td>

                                                                        <ng-container *ngIf="job.status ==0">
                                                                            <td style="border: 1px solid lightgray;">
                                                                                Not Completed</td>
                                                                        </ng-container>

                                                                        <ng-container *ngIf="job.status ==1">
                                                                            <td style="border: 1px solid lightgray;">
                                                                                Completed</td>
                                                                        </ng-container>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <p class="col-lg-7 col-md-7 col-sm-7 col-xs-7"></p>
                                                    <p class="col-lg-5 col-md-5 col-sm-5 col-xs-5"></p>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div id="print-content-jobs">
                                        <div id="componentID" class="container-fluid">
                                            <div class="container-fluid">

                                                <div id="componentID2" class="container-fluid">

                                                    <div class="row">
                                                        <div class="col-12">
                                                            <h4>
                                                                <!-- <i class="bi bi-truck"></i> -->
                                                                <img [src]="company.iconString"
                                                                    style="width: 100px;border: 0px solid #555;">
                                                                {{this.company.name}}, Inc.
                                                                <small style="float: right;">Date:
                                                                    {{currentDate|
                                                                    date}}</small>
                                                            </h4>
                                                        </div>
                                                        <!-- /.col -->
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-sm-4">
                                                            From
                                                            <address>
                                                                <strong>{{this.company.name}}</strong><br>
                                                                {{this.company.street}}<br>
                                                                {{this.company.city}} {{this.company.state}},
                                                                {{this.company.zip}}<br>
                                                                Phone: {{formatPhoneNumber(this.company.phone)}}<br>
                                                                Email: {{this.company.email}}
                                                            </address>
                                                        </div>
                                                        <!-- /.col -->
                                                        <div class="col-sm-4">
                                                            <!--  To
                                                              <address>
                                                                <ng-container *ngFor="let employee of this.employees">
                                                                    <ng-container
                                                                        *ngIf="employee.id==this.currentEmplyeeId">
                                                                        <strong>{{employee.firstName}}
                                                                            {{employee.lastName}}</strong><br>
                                                                        {{employee.phone}}<br>

                                                                        <ng-container
                                                                            *ngFor="let role of this.employeeRoles">
                                                                            <ng-container
                                                                                *ngIf="role.id==employee.employeeRoleId">
                                                                                {{role.name}} <br>
                                                                            </ng-container>
                                                                        </ng-container>
                                                                    </ng-container>
                                                                </ng-container>
                                                                <br>
                                                            </address> -->
                                                        </div>
                                                        <!-- /.col -->
                                                        <div class="col-sm-4">
                                                            <b>Repair Order for vehicle #{{vehicleJob.id}}</b><br>
                                                            <br>

                                                            <b>Due Day:</b> {{vehicleJob.targetDate| date}}<br>

                                                        </div>
                                                        <!-- /.col -->
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-12">
                                                            <div [innerHtml]="company.slogan"></div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-12 table-responsive">
                                                            <table class="table table-striped">
                                                                <thead>
                                                                    <tr class="bg-primary">
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Item</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Info</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Vehicle</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicleJob.year}} {{vehicleJob.make}}
                                                                            {{vehicleJob.model}}
                                                                            {{vehicleJob.color}}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Specification</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicleJob.description}}</td>
                                                                    </tr>
                                                                    <tr *ngIf="vehicleJob.vin != ''">
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>VIN</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicleJob.vin}} </td>
                                                                    </tr>
                                                                    <tr *ngIf="vehicleJob.plate != ''">
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>License Plate</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicleJob.plate}} </td>
                                                                    </tr>
                                                                    <tr *ngIf="vehicleJob.priorDamage != ''">
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Prior Damanages</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicleJob.priorDamage}} </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Job Type</strong>
                                                                        </td>
                                                                        <ng-container
                                                                            *ngFor="let jobRequestType of this.jobRequestTypes">
                                                                            <td style="border: 1px solid lightgray;"
                                                                                *ngIf="jobRequestType.id == vehicle.jobRequestType">
                                                                                {{jobRequestType.name}} </td>
                                                                        </ng-container>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Work Request</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicleJob.workRequest}} </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="row" *ngIf="this.jobs.length >0">
                                                        <div class="col-12 table-responsive">
                                                            <table class="table table-striped">
                                                                <thead>
                                                                    <tr class="bg-primary">
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            #</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Job Item</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Instructions</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Assigned To</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Deadline</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Status</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr *ngFor="let job of this.jobs; let i=index">
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{job.id}}</td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{job.name}}</td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{job.notes}}</td>

                                                                        <ng-container
                                                                            *ngFor="let employee of this.employees">
                                                                            <ng-container
                                                                                *ngIf="employee.id==job.employeeId">

                                                                                <ng-container
                                                                                    *ngFor="let role of this.employeeRoles">
                                                                                    <ng-container
                                                                                        *ngIf="role.id==employee.roleId">

                                                                                        <td
                                                                                            style="border: 1px solid lightgray;">
                                                                                            {{employee.firstName}}
                                                                                            {{employee.lastName}} <br>
                                                                                            <small>{{role.name}}</small>
                                                                                        </td>
                                                                                    </ng-container>
                                                                                </ng-container>
                                                                            </ng-container>
                                                                        </ng-container>



                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{job.targetDate | date}}</td>

                                                                        <ng-container *ngIf="job.status ==0">
                                                                            <td style="border: 1px solid lightgray;">
                                                                                Not Completed</td>
                                                                        </ng-container>

                                                                        <ng-container *ngIf="job.status ==1">
                                                                            <td style="border: 1px solid lightgray;">
                                                                                Completed</td>
                                                                        </ng-container>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <p class="col-lg-7 col-md-7 col-sm-7 col-xs-7"></p>
                                                    <p class="col-lg-5 col-md-5 col-sm-5 col-xs-5"></p>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div id="print-content-receipt">
                                        <div id="componentID" class="container-fluid">
                                            <div class="container-fluid">

                                                <div id="componentID2" class="container-fluid">

                                                    <div class="row">
                                                        <div class="col-12" style="flex: 0 0 auto; width: 100%;">
                                                            <h4>
                                                                <!-- <i class="bi bi-truck"></i> -->
                                                                <img [src]="company.iconString"
                                                                    style="width: 100px;border: 0px solid #555;">
                                                                {{this.company.name}}, Inc.
                                                                <small style="float: right;">Date:
                                                                    {{currentDate|
                                                                    date}}</small>
                                                            </h4>
                                                        </div>
                                                        <!-- /.col -->
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-sm-4"
                                                            style="flex: 0 0 auto; width: 33.33333333%;">
                                                            From
                                                            <address>
                                                                <strong>{{this.company.name}}</strong><br>
                                                                {{this.company.street}}<br>
                                                                {{this.company.city}} {{this.company.state}},
                                                                {{this.company.zip}}<br>
                                                                Phone: {{formatPhoneNumber(this.company.phone)}}<br>
                                                                Email: {{this.company.email}}
                                                            </address>
                                                        </div>
                                                        <!-- /.col -->
                                                        <div class="col-sm-4">
                                                            To
                                                            <address>
                                                                <strong>{{this.vehicle.customer.title}}
                                                                    {{this.vehicle.customer.firstName}}
                                                                    {{this.vehicle.customer.lastName}}</strong><br>
                                                                {{this.vehicle.customer.street}}<br>
                                                                {{this.vehicle.customer.city}}
                                                                {{this.vehicle.customer.state}},
                                                                {{this.vehicle.customer.zip}}<br>
                                                                Phone:
                                                                {{formatPhoneNumber(this.vehicle.customer.phone)}}<br>
                                                                Email: {{this.vehicle.customer.email}}
                                                            </address>
                                                        </div>
                                                        <!-- /.col -->
                                                        <div class="col-sm-4">
                                                            <b>Receipt for Vehicle
                                                                #{{this.vehicle.id}}</b><br>
                                                            <br>

                                                            <b>Due Day:</b> {{vehicle.targetDate| date}}<br>

                                                        </div>
                                                        <!-- /.col -->
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-12">
                                                            <div [innerHtml]="company.slogan"></div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-12 table-responsive">
                                                            <table class="table table-striped">
                                                                <thead>
                                                                    <tr class="bg-primary">
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Item</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Info</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Vehicle</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicle.year}}
                                                                            {{vehicle.make}}
                                                                            {{vehicle.model}}
                                                                            {{vehicle.color}}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Specification</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicle.description}}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Job Type</strong>
                                                                        </td>
                                                                        <ng-container
                                                                            *ngFor="let jobRequestType of this.jobRequestTypes">
                                                                            <td style="border: 1px solid lightgray;"
                                                                                *ngIf="jobRequestType.id == vehicle.jobRequestType">
                                                                                {{jobRequestType.name}} </td>
                                                                        </ng-container>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Work Request</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicle.workRequest}} </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="row" *ngIf="receipts.length >0">
                                                        <div class="col-12 table-responsive">
                                                            <table class="table table-striped">
                                                                <thead>
                                                                    <tr class="bg-primary">
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            #</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Item</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Description</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Subtotal</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr *ngFor="let receipt of receipts; let i=index">
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{receipt.invoiceNumber}}</td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{receipt.name}}</td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{receipt.notes}}</td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            ${{receipt.amount }}</td>

                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6"></div>
                                                        <div class="col-6">
                                                            <p class="lead">Amount Due {{currentDate| date}}</p>
                                                            <ng-container
                                                                *ngFor="let paymentMethod of this.paymentMethods">
                                                                <p class="lead"
                                                                    *ngIf="paymentMethod.id==vehicle.paymentMethod">
                                                                    Paid By {{paymentMethod.name}}
                                                                </p>
                                                            </ng-container>
                                                            <div class="table-responsive">
                                                                <table class="table table-striped">
                                                                    <tr>
                                                                        <td style="width:50%;">
                                                                            <strong>Subtotal:</strong>
                                                                        </td>
                                                                        <td>${{getSubtotal()}}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>
                                                                            <strong>Tax ({{company.taxRate
                                                                                *100}}%)</strong>
                                                                        </td>
                                                                        <td>${{getTax() }}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>
                                                                            <strong>Total:</strong>
                                                                        </td>
                                                                        <td>${{getTotal()}}</td>
                                                                    </tr>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <p></p>
                                                        </div>
                                                        <div class="col-6">
                                                            <p></p>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-12">
                                                            <div [innerHtml]="disclaimerText"></div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <p></p>
                                                        </div>
                                                        <div class="col-6">
                                                            <p></p>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <p></p>
                                                        </div>
                                                        <div class="col-6">
                                                            <p></p>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6"></div>

                                                        <div class="col-2 text-right"><label>Signature:</label>
                                                        </div>
                                                        <div class="col-4">
                                                            _________________________________
                                                        </div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <p></p>
                                                        </div>
                                                        <div class="col-6">
                                                            <p></p>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6"></div>

                                                        <div class="col-2 text-right"><label>Date:</label>
                                                        </div>
                                                        <div class="col-4">
                                                            _________________________________
                                                        </div>


                                                    </div>
                                                    <div class="row">
                                                        <div class="col-12">
                                                            <div> </div>
                                                        </div>
                                                    </div>

                                                    <p class="col-lg-7 col-md-7 col-sm-7 col-xs-7"></p>
                                                    <p class="col-lg-5 col-md-5 col-sm-5 col-xs-5"></p>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div id="print-content-vehicle">
                                        <div id="componentID" class="container-fluid">
                                            <div class="container-fluid">

                                                <div id="componentID2" class="container-fluid">

                                                    <div class="row">
                                                        <div class="col-12" style="flex: 0 0 auto; width: 100%;">
                                                            <h4>
                                                                <!-- <i class="bi bi-truck"></i> -->
                                                                <img [src]="company.iconString"
                                                                    style="width: 100px;border: 0px solid #555;">
                                                                {{this.company.name}}, Inc.
                                                                <small style="float: right;">Date:
                                                                    {{currentDate|
                                                                    date}}</small>
                                                            </h4>
                                                        </div>
                                                        <!-- /.col -->
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-sm-4"
                                                            style="flex: 0 0 auto; width: 33.33333333%;">
                                                            From
                                                            <address>
                                                                <strong>{{this.company.name}}</strong><br>
                                                                {{this.company.street}}<br>
                                                                {{this.company.city}} {{this.company.state}},
                                                                {{this.company.zip}}<br>
                                                                Phone: {{formatPhoneNumber(this.company.phone)}}<br>
                                                                Email: {{this.company.email}}
                                                            </address>
                                                        </div>
                                                        <!-- /.col -->
                                                        <div class="col-sm-4">
                                                            To
                                                            <address>
                                                                <strong>{{this.vehicle.customer.title}}
                                                                    {{this.vehicle.customer.firstName}}
                                                                    {{this.vehicle.customer.lastName}}</strong><br>
                                                                {{this.vehicle.customer.street}}<br>
                                                                {{this.vehicle.customer.city}}
                                                                {{this.vehicle.customer.state}},
                                                                {{this.vehicle.customer.zip}}<br>
                                                                Phone: {{
                                                                formatPhoneNumber(this.vehicle.customer.phone)}}<br>
                                                                Email: {{this.vehicle.customer.email}}
                                                            </address>
                                                        </div>
                                                        <!-- /.col -->
                                                        <div class="col-sm-4">
                                                            <b>Work Request for Vehicle
                                                                #{{this.vehicle.id}}</b><br>
                                                            <br>

                                                            <b>Due Day:</b> {{vehicle.targetDate| date}}<br>

                                                        </div>
                                                        <!-- /.col -->
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-12">
                                                            <div [innerHtml]="company.slogan"></div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-12 table-responsive">
                                                            <table class="table table-striped">
                                                                <thead>
                                                                    <tr class="bg-primary">
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Item</th>
                                                                        <th
                                                                            style="background-color: rgb(13, 173, 226);">
                                                                            Info</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Vehicle</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicle.year}}
                                                                            {{vehicle.make}}
                                                                            {{vehicle.model}}
                                                                            {{vehicle.color}}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Specification</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicle.description}}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>VIN</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicle.vin}}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Job Type</strong>
                                                                        </td>
                                                                        <ng-container
                                                                            *ngFor="let jobRequestType of this.jobRequestTypes">
                                                                            <td style="border: 1px solid lightgray;"
                                                                                *ngIf="jobRequestType.id == vehicle.jobRequestType">
                                                                                {{jobRequestType.name}} </td>
                                                                        </ng-container>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Work Request</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicle.workRequest}} </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            <strong>Prior Damage</strong>
                                                                        </td>
                                                                        <td style="border: 1px solid lightgray;">
                                                                            {{vehicle.priorDamage}} </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <p> </p>
                                                        </div>
                                                        <div class="col-6">
                                                            <p> </p>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <p> </p>
                                                        </div>
                                                        <div class="col-6">
                                                            <p> </p>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <p> </p>
                                                        </div>
                                                        <div class="col-6">
                                                            <p> </p>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6"></div>

                                                        <div class="col-2 text-right"><label>Signature:</label>
                                                        </div>
                                                        <div class="col-4">
                                                            _________________________________
                                                        </div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <p></p>
                                                        </div>
                                                        <div class="col-6">
                                                            <p></p>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-6"></div>

                                                        <div class="col-2 text-right"><label>Date:</label>
                                                        </div>
                                                        <div class="col-4">
                                                            _________________________________
                                                        </div>


                                                    </div>
                                                    <p class="col-lg-7 col-md-7 col-sm-7 col-xs-7"></p>
                                                    <p class="col-lg-5 col-md-5 col-sm-5 col-xs-5"></p>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div><!-- /.container-fluid -->
    </section>
</div>

<div>
    <div class="row nogot">
        <div class="col-pixel-width-300" *ngIf="showAccordian==true">

            <div class="accordion sticky-top" id="accordionParent">
                <!-- <div class="accordion-item">
                    <h6 class="accordion-header" id="headingEight">
                        <button class="accordion-button  accordion-title collapsed" type="button"
                            data-bs-toggle="collapse" (click)="getAllNotes(this.user.companyId)"
                            data-bs-target="#collapseEight" aria-expanded="false" aria-controls="collapseEight">
                            <i
                                class="bi bi-newspaper text-center d-flex align-items-center justify-content-center h-100"></i>
                            Reminders <span class="badge badge-dark">{{notes.length}}</span>
                        </button>
                    </h6>
                    <div id="collapseEight" class="accordion-collapse collapse" aria-labelledby="headingEight"
                        data-bs-parent="#accordionParent">
                        <div class="accordion-body">
                            <div class="input-group">
                                <input type="text" class="form-control" [(ngModel)]="note.notes" name="reminder"
                                    placeholder="reminder" (keyup.enter)="onSaveNote($event)">


                                <div class="input-group-append">
                                    <input colorPicker="note.color" style="width: 40px"
                                        (colorPickerChange)="note.color=$event" [style.background]="note.color" />
                                </div>
                                <div class="input-group-append" *ngIf="note.id> 0">
                                    <button class="btn btn-outline-secondary"><i class="bi-trash"
                                            (click)="deleteNote(note)"></i></button>
                                </div>
                            </div>
                            <div class="input-group">
                                <label> </label>
                            </div>
                            <div class="list-group shadow" cdkDropList (cdkDropListDropped)="droppedNote($event)">


                                <a class="list-group-item list-group-item-action active py-1">
                                    <div class="btn btn-primary btn-sm" *ngIf="user.allowAddNotes == true"
                                        (click)="addNewNote()">
                                        <i class="bi-plus-lg"></i>
                                    </div>
                                    Reminders
                                </a>
                                <ng-container *ngFor="let note of notes; let i=index ">
                                    <a class="list-group-item list-group-item-action py-0"
                                        title="{{note.createdAt| date}}" (click)="getNoteDetail(note)"
                                        [style.color]="note.color" cdkDrag>
                                        {{i+1}}. {{note.notes}}
                                    </a>
                                </ng-container>
                            </div>
                        </div>
                    </div>
                </div> -->
                <div class="accordion-item">
                    <h6 class="accordion-header" id="headingThree">
                        <button class="accordion-button  accordion-title collapsed" type="button"
                            data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false"
                            aria-controls="collapseFour">
                            <i class="bi-person text-center d-flex align-items-center justify-content-center h-100"></i>
                            {{vehicle.customer.title}}
                            {{vehicle.customer.firstName}}
                            {{
                            vehicle.customer.lastName }}
                        </button>
                    </h6>
                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour"
                        data-bs-parent="#accordionParent">
                        <div class="accordion-body">
                            <div class="card shadow" *ngIf="vehicle.id> 0 && editModeCustomer==false "
                                style="width: 100%;" (click)="editModeCustomer = !editModeCustomer">
                                <div class="card-body p-0">
                                    <div class="list-group" title="Click to Edit">
                                        <a class="list-group-item list-group-item-action active py-1">
                                            <i class="bi-person"></i>
                                            {{vehicle.customer.title}}
                                            {{vehicle.customer.firstName}}
                                            {{ vehicle.customer.lastName }}
                                        </a>

                                        <a class="list-group-item list-group-item-action py-0">
                                            <i class="bi-phone"></i>
                                            {{ formatPhoneNumber(vehicle.customer.phone) }}
                                            {{formatPhoneNumber( vehicle.customer.phone2) }}
                                            {{ formatPhoneNumber(vehicle.customer.phone3) }}</a>
                                        <a class="list-group-item list-group-item-action py-0">
                                            <i class="bi-house"></i>
                                            {{vehicle.customer.street}},
                                            {{vehicle.customer.city}},
                                            {{vehicle.customer.state}} {{vehicle.customer.zip}}</a>
                                        <a class="list-group-item list-group-item-action py-0">
                                            <i class="bi bi-newspaper"></i>
                                            {{ vehicle.customer.notes}}</a>
                                        <a class="list-group-item list-group-item-action disabled py-1">
                                            <i class="bi bi-clock"></i> Since {{ vehicle.customer.createdAt | date}}</a>
                                    </div>
                                </div>
                                <!-- /.card-body -->
                            </div>

                            <div class="card"
                                *ngIf="vehicle.id> 0 && editModeCustomer==true && user.allowUpdateCustomerInfo == true">
                                <div class="input-group card-body" style="padding:8px">
                                    <div class="form-group col-12 nopadding">
                                        <label for="title">Title</label>
                                        <select class="form-control" name="title" #title="ngModel" required
                                            [(ngModel)]="vehicle.customer.title"
                                            [ngClass]="{ 'is-invalid': title.errors }">
                                            <option *ngFor="let title of optionsTitle">{{ title}}</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-6 nopadding">
                                        <label for="firstname">First Name</label>
                                        <input trimText class="form-control" type="text" name="firstName"
                                            placeholder="first name" required minlength="2" maxlength="200"
                                            #firstName="ngModel" [ngClass]="{ 'is-invalid': firstName.errors }"
                                            [(ngModel)]="vehicle.customer.firstName" />
                                        <div class="invalid-feedback" *ngIf="firstName.errors">
                                            <div *ngIf="firstName.errors['required']">first Name is required</div>
                                            <div *ngIf="firstName.errors['minlength']">
                                                First Name must be at least 2 characters
                                            </div>
                                            <div *ngIf="firstName.errors['maxlength']">
                                                First Name must be at most 200 characters
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group col-6 nopadding">
                                        <label>Last Name</label>
                                        <div class="input-group">
                                            <input trimText class="form-control" type="text" placeholder="last name"
                                                [(ngModel)]="vehicle.customer.lastName" />
                                        </div>

                                    </div>


                                    <div class="form-group col-6 nopadding">
                                        <label for="Phone">Mobile Phone</label>
                                        <div class="input-group">
                                            <input type="text" name="phone" class="form-control" placeholder="Phone"
                                                [(ngModel)]="vehicle.customer.phone" #phone="ngModel"
                                                [ngClass]="{ 'is-invalid': phone.errors }"
                                                pattern="^[-+()0-9]{10,12}(?:-\d+)?$" />
                                        </div>
                                    </div>

                                    <div class="form-group col-6 nopadding">
                                        <label for="homePhone">Home Phone</label>
                                        <div class="input-group">
                                            <input type="text" name="phone2" class="form-control"
                                                placeholder="Home Phone" [(ngModel)]="vehicle.customer.phone2"
                                                #phone2="ngModel" [ngClass]="{ 'is-invalid': phone2.errors }"
                                                pattern="^[-+()0-9]{10,12}(?:-\d+)?$" />

                                            <div class="invalid-feedback" *ngIf="phone2.errors ">
                                                <div *ngIf="phone2.errors['phone2']">
                                                    Phone must be a valid phone number
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group col-6 nopadding">
                                        <label for="workPhone">Work Phone</label>
                                        <div class="input-group">
                                            <input type="text" name="phone3" class="form-control"
                                                placeholder="Wrok Phone" [(ngModel)]="vehicle.customer.phone3"
                                                #phone3="ngModel" [ngClass]="{ 'is-invalid': phone3.errors }"
                                                pattern="^[-+()0-9]{10,12}(?:-\d+)?$" />

                                            <div class="invalid-feedback" *ngIf="phone3.errors ">
                                                <div *ngIf="phone3.errors['phone3']">
                                                    Phone must be a valid phone number
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group col-12 nopadding">
                                        <label>Email</label>
                                        <input trimText class="form-control" type="text" placeholder="email"
                                            [(ngModel)]="vehicle.customer.email" />
                                    </div>
                                    <div class="form-group col-6 nopadding">
                                        <label>Street</label>
                                        <input trimText class="form-control" type="text" placeholder="street"
                                            [(ngModel)]="vehicle.customer.street" />
                                    </div>
                                    <div class="form-group col-6 nopadding">
                                        <label>City</label>
                                        <input trimText class="form-control" type="text" placeholder="city"
                                            [(ngModel)]="vehicle.customer.city" />
                                    </div>
                                    <div class="form-group col-6 nopadding">
                                        <label>State</label>
                                        <div class="input-group">
                                            <select class="form-control" name="state" #state="ngModel" required
                                                [(ngModel)]="vehicle.customer.state"
                                                [ngClass]="{ 'is-invalid': state.errors }">
                                                <option value="AL">Alabama</option>
                                                <option value="AK">Alaska</option>
                                                <option value="AZ">Arizona</option>
                                                <option value="AR">Arkansas</option>
                                                <option value="CA">California</option>
                                                <option value="CO">Colorado</option>
                                                <option value="CT">Connecticut</option>
                                                <option value="DE">Delaware</option>
                                                <option value="DC">District Of Columbia</option>
                                                <option value="FL">Florida</option>
                                                <option value="GA">Georgia</option>
                                                <option value="HI">Hawaii</option>
                                                <option value="ID">Idaho</option>
                                                <option value="IL">Illinois</option>
                                                <option value="IN">Indiana</option>
                                                <option value="IA">Iowa</option>
                                                <option value="KS">Kansas</option>
                                                <option value="KY">Kentucky</option>
                                                <option value="LA">Louisiana</option>
                                                <option value="ME">Maine</option>
                                                <option value="MD">Maryland</option>
                                                <option value="MA">Massachusetts</option>
                                                <option value="MI">Michigan</option>
                                                <option value="MN">Minnesota</option>
                                                <option value="MS">Mississippi</option>
                                                <option value="MO">Missouri</option>
                                                <option value="MT">Montana</option>
                                                <option value="NE">Nebraska</option>
                                                <option value="NV">Nevada</option>
                                                <option value="NH">New Hampshire</option>
                                                <option value="NJ">New Jersey</option>
                                                <option value="NM">New Mexico</option>
                                                <option value="NY">New York</option>
                                                <option value="NC">North Carolina</option>
                                                <option value="ND">North Dakota</option>
                                                <option value="OH">Ohio</option>
                                                <option value="OK">Oklahoma</option>
                                                <option value="OR">Oregon</option>
                                                <option value="PA">Pennsylvania</option>
                                                <option value="RI">Rhode Island</option>
                                                <option value="SC">South Carolina</option>
                                                <option value="SD">South Dakota</option>
                                                <option value="TN">Tennessee</option>
                                                <option value="TX">Texas</option>
                                                <option value="UT">Utah</option>
                                                <option value="VT">Vermont</option>
                                                <option value="VA">Virginia</option>
                                                <option value="WA">Washington</option>
                                                <option value="WV">West Virginia</option>
                                                <option value="WI">Wisconsin</option>
                                                <option value="WY">Wyoming</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group col-6 nopadding">
                                        <label>Zip</label>
                                        <div class="input-group mb-12">
                                            <input trimText class="form-control" type="text" placeholder="zip"
                                                [(ngModel)]="vehicle.customer.zip" />
                                        </div>
                                    </div>
                                    <div class="form-group col-12 nopadding">
                                        <label>Notes</label>
                                        <input trimText class="form-control" type="text" placeholder="notes"
                                            [(ngModel)]="vehicle.customer.notes" />

                                    </div>
                                    <div class="form-group col-12 nopadding">
                                        <label> </label>

                                    </div>
                                </div>
                                <div class="card-footer" title="Click to Exit" style="padding:2px" title="Click to Exit"
                                    (click)="editModeCustomer =!editModeCustomer">
                                    <div class="btn btn-primary btn-sm" *ngIf="user.allowUpdateCustomerInfo == true"
                                        title="Save"
                                        (click)="saveCustomerInfo(vehicle.customer);editModeCustomer =!editModeCustomer">
                                        <i class="bi-save"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h6 class="accordion-header" id="headingOne">
                        <button class="accordion-button  accordion-title" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            <i class="bi-truck text-center d-flex align-items-center justify-content-center h-100"></i>
                            #{{ vehicle.id }} {{ vehicle.year }} {{ vehicle.make }} {{
                            vehicle.model }}
                        </button>
                    </h6>
                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
                        data-bs-parent="#accordionParent">
                        <div class="accordion-body">
                            <div class="card shadow" *ngIf="vehicle.id> 0  && editModeVehicle==false"
                                style="width: 100%;" id="{{vehicle?.id}}" #target_{{vehicle?.id}}
                                (click)="editModeVehicle =!editModeVehicle; refresh(); setStep(0)">

                                <div class="card-body p-0">
                                    <div class="list-group" title="Click to Edit">
                                        <a class="list-group-item list-group-item-action active py-1">
                                            <i class="bi-truck"></i>
                                            #{{ vehicle.id }} {{ vehicle.year }} {{ vehicle.make }} {{
                                            vehicle.model }} {{ vehicle.color }}
                                        </a>
                                        <a class="list-group-item list-group-item-action py-0" title="Description">
                                            <i class="bi bi-newspaper"></i>
                                            {{ vehicle.description }}</a>
                                        <a class="list-group-item list-group-item-action py-0" title="VIN"
                                            *ngIf="vehicle.vin != null && vehicle.vin != ''">
                                            <i class="bi bi-newspaper"></i>
                                            {{ vehicle.vin }}</a>
                                        <a class="list-group-item list-group-item-action py-0" title="R/O">
                                            <i class="bi bi-newspaper"></i>
                                            R/O:{{ vehicle.workRequest }}</a>

                                        <!-- <a class="list-group-item list-group-item-action py-0" title="Job Request Type">
                                            <i class="bi bi-menu-up"></i>
                                            <ng-container *ngFor="let jobRequestType of jobRequestTypes; let i=index">
                                                <ng-container *ngIf="vehicle.jobRequestType==jobRequestType.id">
                                                    <strong> {{jobRequestType.name}}</strong></ng-container>
                                            </ng-container>
                                        </a> -->

                                        <a class="list-group-item list-group-item-action py-0" title="Amount">
                                            <i class="bi bi-bank"></i>
                                            ${{ vehicle.price }} ${{ vehicle.supplymentPrice }} </a>

                                        <a class="list-group-item list-group-item-action py-0" title="Payment Method"
                                            *ngIf="vehicle.paymentMethod != null && vehicle.paymentMethod > 0">
                                            <i class="bi bi-bank"></i>
                                            <ng-container *ngFor="let paymentMethod of paymentMethods; let i=index">
                                                <ng-container *ngIf="vehicle.paymentMethod==paymentMethod.id">
                                                    <b> {{paymentMethod.name}}</b></ng-container>
                                            </ng-container>
                                        </a>
                                        <a *ngIf="vehicle.claimNumber !=null && vehicle.claimNumber !='' "
                                            class="list-group-item list-group-item-action py-0" title="Claim Number">
                                            <i class="bi-ui-checks"></i> {{ vehicle.claimNumber }}</a>

                                        <a class="list-group-item list-group-item-action py-0"
                                            title="Insurance Company info"
                                            *ngIf="vehicle.insuranceCompany != null && vehicle.insuranceCompany !='' ">
                                            <i class="bi-ui-checks"></i> {{ vehicle.insuranceCompany }}
                                            <ng-container *ngIf="vehicle.insuranceCompany != null && vehicle.insuranceCompany !='' && 
                                        ! vehicle.insuranceCompany.toLowerCase().includes('cash')">
                                                <ng-container *ngFor=" let insurance of this.insurancers">
                                                    <ng-container *ngIf="insurance.name == vehicle.insuranceCompany">

                                                        <i class="bi-person" title="contact"></i>{{
                                                        insurance.contactFirstName }}
                                                        {{ insurance.contactLastName}}

                                                        <i class="bi-phone" title="phone"></i>{{ insurance.phone }}

                                                    </ng-container>
                                                </ng-container>
                                            </ng-container>
                                        </a>
                                        <a class="list-group-item list-group-item-action py-0"
                                            *ngIf="vehicle.approvalStatus != null && vehicle.approvalStatus > 0"
                                            title="Approval Status" style="background-color: lightgrey;">
                                            <i class="bi bi-menu-up"></i>
                                            <ng-container *ngFor="let approvalStatus of approvalStatuss; let i=index">
                                                <strong *ngIf="vehicle.approvalStatus==approvalStatus.id">
                                                    {{approvalStatus.name}}</strong>
                                            </ng-container>
                                        </a>

                                        <a class="list-group-item list-group-item-action py-0" title="Rental"
                                            *ngIf="vehicle.loanerCarName != null && vehicle.loanerCarName != '' ">
                                            <i class="bi-truck"></i> {{ vehicle.loanerCarName }}</a>

                                        <!-- <a class="list-group-item list-group-item-action py-0"
                                            *ngIf="vehicle.rentalDate != null" title="Rental Due Date">
                                            <i class="bi bi-clock"></i> {{vehicle.rentalDate | date:'yyyy-MM-dd'}}
                                            <ng-container
                                                *ngIf="vehicle.loanerCarName != null && vehicle.loanerCarName != '' && vehicle.rentalCountDown >= 0 ">
                                                Due in <b>{{vehicle.rentalCountDown}}
                                                </b> days
                                            </ng-container>

                                            <ng-container
                                                *ngIf="vehicle.loanerCarName != null && vehicle.loanerCarName != ''  && vehicle.rentalCountDown < 0">
                                                <b>Overdue</b> for <b style="color:red">{{
                                                    (vehicle.rentalCountDown)*(-1)}}
                                                </b> days
                                            </ng-container>
                                        </a>

                                        <a class="list-group-item list-group-item-action py-0" title="Target Date"
                                            *ngIf="vehicle.targetDate != null">
                                            <i class="bi bi-clock"></i> {{vehicle.targetDate | date:'yyyy-MM-dd'}}
                                            <ng-container *ngIf="vehicle.targetDateCountDown >= 0 ">
                                                Due in <b>{{vehicle.targetDateCountDown}}
                                                </b> days
                                            </ng-container>

                                            <ng-container *ngIf="vehicle.targetDateCountDown < 0">
                                                <b>Overdue</b> for <b style="color:red">{{
                                                    (vehicle.targetDateCountDown)*(-1)}}
                                                </b> days
                                            </ng-container>
                                        </a> -->

                                        <!-- <a class="list-group-item list-group-item-action py-0"
                                            *ngIf="vehicle.status != null && vehicle.status > 0" title="Status"
                                            style="background-color: lightgrey;">
                                            <i class="bi bi-menu-up"></i>
                                            <ng-container *ngFor="let option of statuss; let i=index">
                                                <strong *ngIf="vehicle.status==option.id"> {{option.name}}</strong>
                                            </ng-container>
                                        </a> -->
                                        <a class="list-group-item list-group-item-action py-0" title="Notes/Comments"
                                            *ngIf="vehicle.comments != null && vehicle.comments !=''">
                                            <i class="bi bi-newspaper"></i> {{vehicle.comments}}</a>
                                        <ng-container *ngIf="vehicle.special==true">
                                            <a class="list-group-item list-group-item-action py-0">
                                                <i class="bi-star"></i>&nbsp;<button (click)="special(vehicle)"
                                                    class="btn btn-success btn-xs">VIP</button></a>
                                        </ng-container>
                                        <a class="list-group-item list-group-item-action disabled py-1">
                                            <i class="bi bi-clock"></i>
                                            {{ vehicle.createdAt | date}} Been <b class="blink">{{vehicle.daysInShop}}
                                            </b> days</a>
                                    </div>
                                </div>
                            </div>
                            <div class="card"
                                *ngIf="vehicle.id> 0 && editModeVehicle==true && user.allowAddAndUpdateVehicle == true"
                                style="width: 100%;">
                                <nav *ngIf="currentUser">
                                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                        <button class="nav-link active" id="nav-vehicle-home-tab" data-bs-toggle="tab"
                                            data-bs-target="#nav-vehicle-home" type="button" role="tab"
                                            (click)="setStep(3)" aria-controls="nav-vehicle-home"
                                            aria-selected="true">Info</button>

                                        <button class="nav-link" id="nav-vehicle-request-tab" data-bs-toggle="tab"
                                            data-bs-target="#nav-vehicle-request" type="button" role="tab"
                                            (click)="setStep(4)" aria-controls="nav-vehicle-request"
                                            aria-selected="true">Requests</button>
                                        <button class="nav-link" id="nav-prior-damage-tab" data-bs-toggle="tab"
                                            data-bs-target="#nav-prior-damage" type="button" role="tab"
                                            (click)="setStep(1)" aria-controls="nav-prior-damage"
                                            aria-selected="false">Prior
                                            Damage</button>
                                    </div>
                                </nav>
                                <div class="tab-content" id="nav-tabContent" style="padding: 8px;">
                                    <div class="tab-pane fade show active" id="nav-vehicle-home" role="tabpanel"
                                        #taggroup aria-labelledby="nav-vehicle-home-tab">
                                        <div class="col-12 nopadding">
                                            <div class="input-group mb-12">
                                                <div class="form-group col-6 nopadding">
                                                    <label for="year">Year</label>
                                                    <div class="input-group">
                                                        <select class="form-control" [(ngModel)]="vehicle.year"
                                                            placeholder="Year">
                                                            <option [value]="option"
                                                                *ngFor="let option of optionsYear;let i=index;">
                                                                {{option}}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group col-6 nopadding">
                                                    <label for="make">Make</label>
                                                    <div class="input-group">
                                                        <select class="form-control" #device
                                                            (change)="onChange($event, device.value)"
                                                            [(ngModel)]="vehicle.make" placeholder="Make">
                                                            <option [value]="option"
                                                                *ngFor="let option of optionsMake;let i=index;">
                                                                {{option}}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group col-6 nopadding">
                                                    <label for="model">Model</label>
                                                    <div class="input-group">
                                                        <select class="form-control" [(ngModel)]="vehicle.model"
                                                            placeholder="Model">
                                                            <option [value]="option"
                                                                *ngFor="let option of optionsModel;let i=index;">
                                                                {{option}}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group col-6 nopadding">
                                                    <label for="vin">Color</label>
                                                    <div class="input-group">
                                                        <select class="form-control" [(ngModel)]="vehicle.color"
                                                            style="background-color: {{vehicle.color}}"
                                                            placeholder="color">
                                                            <option style="background-color: {{color}}"
                                                                *ngFor="let color of optionsColor;let i=index;">
                                                                {{color}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="input-group">
                                                <div class="form-group col-6 nopadding">
                                                    <label for="year">Miles</label>
                                                    <input trimText class="form-control" type="text" placeholder="Miles"
                                                        [(ngModel)]="vehicle.miles" />
                                                </div>
                                                <div class="form-group col-6 nopadding">
                                                    <label for="year">Description</label>
                                                    <input trimText class="form-control" type="text" placeholder="Description"
                                                        [(ngModel)]="vehicle.description" />
                                                </div>

                                            </div>
                                            <div class="input-group">
                                                <div class="form-group col-6 nopadding">
                                                    <label>Plate</label>
                                                    <input trimText class="form-control" type="text" placeholder="plate"
                                                        [(ngModel)]="vehicle.plate" />
                                                </div>
                                                <div class="form-group col-6 nopadding">
                                                    <label for="vin">VIN</label>
                                                    <div class="input-group mb-12">
                                                        <input type="text" class="form-control" placeholder="VIN"
                                                            [(ngModel)]="vehicle.vin" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="input-group">
                                                <div class="form-group col-6 nopadding">
                                                    <label> </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade show" id="nav-vehicle-request" role="tabpanel" #taggroup
                                        aria-labelledby="nav-vehicle-request-tab">
                                        <div class="col-12 nopadding">

                                            <div class="form-group col-12 nopadding">
                                                <label for="workRequest">Work Requests</label>
                                                <textarea class="form-control" rows="3"
                                                    [(ngModel)]="vehicle.workRequest"
                                                    style="min-width: 100%"> </textarea>
                                            </div>


                                            <div class="input-group mb-12">
                                                <div class="form-group col-6 nopadding">
                                                    <label for="Job Request Type">Job Requsst Type</label>
                                                    <div class="input-group">
                                                        <select class="form-control"
                                                            [(ngModel)]="vehicle.jobRequestType" placeholder="Model">
                                                            <option [value]="jobRequestType.id"
                                                                *ngFor="let jobRequestType of jobRequestTypes;let i=index;">
                                                                {{jobRequestType.name}}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group col-6 nopadding">
                                                    <label>Claim Number</label>
                                                    <div class="input-group mb-12">
                                                        <input type="text" class="form-control"
                                                            placeholder="Claim Number"
                                                            [(ngModel)]="vehicle.claimNumber" />

                                                    </div>
                                                </div>
                                                <div class="form-group col-6 nopadding">
                                                    <label for="vin">Price</label>
                                                    <div class="input-group mb-12">
                                                        <input type="number" class="form-control" placeholder="Price"
                                                            [(ngModel)]="vehicle.price" pattern="[0-9]" />

                                                    </div>
                                                </div>
                                                <div class="form-group col-6 nopadding">
                                                    <label>Supplement Price</label>
                                                    <div class="input-group mb-12">
                                                        <input type="number" class="form-control"
                                                            placeholder="Supplement Price"
                                                            [(ngModel)]="vehicle.supplymentPrice" />

                                                    </div>

                                                </div>
                                                <div class="form-group col-6 nopadding">
                                                    <label for="Job Request Type">Arrival Mode</label>
                                                    <div class="input-group">
                                                        <select class="form-control" [(ngModel)]="vehicle.inTakeWay"
                                                            placeholder="Model">
                                                            <option [value]="inTakeWay.id"
                                                                *ngFor="let inTakeWay of inTakeWays;let i=index;">
                                                                {{inTakeWay.name}}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group col-6 nopadding">
                                                    <label for="Payment Method">Payment Method</label>
                                                    <div class="input-group">
                                                        <select class="form-control" [(ngModel)]="vehicle.paymentMethod"
                                                            placeholder="Model">
                                                            <option [value]="paymentMethod.id"
                                                                *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                                {{paymentMethod.name}}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>


                                                <div class="form-group col-6 nopadding">
                                                    <label for="insuranceCompany">Insurance Company</label>
                                                    <div class="input-group">
                                                        <select class="form-control"
                                                            [(ngModel)]="vehicle.insuranceCompany" placeholder="Model">
                                                            <option [value]="insurancer.name"
                                                                *ngFor="let insurancer of insurancers;let i=index;">
                                                                {{insurancer.name}}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="form-group col-6 nopadding">
                                                    <label for="insuranceCompany">Approval Status</label>
                                                    <div class="input-group">
                                                        <select class="form-control" #approvalStatus
                                                            (change)="onChangeApprovalStatus($event, approvalStatus.value)"
                                                            [(ngModel)]="vehicle.approvalStatus" placeholder="Model">
                                                            <option [value]="approvalStatus.id"
                                                                *ngFor="let approvalStatus of approvalStatuss;let i=index;">
                                                                {{approvalStatus.name}}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group col-6 nopadding">
                                                    <label>Parking</label>
                                                    <div class="input-group">
                                                        <select class="form-control" [(ngModel)]="vehicle.location"
                                                            placeholder="Location">
                                                            <option [value]="location.id"
                                                                *ngFor="let location of locations;let i=index;">
                                                                {{location.name}}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group col-6 nopadding">
                                                    <label>Rental Company</label>
                                                    <div class="input-group">
                                                        <select class="form-control" [(ngModel)]="vehicle.loanerCarName"
                                                            placeholder="Model">
                                                            <option [value]="rental.name"
                                                                *ngFor="let rental of rentals;let i=index;">
                                                                {{rental.name}}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group col-6 nopadding"
                                                    *ngIf="vehicle.loanerCarName !=  null && vehicle.loanerCarName !=''">
                                                    <label for="loanerCarName">Rental Due
                                                        Date</label>
                                                    <div class="input-group">
                                                        <input type="date" class="form-control"
                                                            (change)="onChangeVehicleCalendarRental($event, vehicle)"
                                                            [ngModel]="vehicle.rentalDate |  date:'yyyy-MM-dd'">

                                                    </div>
                                                </div>

                                                <div class="form-group col-6 nopadding">
                                                    <label>Target Date</label>
                                                    <div class="input-group">
                                                        <input type="date" class="form-control"
                                                            [disabled]="user.allowChangeJobTargetDate == false"
                                                            (change)="onChangeVehicleCalendar($event, vehicle)"
                                                            [ngModel]="vehicle.targetDate |  date:'yyyy-MM-dd'">

                                                    </div>
                                                </div>
                                                <div class="input-group"
                                                    *ngIf="vehicle.targetDateChangeReason != null && vehicle.targetDateChangeReason != '' ">
                                                    <div class="form-group col-12 nopadding">
                                                        <label>Reason for target date change</label>
                                                        <div class="input-group">
                                                            <input type="text" class="form-control" placeholder="Notes"
                                                                disabled [(ngModel)]="vehicle.targetDateChangeReason" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="input-group">
                                                    <div class="form-group col-12 nopadding">
                                                        <label>Notes/Comments</label>
                                                        <div class="input-group">
                                                            <input type="text" class="form-control" placeholder="Notes"
                                                                [(ngModel)]="vehicle.comments" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group col-12 nopadding">
                                                    <label>Status</label>
                                                    <div class="input-group">
                                                        <select class="form-control" [(ngModel)]="vehicle.status"
                                                            placeholder="status" #status
                                                            [disabled]="user.allowUpdateVehicleStatus == false"
                                                            (change)="onChangeStatus($event, status.value)">
                                                            <option *ngFor="let option of statuss; let i=index"
                                                                value="{{option.id}}">
                                                                {{option.name}}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="input-group">
                                                    <div class="form-group col-12 nopadding">
                                                        <label></label>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade show" id="nav-prior-damage" role="tabpanel">
                                        <div class="col-12 nopadding">
                                            <label for="placeholder">Prior Damages {{getPriorDamageWordCount()}}
                                                words
                                                (500
                                                Max)</label>
                                            <textarea [(ngModel)]="vehicle.priorDamage"
                                                (keyup.enter)="onSavePriorDamage(vehicle)" rows="10"
                                                class="form-control mb-12"> </textarea>
                                            <div class="input-group">
                                                <div class="form-group col-6 nopadding">
                                                    <label> </label>
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                </div>
                                <div class="card-footer" title="Click to Exit" style="padding:2px"
                                    (click)="editModeVehicle=!editModeVehicle">
                                    <div class="btn btn-primary btn-sm" title="Save"
                                        *ngIf="user.allowAddAndUpdateVehicle == true && vehicle.id>0"
                                        (click)="createVehicle(vehicle); editModeVehicle=!editModeVehicle;">
                                        <i class="bi-save"></i>
                                    </div>
                                    <div class="btn btn-primary btn-sm"
                                        *ngIf="user.allowAddAndUpdateVehicle == true && vehicle.id>0" title="Print"
                                        (click)="printPage('print-content-vehicle','vehicle'); editModeVehicle=!editModeVehicle;">
                                        <i class="bi-printer"></i>
                                    </div>
                                    <div class="btn btn-primary btn-sm" title="VIP"
                                        *ngIf="user.allowAddAndUpdateVehicle == true && vehicle.id>0"
                                        (click)="special(vehicle); editModeVehicle=!editModeVehicle;">
                                        <i class="bi-star"></i>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h6 class="accordion-header" id="headingTwo">
                        <button class="accordion-button  accordion-title collapsed" type="button"
                            data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false"
                            aria-controls="collapseTwo">
                            <i
                                class="bi bi-newspaper text-center d-flex align-items-center justify-content-center h-100"></i>
                            Jobs[{{jobCompletedCount}}/{{jobs.length}}]
                        </button>
                    </h6>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                        data-bs-parent="#accordionParent">
                        <div class="accordion-body">
                            <label *ngIf="services" for="service">Pre-defined jobs [{{services.length}}]</label>


                            <div class="card-text nopadding" *ngIf="user.allowAddService == true">
                                <li class="dropdown">
                                    <a class="dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">Add
                                        Jobs
                                        <i class="bi-card-list"></i>
                                    </a>
                                    <div class="dropdown-menu">
                                        <ng-container *ngFor="let service of services; let i=index">
                                            <a (click)="addVehicleJob(service)" class="dropdown-item">
                                                {{service.name}} </a>
                                        </ng-container>
                                    </div>
                                </li>
                            </div>
                            <div><br></div>
                            <p class="card-text nopadding">
                            </p>
                            <div>
                                <table *ngIf="jobs.length>0" class="col-12" cdkDropList
                                    (cdkDropListDropped)="dropped($event)">
                                    <tr>
                                        <th>Jobs[{{jobs.length}}]</th>
                                        <!-- <th style="text-align: center; width: 5%"><i class="bi-trash"></i></th>
                                        <th style="text-align: center; width: 30%"><i class="bi-people"></i></th>
                                        <th style="text-align: center; width: 25%"><i class="bi-calendar"></i></th>
                                        <th style="text-align: center; width: 5%"><i class="bi-calendar-check"></i></th> -->

                                    </tr>
                                    <tr *ngFor="let job of jobs; let i=index" (click)="setJobId(job.id)"
                                        style="padding: 50px;"
                                        [style.background-color]="job.id == currentJobId? '#0d6efd' : (true ? 'white' : 'white')">
                                        <td colspan="5" width="100%"
                                            [style.border-color]="job.status == 1? 'coral' : (true ? 'white' : 'white')">
                                            <table width="100%">
                                                <tr>
                                                    <td colspan="5">
                                                        <div class="input-group">
                                                            <button class="btn btn-outline-secondary"
                                                                cdkDrag>{{i+1}}</button>
                                                            <input for="job name" type="text" class="form-control"
                                                                [(ngModel)]="job.name"
                                                                (keyup.enter)="onEnter('job name',job)">

                                                            <div class="input-group-append">
                                                                <button class="btn btn-outline-secondary"><i
                                                                        class="bi-trash"
                                                                        (click)="deleteVehicleJob($event.target, job)"></i></button>
                                                                <!-- <input type="checkbox"
                                                                    (change)="deleteVehicleJob($event.target, job)"> -->
                                                            </div>
                                                        </div>
                                                    </td>

                                                </tr>
                                                <tr>
                                                    <td>
                                                        <select class="form-control" [(ngModel)]="job.jobRequestType"
                                                            placeholder="Job Requst Type" #jobRequestType
                                                            (change)="onChangeJobJobRequestType($event, jobRequestType.value, job)">
                                                            <option
                                                                *ngFor="let jobRequestType of jobRequestTypes let i=index"
                                                                value="{{jobRequestType.id}}">
                                                                {{jobRequestType.name}}
                                                            </option>
                                                        </select>
                                                    </td>
                                                    <td>
                                                        <select class="form-control" [(ngModel)]="job.paymentMethod"
                                                            placeholder="Payment Method" #paymentMethod
                                                            (change)="onChangeJobPaymentMethod($event, paymentMethod.value, job)">
                                                            <option
                                                                *ngFor="let paymentMethod of paymentMethods let i=index"
                                                                value="{{paymentMethod.id}}">
                                                                {{paymentMethod.name}}
                                                            </option>
                                                        </select>
                                                    </td>
                                                </tr>
                                                <tr>

                                                    <td>
                                                        <select #device [disabled]="user.allowAssignUser == false"
                                                            [(ngModel)]="job.employeeId" class="form-control"
                                                            (change)="onChangeEmployee2($event, device.value,job)">
                                                            <option [value]="employee.id"
                                                                *ngFor="let employee of employees;let i=index;">
                                                                {{employee.firstName}} {{employee.lastName}}
                                                            </option>
                                                        </select>

                                                    </td>
                                                    <td>
                                                        <div class="input-group">
                                                            <input type="date" *ngIf="job.employeeId > 0"
                                                                class="form-control"
                                                                [disabled]="user.allowChangeJobTargetDate == false"
                                                                (change)="onChangeCalendar($event, job)"
                                                                max="{{vehicle.targetDate | date:'yyyy-MM-dd'}}"
                                                                [ngModel]="job.targetDate |  date:'yyyy-MM-dd'">
                                                            <div class="input-group-append">
                                                                <input type="checkbox" [checked]="isJobChecked(job)"
                                                                    [disabled]="user.allowUpdateJobStatus == false"
                                                                    *ngIf="job.employeeId > 0 && job.targetDate != null"
                                                                    (change)="updateJobStatus(job)">
                                                            </div>
                                                        </div>
                                                    </td>

                                                </tr>
                                                <tr>
                                                    <td colspan="5">

                                                        <textarea class="form-control" style="min-width: 100%"
                                                            (keyup.enter)="onEnter('job notes',job)"
                                                            [(ngModel)]="job.notes" placeholder="job notes">
                                                                            </textarea>


                                                        <!-- <div class="input-group-append">
                                                                        <button style="background-color: white;"
                                                                            (click)="saveJobNotes(job)"><i
                                                                                class="bi-save"></i></button>
                                                                    </div> -->

                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>

                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h6 class="accordion-header" id="headingThree">
                        <button class="accordion-button  accordion-title collapsed" type="button"
                            data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false"
                            aria-controls="collapseThree">
                            <i
                                class="bi bi-bank text-center d-flex align-items-center justify-content-center h-100"></i>
                            Payments [{{payments.length}}]
                            <span *ngIf="vehicle.paid==true">
                                <button class="btn btn-success btn-xs" [disabled]="user.allowAddPayment == false"
                                    (click)="changePaidStatus(vehicle, false)">Paid</button></span>
                            <span *ngIf="vehicle.paid==false">
                                <button class="btn btn-outline-secondary btn-xs"
                                    [disabled]="user.allowAddPayment == false"
                                    (click)="changePaidStatus(vehicle, true)">N.Paid</button></span>
                        </button>
                    </h6>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                        data-bs-parent="#accordionParent">
                        <div class="accordion-body">


                            <label *ngIf="paymentTypes" for="service">Pre-defined Payments
                                [{{paymentTypes.length}}]</label>


                            <div class="card-text nopadding" *ngIf="user.allowAddPayment == true">
                                <li class="dropdown">
                                    <a class="dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">Add
                                        Payments
                                        <i class="bi-card-list"></i>
                                    </a>
                                    <div class="dropdown-menu">
                                        <ng-container *ngFor="let paymentType of paymentTypes; let i=index">
                                            <a (click)="addVehiclePayment(paymentType)" class="dropdown-item">
                                                {{paymentType.name}} </a>
                                        </ng-container>
                                    </div>
                                </li>
                            </div>
                            <div><br></div>
                            <p class="card-text nopadding">
                            </p>
                            <div style="width: 100%;">
                                <table *ngIf="payments.length>0" style="width: 100%;" cdkDropList
                                    (cdkDropListDropped)="droppedPayment($event)">
                                    <tr>
                                        <th>Payments[{{payments.length}}]</th>

                                    </tr>
                                    <tr *ngFor="let payment of payments; let i=index" (click)="setPaymentId(payment.id)"
                                        style="padding: 50px;"
                                        [style.background-color]="payment.id == currentPaymentId? '#0d6efd' : (true ? 'white' : 'white')">
                                        <td colspan="5" width="100%">
                                            <table width="100%">
                                                <tr>
                                                    <td colspan="5">
                                                        <div class="input-group">
                                                            <button class="btn btn-outline-secondary"
                                                                cdkDrag>{{i+1}}</button>
                                                            <input for="payment name" type="text" class="form-control"
                                                                [(ngModel)]="payment.name"
                                                                (keyup.enter)="onEnterPayment('payment name',payment)">

                                                            <div class="input-group-append">
                                                                <button class="btn btn-outline-secondary"><i
                                                                        class="bi-trash"
                                                                        (click)="deleteVehiclePayment($event.target, payment)"></i></button>

                                                            </div>
                                                        </div>
                                                    </td>

                                                </tr>
                                                <tr>
                                                    <td>
                                                        <select class="form-control"
                                                            [(ngModel)]="payment.paymentMethodId"
                                                            placeholder="Payment Method" #paymentMethodId
                                                            (change)="onChangePaymentMethodId($event, paymentMethodId.value, payment)">
                                                            <option
                                                                *ngFor="let paymentMethod of paymentMethods let i=index"
                                                                value="{{paymentMethod.id}}">
                                                                {{paymentMethod.name}}
                                                            </option>
                                                        </select>
                                                    </td>
                                                    <td>
                                                        <select class="form-control"
                                                            [(ngModel)]="payment.paymentStatusId"
                                                            placeholder="Payment Status" #paymentStatus
                                                            (change)="onChangePaymentStatusId($event, paymentStatus.value, payment)">
                                                            <option
                                                                *ngFor="let paymentStatus of paymentStatuss let i=index"
                                                                value="{{paymentStatus.id}}">
                                                                {{paymentStatus.name}}
                                                            </option>
                                                        </select>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="input-group">
                                                            <input type="text" *ngIf="payment.id > 0"
                                                                class="form-control"
                                                                (keyup.enter)="onEnterPayment('payment amount',payment)"
                                                                [(ngModel)]="payment.amount">

                                                        </div>
                                                    </td>

                                                    <td>
                                                        <div class="input-group">
                                                            <input type="date" *ngIf="payment.id > 0"
                                                                class="form-control"
                                                                (change)="onChangeVehiclePaymentCalendar($event, payment)"
                                                                [ngModel]="payment.date |  date:'yyyy-MM-dd'">

                                                        </div>
                                                    </td>

                                                </tr>
                                                <tr>
                                                    <td colspan="5">

                                                        <textarea class="form-control" style="min-width: 100%"
                                                            (keyup.enter)="onEnterPayment('payment notes',payment)"
                                                            [(ngModel)]="payment.notes" placeholder="payment notes">
                                                                                </textarea>


                                                        <!-- <div class="input-group-append">
                                                                            <button style="background-color: white;"
                                                                                (click)="saveJobNotes(job)"><i
                                                                                    class="bi-save"></i></button>
                                                                        </div> -->

                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>

                                </table>
                            </div>


                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h6 class="accordion-header" id="headingFive">
                        <button class="accordion-button  accordion-title collapsed" type="button"
                            data-bs-toggle="collapse" (click)="getVehicleHistory(vehicle.id)"
                            data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                            <i
                                class="bi bi-card-list text-center d-flex align-items-center justify-content-center h-100"></i>
                            Vehicle Update History
                        </button>
                    </h6>
                    <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive"
                        data-bs-parent="#accordionParent">
                        <div class="accordion-body" style="width:300px;overflow-x:scroll;">
                            <label *ngIf=" vehicleHistories.length> 0">Vehicle
                                Update
                                History</label>
                            <table style="overflow-x:scroll" *ngIf=" vehicleHistories.length> 0">
                                <tr>
                                    <th style="text-align: center">#</th>
                                    <th style="text-align: center">Id</th>
                                    <th style="text-align: center">Name</th>
                                    <th style="text-align: center">Type</th>
                                    <th style="text-align: center">Value</th>
                                    <th style="text-align: center">Time</th>
                                </tr>
                                <tr *ngFor="let vehicleHistory of vehicleHistories; let i=index">
                                    <td style="text-align: center">{{i}}</td>
                                    <td style="text-align: center">{{vehicleHistory.id}}</td>
                                    <td style="text-align: center">{{vehicleHistory.name}}</td>
                                    <td style="text-align: center">
                                        <select [(ngModel)]="vehicleHistory.type">
                                            <option value="0">add</option>
                                            <option value="1">update</option>
                                            <option value="2">remove</option>
                                        </select>
                                    </td>
                                    <td style="text-align: center">{{vehicleHistory.value}}</td>
                                    <td style="text-align: center">{{vehicleHistory.createdAt | date: 'short'}}</td>

                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h6 class="accordion-header" id="headingSix">
                        <button class="accordion-button  accordion-title" type="button" data-bs-toggle="collapse"
                            (click)="getProductionOverview()" data-bs-target="#collapseSix" aria-expanded="true"
                            aria-controls="collapseSix">
                            <i
                                class="bi bi-list-stars text-center d-flex align-items-center justify-content-center h-100"></i>
                            Production Overview
                        </button>
                    </h6>
                    <div id="collapseSix" class="show" aria-labelledby="headingSix">
                        <div class="accordion-body">
                            <table *ngIf="statusOverview.length> 0" style="width: 100%">
                                <tr class="col-md-3" (click)="applyStatusfilter('All')">
                                    <th style="text-align: center">Id</th>
                                    <th style="text-align: center">Status</th>
                                    <th style="text-align: center"><i class="bi-calendar-check"></i></th>
                                </tr>
                                <tr *ngFor="let groupBy of statusOverview" (click)="applyStatusfilter(groupBy.status)"
                                    title="Click to view">
                                    <td style="text-align: center">{{groupBy.status}}</td>
                                    <ng-container *ngFor="let status of statuss; let i=index">
                                        <td *ngIf="status.id==groupBy.status">{{status.name}}</td>
                                    </ng-container>
                                    <td style="text-align: center">{{groupBy.count}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h6 class="accordion-header" id="headingSeven">
                        <button class="accordion-button  accordion-title collapsed" type="button"
                            data-bs-toggle="collapse" (click)="getLocationOverviews()" data-bs-target="#collapseSeven"
                            aria-expanded="false" aria-controls="collapseSeven">
                            <i
                                class="bi bi-list-stars text-center d-flex align-items-center justify-content-center h-100"></i>
                            Location Overview
                        </button>
                    </h6>
                    <div id="collapseSeven" class="accordion-collapse collapse" aria-labelledby="headingSeven"
                        data-bs-parent="#accordionParent">
                        <div class="accordion-body">
                            <table *ngIf="locationOverview.length> 0" style="width: 100%">
                                <tr class="col-md-3" (click)="applyLocationfilter('All')">
                                    <th style="text-align: center">Id</th>
                                    <th style="text-align: center">Location</th>
                                    <th style="text-align: center"><i class="bi-calendar-check"></i></th>
                                </tr>
                                <tr *ngFor="let groupBy of locationOverview" title="Click to view"
                                    (click)="applyLocationfilter(groupBy.status)">
                                    <td style="text-align: center">{{groupBy.status}}</td>
                                    <ng-container *ngFor="let status of locations; let i=index">
                                        <td *ngIf="status.id==groupBy.status">{{status.name}}</td>
                                    </ng-container>
                                    <td style="text-align: center">{{groupBy.count}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h6 class="accordion-header" id="headingTen">
                        <button class="accordion-button  accordion-title collapsed" type="button"
                            data-bs-toggle="collapse" (click)="getMyJobs(this.user.id)" data-bs-target="#collapseTen"
                            aria-expanded="false" aria-controls="collapseTen">
                            <i
                                class="bi bi-list-stars text-center d-flex align-items-center justify-content-center h-100"></i>
                            My Job
                        </button>
                    </h6>
                    <div id="collapseTen" class="accordion-collapse collapse" aria-labelledby="headingTen"
                        data-bs-parent="#accordionParent">
                        <div class="accordion-body">

                            <div class="list-group" *ngFor="let vehicle of vehiclesJob; let i=index">
                                <a class="list-group-item list-group-item-action active py-1">
                                    <i class="bi bi-truck"></i> {{i+1}}. #{{vehicle.id}} {{vehicle.year}}
                                    {{vehicle.make}} {{vehicle.model}}
                                    {{vehicle.color}}
                                </a>
                                <a class="list-group-item list-group-item-action py-0">
                                    <i class="bi bi-truck"></i> {{vehicle.description}}
                                </a>
                                <a class="list-group-item list-group-item-action py-0">
                                    <i class="bi bi-menu-up"></i>
                                    <ng-container *ngFor="let jobRequestType of jobRequestTypes; let i=index">
                                        <ng-container *ngIf="vehicle.jobRequestType==jobRequestType.id">
                                            <strong> {{jobRequestType.name}}</strong></ng-container>
                                    </ng-container>
                                </a>
                                <a class="list-group-item list-group-item-action py-0"
                                    style="background-color: lightgrey;">
                                    <i class="bi bi-menu-up"></i>
                                    <ng-container *ngFor="let option of statuss; let i=index">
                                        <strong *ngIf="vehicle.status==option.id"> {{option.name}}</strong>
                                    </ng-container>
                                </a>
                                <ng-container *ngFor="let job of vehicle.jobs; let j=index ">
                                    <a class="list-group-item list-group-item-action py-0">
                                        <strong>{{j+1}}.</strong> {{job.name}} => {{job.notes}}
                                    </a>
                                    <a class="list-group-item list-group-item-action py-0">
                                        <input type="checkbox" [checked]="isJobChecked(job)"
                                            [disabled]="user.allowUpdateJobStatus == false"
                                            *ngIf="job.employeeId > 0 && job.targetDate != null"
                                            (change)="updateJobStatus(job)">
                                        by {{job.targetDate | date}}
                                    </a>
                                </ng-container>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- <div class="accordion-item">
                    <h6 class="accordion-header" id="headingNine">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseNine" aria-expanded="false" aria-controls="collapseNine">
                            #9
                        </button>
                    </h6>
                    <div id="collapseNine" class="accordion-collapse collapse" aria-labelledby="headingNine"
                        data-bs-parent="#accordionParent">
                        <div class="accordion-body">
                            <strong>This is the third item's accordion body.</strong> It is hidden by default, until
                            the
                            collapse plugin adds the appropriate classes that we use to style each element. These
                            classes control the overall appearance, as well as the showing and hiding via CSS
                            transitions. You can modify any of this with custom CSS or overriding our default
                            variables.
                            It's also worth noting that just about any HTML can go within the
                            <code>.accordion-body</code>, though the transition does limit overflow.
                        </div>
                    </div>
                </div> -->

            </div>

        </div>
        <div class="col"
            [ngClass]="showAccordian==false? 'col-xl-12 col-lg-12 col-md-12 col-sm-12' : (true ? 'my-fluid-col' : 'my-fluid-col')">
            <div class="row">
                <div class="col-md-12 px-1">
                    <div class="card card-primary card-outline">
                        <div class="card-header" style="padding: 0.1rem rem 0.25rem;">

                            <div class="card-title" *ngIf="showAccordian==true" (click)="showAccordian =!showAccordian">

                                <i class="bi bi-arrow-bar-left" title="Toggle left panel"></i>
                                Vehicles
                                <span *ngIf="vehicles.length > 0"> [{{vehicles.length}}] </span>
                            </div>

                            <div class="card-title" *ngIf="showAccordian==false"
                                (click)="showAccordian =!showAccordian">

                                <i class="bi bi-arrow-bar-right" title="Toggle left panel"></i>
                                Vehicles
                                <span *ngIf="vehicles.length > 0"> [{{vehicles.length}}] </span>
                            </div>

                            <div class="card-tools">
                                <div class="input-group input-group-sm">
                                    <input type="text" class="form-control" [(ngModel)]="searchInput"
                                        (input)="onSearchChange($event)" placeholder="Search anything">

                                    <div class="input-group-append">
                                        <div class="btn btn-primary" (click)="searchLastName(searchInput)">
                                            <i class="bi-search" title="Search"></i>
                                        </div>
                                    </div>
                                    <!-- <div class="input-group-append">
                                    <div class="btn btn-primary" *ngIf="vehicle.customer.id > 0"
                                        (click)="deleteCustomer(vehicle.customer.id)">
                                        <i class="bi-trash"></i>
                                    </div>
                                </div> -->
                                    <!-- <div class="input-group-append">
                                        <div class="btn btn-primary" *ngIf="user.allowUpdateCustomerInfo == true"
                                            (click)="reset()">
                                            <i class="bi-plus-lg" ngbTooltip="Add New"></i>
                                        </div>
                                    </div> -->
                                    <div class="input-group-append">
                                        <div class="btn btn-primary" *ngIf="currentUser && archived == false"
                                            (click)="searchVehicle(5)">
                                            <i class="bi-arrow-repeat" title="Refresh"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="card-body table-responsive p-1">

                            <nav *ngIf="currentUser">
                                <div class="nav nav-tabs shadow-sm" id="nav-tab" role="tablist2">
                                    <button class="nav-link active" id="nav-vehicle-list-tab" data-bs-toggle="tab"
                                        data-bs-target="#nav-vehicle-list" type="button" role="tab"
                                        aria-controls="nav-vehicle-list" aria-selected="true">Overview</button>

                                    <button class="nav-link" id="nav-vehicle-payment-tab" data-bs-toggle="tab"
                                        *ngIf="vehicle.id>0" data-bs-target="#nav-vehicle-payment" type="button"
                                        role="tab" aria-controls="nav-vehicle-payment"
                                        aria-selected="true">Payment[{{payments.length}}]</button>

                                    <button class="nav-link" id="nav-vehicle-job-tab" data-bs-toggle="tab"
                                        *ngIf="vehicle.id>0" data-bs-target="#nav-vehicle-job" type="button" role="tab"
                                        aria-controls="nav-vehicle-job" (click)="fillCalendar()"
                                        aria-selected="false">Jobs[{{jobCompletedCount}}/{{jobs.length}}]</button>

                                    <button class="nav-link" id="nav-vehicle-receipt-tab" data-bs-toggle="tab"
                                        *ngIf="vehicle.id>0" data-bs-target="#nav-vehicle-receipt" type="button"
                                        role="tab" aria-controls="nav-vehicle-receipt"
                                        aria-selected="false">Receipt[{{receipts.length}}]</button>

                                    <button class="nav-link" id="nav-vehicle-list2-tab" data-bs-toggle="tab"
                                        data-bs-target="#nav-vehicle-list2" type="button" role="tab"
                                        *ngIf="vehicles.length>0" aria-controls="nav-vehicle-list2"
                                        (click)="fillCalendar();calendarKicker()" aria-selected="true">Schedule</button>
                                </div>
                            </nav>
                            <div class="tab-content px-1" id="nav-tabContent">
                                <div class="tab-pane fade show active" id="nav-vehicle-list" role="tabpanel" #taggroup
                                    style="min-height: 500px;" aria-labelledby="nav-vehicle-list-tab">
                                    <div class="row mb-2">
                                        <div class="col-sm-6">

                                        </div>

                                    </div>
                                    <div class="col-12 nopadding">
                                        <table class="table-bordered table-hover col-12" *ngIf="vehicles.length >0"
                                            cdkDropList (cdkDropListDropped)="droppedVehicle($event)">
                                            <tr style="background-color: #e7f1ff;">
                                                <th style="text-align: center" (click)="sortList('id')">#</th>
                                                <th style="text-align: center" (click)="sortList('year')">Year</th>
                                                <th style="text-align: center" (click)="sortList('make')">Make</th>
                                                <th style="text-align: center" (click)="sortList('model')">Model</th>
                                                <th style="text-align: center" (click)="sortList('color')">Color</th>
                                                <th style="text-align: center" (click)="sortList('jobRequestType')">Job
                                                    Type
                                                </th>
                                                <!-- <th style="text-align: center" (click)="sortList('paymentMethod')">
                                                    Payment
                                                    Method
                                                </th> -->
                                                <!-- <th style="text-align: center" (click)="sortList('approvalStatus')">
                                                    Approval
                                                    Status
                                                </th> -->
                                                <th style="text-align: center" (click)="sortList('status')">Status
                                                </th>
                                                <th style="text-align: center" (click)="sortList('assignedTo')">Assigned
                                                    To</th>
                                                <!-- <th style="text-align: center" (click)="sortList('inTakeWay')">
                                                    InTake
                                                    Way
                                                </th> -->
                                                <!-- <th style="text-align: center" (click)="sortList('insuranceCompany')">
                                                    Ins
                                                    Co.</th> -->
                                                <!-- <th style="text-align: center">Comments</th> -->
                                                <!-- <th style="text-align: center">Name/Phone</th> -->
                                                <!-- <th style="text-align: center">Current Job</th> -->

                                                <th style="text-align: center" (click)="sortList('keyLocation')">Key
                                                    Location
                                                </th>
                                                <!-- <th style="text-align: center" (click)="sortList('price')">$</th> -->
                                                <th style="text-align: center" (click)="sortList('paid')">Paid</th>
                                                <!-- <th style="text-align: center" (click)="sortList('paymentStatus')">
                                                    Payment
                                                    Status
                                                </th> -->
                                                <th style="text-align: center" (click)="sortList('createdAt')">Arrival
                                                </th>
                                                <!-- <th style="text-align: center" (click)="sortList('daysInShop')">Days In
                                                    Shop
                                                </th> -->
                                                <th style="text-align: center" (click)="sortList('targetDateCountDown')"
                                                    title="Due in days">Due Day
                                                </th>
                                                <!-- <th style="text-align: center">Rentals</th> -->
                                                <th style="text-align: center" (click)="sortList('rentalCountDown')"
                                                    title="Due in days">Rental</th>
                                                <th style="text-align: center" (click)="sortList('location')">Location
                                                </th>
                                                <th style="text-align: center">Archive</th>
                                            </tr>
                                            <ng-container
                                                *ngFor="let vehicle of vehicles; let i = index;  let even=even">
                                                <tr id="{{vehicle.id}}"
                                                    [style.background-color]="i == cindex? 'lightyellow' : (even ? 'white' : 'white')"
                                                    (click)="getDetail(vehicle, i)" cdkDrag>
                                                    <ng-container *ngIf="vehicle.special==true">
                                                        <td style="border-left: 2px solid RGB(92, 184, 92);">
                                                            {{vehicle.id}}
                                                        </td>
                                                    </ng-container>
                                                    <ng-container *ngIf="vehicle.special==false">
                                                        <td>{{vehicle.id}}</td>
                                                    </ng-container>
                                                    <td>{{vehicle.year}} </td>
                                                    <td>{{vehicle.make}} </td>
                                                    <td>{{vehicle.model}} </td>
                                                    <td style="color: {{vehicle.color}}">{{vehicle.color}} </td>
                                                    <td>
                                                        <select [(ngModel)]="vehicle.jobRequestType"
                                                            placeholder="Job Requst Type" #jobRequestType
                                                            (change)="onChangeJobRequestType($event, jobRequestType.value)">
                                                            <option
                                                                *ngFor="let jobRequestType of jobRequestTypes let i=index"
                                                                value="{{jobRequestType.id}}">
                                                                {{jobRequestType.name}}
                                                            </option>
                                                        </select>
                                                    </td>
                                                    <!-- <td>
                                                        <select [(ngModel)]="vehicle.paymentMethod"
                                                            placeholder="Payment Method" #paymentMethod
                                                            (change)="onChangePaymentMethod($event, paymentMethod.value)">
                                                            <option
                                                                *ngFor="let paymentMethod of paymentMethods let i=index"
                                                                value="{{paymentMethod.id}}">
                                                                {{paymentMethod.name}}
                                                            </option>
                                                        </select>
                                                    </td> -->
                                                    <!-- <td>
                                                        <select [(ngModel)]="vehicle.approvalStatus"
                                                            placeholder="Vehicle Approval Status" #approvalStatus
                                                            (change)="onChangeApprovalStatus($event, approvalStatus.value)">
                                                            <option
                                                                *ngFor="let approvalStatus of approvalStatuss; let i=index"
                                                                value="{{approvalStatus.id}}">
                                                                {{approvalStatus.name}}
                                                            </option>
                                                        </select>
                                                    </td> -->
                                                    <td>
                                                        <select [(ngModel)]="vehicle.status" placeholder="status"
                                                            #device [disabled]="user.allowUpdateVehicleStatus == false"
                                                            (change)="onChangeStatus($event, device.value)">
                                                            <option *ngFor="let option of statuss; let i=index"
                                                                value="{{option.id}}">
                                                                {{option.name}}
                                                            </option>
                                                        </select>


                                                    </td>
                                                    <td>
                                                        <select [(ngModel)]="vehicle.assignedTo" placeholder="status"
                                                            #assignedTo
                                                            [disabled]="user.allowUpdateVehicleStatus == false"
                                                            (change)="onChangeAssignedTo($event, assignedTo.value)">
                                                            <option *ngFor="let employee of employees; let i=index"
                                                                value="{{employee.id}}">
                                                                {{employee.firstName}} {{employee.lastName}}
                                                            </option>
                                                        </select>


                                                    </td>
                                                    <!-- <td>
                                                        <select [(ngModel)]="vehicle.inTakeWay"
                                                            placeholder="Vehicle inTake Way" #inTakeWay
                                                            (change)="onChangeInTakeWay($event, inTakeWay.value)">
                                                            <option *ngFor="let inTakeWay of inTakeWays; let i=index"
                                                                value="{{inTakeWay.id}}">
                                                                {{inTakeWay.name}}
                                                            </option>
                                                        </select>
                                                    </td> -->
                                                    <!-- <td>{{vehicle.insuranceCompany}}</td> -->
                                                    <!-- <td>

                                                        <small>
                                                            {{vehicle.workRequest}}
                                                        </small>
                                                        <small *ngIf="vehicle.comments !='' ">
                                                            (<b>{{vehicle.comments}}</b>)
                                                        </small>
                                                    </td> -->
                                                    <!-- <td>
                                                        <select [(ngModel)]="vehicle.currentJobNumber"
                                                            class="selectTest" *ngIf="vehicle.jobs.length > 0"
                                                            placeholder="Current Job" #currentJob
                                                            [disabled]="user.allowUpdateJobStatus == false"
                                                            (change)="onChangeCurrentJob($event, currentJob.value)">
                                                            <option *ngFor="let job of vehicle.jobs; let i=index"
                                                                value="{{job.id}}">
                                                                <ng-container *ngIf="job.status==1">
                                                                    <span title="Done">&#9724; {{job.name}}</span>
                                                                </ng-container>
                                                                <ng-container *ngIf="job.status==0">
                                                                    <span title="Not Done">&#9723; {{job.name}}</span>
                                                                </ng-container>
                                                                <br>
                                                                <ng-container *ngFor="let employee of employees">
                                                                    <ng-container *ngIf="employee.id == job.employeeId">
                                                                        <span>  {{employee.firstName}}
                                                                            {{employee.lastName}}</span>
                                                                    </ng-container>
                                                                </ng-container>
                                                            </option>
                                                        </select>
                                                    </td> -->
                                                    <!-- <td>{{ vehicle.customer.firstName}} {{ vehicle.customer.lastName}}
                                                        {{
                                                        formatPhoneNumber(vehicle.customer.phone)}}</td> -->

                                                    <td>
                                                        <select [(ngModel)]="vehicle.keyLocation"
                                                            placeholder="Key Location" #keyLocation
                                                            [disabled]="user.allowUpdateVehicleStatus == false"
                                                            (change)="onChangeKeyLocation($event, keyLocation.value)">
                                                            <option *ngFor="let employee of employees; let i=index"
                                                                value="{{employee.id}}">
                                                                {{employee.firstName}} {{employee.lastName}}
                                                            </option>
                                                        </select>


                                                    </td>
                                                    <!-- <td>
                                                        <div *ngIf="vehicle.price> 0">{{vehicle.price}}</div>
                                                    </td> -->
                                                    <td>
                                                        <div *ngIf="vehicle.paid==true">
                                                            <button class="btn btn-success btn-xs"
                                                                [disabled]="user.allowAddPayment == false"
                                                                (click)="changePaidStatus(vehicle, false)">Paid</button>
                                                        </div>
                                                        <div *ngIf="vehicle.paid==false">
                                                            <button class="btn btn-outline-secondary btn-xs"
                                                                [disabled]="user.allowAddPayment == false"
                                                                (click)="changePaidStatus(vehicle, true)">N.Paid</button>
                                                        </div>
                                                    </td>
                                                    <!-- <td>

                                                        <select [(ngModel)]="vehicle.paymentStatus"
                                                            placeholder="Payment Status" #paymentStatus
                                                            (change)="onChangePaymentStatus($event, paymentStatus.value)">
                                                            <option
                                                                *ngFor="let paymentStatus of paymentStatuss let i=index"
                                                                value="{{paymentStatus.id}}">
                                                                {{paymentStatus.name}}
                                                            </option>
                                                        </select>
                                                    </td> -->
                                                    <td>{{vehicle.createdAt | date}} </td>
                                                    <!-- <td *ngIf="vehicle.daysInShop>6"
                                                        style="background-color: yellow;text-align: center">
                                                        {{vehicle.daysInShop}}</td>

                                                    <td style="text-align: center" *ngIf="vehicle.daysInShop<7">
                                                        {{vehicle.daysInShop}}
                                                    </td> -->

                                                    <!-- <td>{{vehicle.targetDate | date}}</td> -->
                                                    <td style="text-align: center">
                                                        <ng-container
                                                            *ngIf="vehicle.targetDate != null && vehicle.targetDateCountDown >= 0">
                                                            <div>{{vehicle.targetDateCountDown}}</div>
                                                        </ng-container>
                                                        <ng-container
                                                            *ngIf="vehicle.targetDate != null && vehicle.targetDateCountDown < 0">
                                                            <div style="color:red">{{vehicle.targetDateCountDown}}</div>
                                                        </ng-container>
                                                    </td>

                                                    <!-- <td>{{vehicle.loanerCarName}}</td> -->
                                                    <td style="text-align: center">
                                                        <ng-container
                                                            *ngIf="vehicle.loanerCarName !=null && vehicle.loanerCarName != '' && 
                                                            vehicle.rentalDate != null && vehicle.rentalCountDown >= 0 ">
                                                            <div>{{vehicle.rentalCountDown}}</div>
                                                        </ng-container>

                                                        <ng-container *ngIf="vehicle.loanerCarName !=null && vehicle.loanerCarName != '' && 
                                                            vehicle.rentalDate !=null && vehicle.rentalCountDown < 0 ">
                                                            <div style="color:red">{{vehicle.rentalCountDown}}</div>
                                                        </ng-container>
                                                    </td>
                                                    <td>
                                                        <select [(ngModel)]="vehicle.location" placeholder="location"
                                                            #deviceLocation
                                                            (change)="onChangeLocation($event, deviceLocation.value)">
                                                            <option *ngFor="let option of locations; let i=index"
                                                                value="{{option.id}}">
                                                                {{option.name}}
                                                            </option>
                                                        </select>
                                                    </td>
                                                    <td style="text-align: center"><input type="checkbox"
                                                            (change)="archiveVehicle(vehicle)">
                                                    </td>
                                                </tr>

                                            </ng-container>
                                        </table>
                                    </div>
                                </div>
                                <div class="tab-pane fade show " id="nav-vehicle-payment" role="tabpanel" #taggroup
                                    style="min-height: 500px;" aria-labelledby="nav-vehicle-payment-tab">
                                    <div class="row mb-2">
                                        <div class="col-sm-6">

                                        </div>

                                    </div>
                                    <div class="col-12 nopadding">
                                        <div class="input-group mb-12">
                                            <label for="placeholder"> </label>
                                            <div class="nopadding" *ngIf="user.allowAddPayment == true">
                                                <li class="dropdown">
                                                    <button type="button" class="dropdown-toggle"
                                                        data-bs-toggle="dropdown" title="Add Payment"
                                                        aria-expanded="false">
                                                        <i class="bi-plus-lg"></i>
                                                    </button>
                                                    <div class="dropdown-menu">
                                                        <ng-container
                                                            *ngFor="let paymentType of paymentTypes; let i=index">
                                                            <a (click)="addVehiclePayment(paymentType)"
                                                                class="dropdown-item">
                                                                {{paymentType.name}} </a>
                                                        </ng-container>
                                                    </div>
                                                </li>
                                            </div>
                                        </div>
                                        <!-- <div class="input-group  mb-12" *ngFor="let payment of payments; let i=index">

                                            <div class="form-group col-3 nopadding">
                                                <label *ngIf="i==0" for="header"># Name</label>
                                                <div class="input-group">
                                                    <button class="btn btn-outline-secondary" cdkDrag>{{i+1}}</button>
                                                    <input for="job name" type="text" class="form-control"
                                                        [(ngModel)]="payment.name"
                                                        (keyup.enter)="onEnterPayment('payment name',payment)">
                                        
                                                </div>

                                            </div>
                                            <div class="form-group col-2 nopadding">
                                                <label *ngIf="i==0" for="vin">Amount</label>
                                                <div class="input-group mb-12">
                                                    <input type="number" class="form-control" placeholder="Amount"
                                                        [(ngModel)]="payment.amount" pattern="[0-9]" />
                                                </div>
                                            </div>
                                            <div class="form-group col-2 nopadding">
                                                <label *ngIf="i==0" for="Payment Method">Payment Method</label>
                                                <div class="input-group">
                                                    <select class="form-control" [(ngModel)]="payment.paymentMethodId"
                                                        placeholder="Model">
                                                        <option [value]="paymentMethod.id"
                                                            *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                            {{paymentMethod.name}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>


                                            <div class="form-group col-2 nopadding">
                                                <label *ngIf="i==0">Payment Status</label>
                                                <div class="input-group">
                                                    <select class="form-control" [(ngModel)]="payment.paymentStatusId"
                                                        placeholder="Model">
                                                        <option [value]="option.id"
                                                            *ngFor="let option of paymentStatuss;let i=index;">
                                                            {{option.name}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group col-3 nopadding">
                                                <label *ngIf="i==0">Date</label>
                                                <div class="input-group">
                                                    <input type="date" class="form-control"
                                                        (change)="onChangeVehiclePaymentCalendar($event, payment)"
                                                        [ngModel]="payment.date |  date:'yyyy-MM-dd'">


                                                    <div class="input-group-append">
                                                        <button class="btn-outline-secondary"
                                                            (click)="deleteVehiclePayment(null, payment)">
                                                            <i class="bi bi-trash"></i>
                                                        </button>
                                                        <button class="btn-outline-secondary"
                                                            (click)="savePayment(payment)"><i
                                                                class="bi-save"></i></button>
                                                    </div>
                                                </div>
                                            </div>

                                        </div> -->
                                        <div class="row mb-2">
                                            <div class="col-sm-6">
    
                                            </div>
    
                                        </div>
                                        <div class="row" cdkDropList (cdkDropListDropped)="droppedPayment($event)">
                                            <div class="col-3 px-2" *ngFor="let payment of payments; let i=index">
                                                <div class="card">
                                                    <div class="card-header" cdkDrag>
                                                        {{ i+1}} {{ payment.name}}
                                                    </div>
                                                    <div class="px-2 py-1">
                                                        <div class="form-group nopadding">
                                                            <label for="header"># Name</label>
                                                            <div class="input-group">
                                                                <!-- <button
                                                                    class="btn btn-outline-secondary">{{i+1}}</button> -->
                                                                <input for="payment name" type="text" class="form-control"
                                                                    [(ngModel)]="payment.name"
                                                                    (keyup.enter)="onEnterPayment('payment name',payment)">

                                                            </div>

                                                        </div>
                                                        <div class="form-group nopadding">
                                                            <label>Amount</label>
                                                            <div class="input-group mb-12">
                                                                <input type="number" class="form-control"
                                                                    placeholder="Amount" [(ngModel)]="payment.amount"
                                                                    pattern="[0-9]" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group nopadding">
                                                            <label>Processing date</label>
                                                            <div class="input-group">
                                                                <input type="date" class="form-control"
                                                                    (change)="onChangeVehiclePaymentCalendar($event, payment)"
                                                                    [ngModel]="payment.date |  date:'yyyy-MM-dd'">

                                                            </div>
                                                        </div>
                                                        <div class="form-group nopadding">
                                                            <label>Comments/Notes</label>
                                                            <div class="input-group">

                                                                <textarea class="form-control"
                                                                    [(ngModel)]="payment.notes" rows="2"
                                                                    (keyup.enter)="onEnterPayment('payment notes',payment)">
                                                                    </textarea>

                                                            </div>

                                                        </div>
                                                        <div class="form-group nopadding">
                                                            <label for="Payment Method">Payment Method</label>
                                                            <div class="input-group">
                                                                <select class="form-control"
                                                                    [(ngModel)]="payment.paymentMethodId"
                                                                    placeholder="Model">
                                                                    <option [value]="paymentMethod.id"
                                                                        *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                                        {{paymentMethod.name}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>


                                                        <div class="form-group nopadding">
                                                            <label>Payment Status</label>
                                                            <div class="input-group">
                                                                <select class="form-control"
                                                                    [(ngModel)]="payment.paymentStatusId"
                                                                    placeholder="Model">
                                                                    <option [value]="option.id"
                                                                        *ngFor="let option of paymentStatuss;let i=index;">
                                                                        {{option.name}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group nopadding">
                                                            <label>Created By</label>
                                                            <div class="input-group">
                                                                <select class="form-control" disabled
                                                                    [(ngModel)]="payment.userId" placeholder="Model">
                                                                    <option [value]="user.id"
                                                                        *ngFor="let user of users;let i=index;">
                                                                        {{user.firstName}} {{user.lastName}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group nopadding">
                                                            <label>Created At</label>
                                                            <div class="input-group">
                                                                <div>{{ payment.createdAt | date}}</div>
                                                            </div>
                                                        </div>

                                                        <div class="form-group nopadding">
                                                            <label>&nbsp;</label>

                                                        </div>
                                                        <div class="card px-0 py-0 shadow">
                                                            <div class="card-header">Verification</div>
                                                            <div class="form-group px-1">
                                                                <label>Verified By</label>
                                                                <div class="input-group">
                                                                    <select class="form-control" disabled
                                                                        [(ngModel)]="payment.userIdVerified"
                                                                        placeholder="Model">
                                                                        <option [value]="user.id"
                                                                            *ngFor="let user of users;let i=index;">
                                                                            {{user.firstName}} {{user.lastName}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group px-1">
                                                                <label>Verified At</label>
                                                                <div class="input-group">
                                                                    <ng-container
                                                                        *ngIf="user.allowVerifyPayment == true">
                                                                        <input type="date" class="form-control"
                                                                            (change)="onChangeVehiclePaymentCalendarVerified($event, payment)"
                                                                            [ngModel]="payment.dateVerified |  date:'yyyy-MM-dd'">
                                                                    </ng-container>
                                                                    <ng-container
                                                                        *ngIf="user.allowVerifyPayment == false">
                                                                        {{payment.dateVerified | date }}
                                                                    </ng-container>
                                                                </div>
                                                            </div>

                                                            <div class="form-group px-1">
                                                                <label>Comments/Notes</label>
                                                                <div class="input-group">

                                                                    <textarea class="form-control"
                                                                        [disabled]="user.allowVerifyPayment == false"
                                                                        [(ngModel)]="payment.notesVerified" rows="2"
                                                                        (keyup.enter)="onEnterPayment('payment notes verified',payment)">
                                                                        </textarea>

                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="form-group nopadding">
                                                            <label>Action</label>
                                                            <div class="input-group">
                                                                <div class="input-group-append" style="float: right;">
                                                                    <button class="btn-outline-secondary"
                                                                        title="Remove this payment"
                                                                        (click)="deleteVehiclePayment(null, payment)">
                                                                        <i class="bi bi-trash"></i>
                                                                    </button>
                                                                    <button class="btn-outline-secondary" title="Save"
                                                                        (click)="savePayment(payment)"><i
                                                                            class="bi-save"></i></button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade show " id="nav-vehicle-job" role="tabpanel" #taggroup
                                    aria-labelledby="nav-vehicle-job-tab" style="min-height: 500px;">
                                    <div class="row mb-2">
                                        <div class="col-sm-6">

                                        </div>

                                    </div>
                                    <div class="input-group mb-12">
                                        <label for="placeholder"> </label>
                                        <div class="nopadding" *ngIf="user.allowAddService == true">
                                            <li class="dropdown">
                                                <!-- Add Jobs -->
                                                <button type="button" class="dropdown-toggle" data-bs-toggle="dropdown"
                                                    title="Add Job" aria-expanded="false">
                                                    <i class="bi-plus-lg"></i>
                                                </button>
                                                <div class="dropdown-menu">
                                                    <ng-container *ngFor="let service of services; let i=index">
                                                        <a (click)="addVehicleJob(service)" class="dropdown-item">
                                                            {{service.name}} </a>
                                                    </ng-container>
                                                </div>
                                            </li>
                                        </div>
                                        <div class="input-group-append">
                                            <button type="button" class="btn-outline-secondary" title="Schedule"
                                                (click)="fillCalendarVehicleJob()">
                                                <i class="bi bi-calendar-week"></i>
                                            </button>
                                        </div>
                                        <div class="input-group-append">
                                            <button type="button" class="btn-outline-secondary"
                                                title="Print Repair Order"
                                                (click)="printPage('print-content-jobs', 'jobs')">
                                                <i class="bi bi-printer"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="input-group mb-12" cdkDropList (cdkDropListDropped)="dropped($event)">
                                        <div class="input-group mb-12" *ngFor="let job of jobs; let i=index"
                                            (click)="setJobId(job.id)">
                                            <div class="form-group col-3 nopadding">
                                                <label *ngIf="i==0" style="background-color: white;"># Job Name</label>
                                                <div class="input-group">
                                                    <button *ngIf="job.status ==0" class="btn btn-outline-secondary"
                                                        [style.background-color]="job.id == currentJobId? '#0d6efd' : (true ? 'white' : 'white')"
                                                        cdkDrag>{{i+1}}</button>
                                                    <button *ngIf="job.status ==1" class="btn btn-outline-danger"
                                                        [style.background-color]="job.id == currentJobId? '#0d6efd' : (true ? 'white' : 'white')"
                                                        cdkDrag>{{i+1}}</button>
                                                    <input for="job name" type="text" class="form-control" [(ngModel)]="job.name" (keyup.enter)="onEnter('job name',job)">


                                                </div>
                                            </div>
                                            <div class="form-group col-3 nopadding">
                                                <label *ngIf="i==0"
                                                    style="background-color: white;">Type/Payment</label>
                                                <div class="input-group">
                                                    <select class="form-control" [(ngModel)]="job.jobRequestType"
                                                        placeholder="Job Requst Type" #jobRequestType
                                                        (change)="onChangeJobJobRequestType($event, jobRequestType.value, job)">
                                                        <option
                                                            *ngFor="let jobRequestType of jobRequestTypes let i=index"
                                                            value="{{jobRequestType.id}}">
                                                            {{jobRequestType.name}}
                                                        </option>
                                                    </select>
                                                    <select class="form-control" [(ngModel)]="job.paymentMethod"
                                                        placeholder="Payment Method" #paymentMethod
                                                        (change)="onChangeJobPaymentMethod($event, paymentMethod.value, job)">
                                                        <option *ngFor="let paymentMethod of paymentMethods let i=index"
                                                            value="{{paymentMethod.id}}">
                                                            {{paymentMethod.name}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="form-group col-3 nopadding">
                                                <label *ngIf="i==0" style="background-color: white;">Assigned
                                                    To/Deadline/Status</label>
                                                <div class="input-group" style="vertical-align: middle;">
                                                    <select class="form-control" [(ngModel)]="job.employeeId" #device
                                                        [disabled]="user.allowAssignUser == false"
                                                        (change)="onChangeEmployee2($event, device.value, job)"
                                                        placeholder="Model">
                                                        <option [value]="employee.id"
                                                            [style.background-color]="employee.id == currentEmplyeeId ? 'lightyellow' : (true ? 'white' : 'white')"
                                                            *ngFor="let employee of employees;let i=index;">
                                                            {{employee.firstName}} {{employee.lastName}}
                                                        </option>
                                                    </select>
                                                    <div class="input-group-append">
                                                        <input type="date" *ngIf="job.employeeId > 0"
                                                            style="width:110px"
                                                            [disabled]="user.allowChangeJobTargetDate == false"
                                                            (change)="onChangeCalendar($event, job)"
                                                            max="{{vehicle.targetDate | date:'yyyy-MM-dd'}}"
                                                            [ngModel]="job.targetDate |  date:'yyyy-MM-dd'">
                                                    </div>
                                                    <div class="input-group-append form-control" style="flex: 0 40px;">
                                                        <input type="checkbox" [checked]="isJobChecked(job)"
                                                            style="width:20px;height:20px;"
                                                            [disabled]="user.allowUpdateJobStatus == false"
                                                            *ngIf="job.employeeId > 0 && job.targetDate != null"
                                                            (change)="updateJobStatus(job)">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group col-3 nopadding">
                                                <label *ngIf="i==0" style="background-color: white;">Job
                                                    Instructions</label>
                                                <div class="input-group">

                                                    <textarea type="text" [(ngModel)]="job.notes" class="form-control"
                                                        (keyup.enter)="onEnter('job notes',job)" rows="1"
                                                        oninput='this.style.height = "";this.style.height = this.scrollHeight + "px"'
                                                        [disabled]="user.allowUpdateJobStatus == false"></textarea>
                                                    <div class="input-group-append">
                                                        <button class="btn-outline-secondary" title="Remove this job"
                                                            (click)="deleteVehicleJob(null, job)">
                                                            <i class="bi bi-trash"></i>
                                                        </button>
                                                        <button class="btn-outline-secondary" title="Save"
                                                            (click)="saveJobNotes(job)"><i class="bi-save"></i></button>
                                                    </div>


                                                </div>
                                            </div>
                                            <div class="form-group col-3 nopadding">

                                            </div>

                                        </div>
                                    </div>
                                    <div class="row mb-2">
                                        <div class="col-sm-6">

                                        </div>

                                    </div>
                                    <div class="input-group col-mb-12">

                                        <div class="form-group col-4 nopadding">
                                            <label>Employees</label>
                                            <div class="input-group">
                                                <select class="form-control" #deviceEmployee
                                                    [disabled]="user.allowAssignUser == false"
                                                    (change)="getMyJobs( deviceEmployee.value)" placeholder="Model">
                                                    <option [value]="employee.id"
                                                        *ngFor="let employee of employees;let i=index;">
                                                        <ng-container *ngFor="let role of employeeRoles">
                                                            <ng-container *ngIf="role.id == employee.roleId">
                                                                {{employee.firstName}} {{employee.lastName}} :
                                                                {{role.name}}
                                                            </ng-container>
                                                        </ng-container>
                                                    </option>
                                                </select>
                                                <div class="input-group-append" *ngIf="currentEmplyeeId > 0">
                                                    <button type="button" class="btn-outline-secondary" title="Refresh"
                                                        (click)="getMyJobs(currentEmplyeeId)"><i
                                                            class="bi-arrow-repeat"></i></button>
                                                </div>
                                                <div class="input-group-append" *ngIf="currentEmplyeeId > 0">
                                                    <button type="button" class="btn-outline-secondary" title="Clear"
                                                        (click)="resetEmployeeJobs()"><i
                                                            class="bi bi-x-circle"></i></button>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="form-group col-2 nopadding">
                                            <label>Unfinished Job Only</label>
                                            <div class="input-group">
                                                <div class="form-control">
                                                    <input type="checkbox" [(ngModel)]="filterOff"
                                                        (change)="filterVehicleJobs()">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group col-12 nopadding">
                                            <label></label>
                                        </div>
                                        <ng-container *ngFor="let vehicle of vehiclesJob; let i=index; let even=even">
                                            <div class="list-group col-3" *ngIf="vehicle.shallDisplay == true"
                                                (click)="getDetail(vehicle, i )">
                                                <a class="list-group-item list-group-item-action py-1"
                                                    style="background-color: lightgrey;" [class.active]="i != cindex">
                                                    <i (click)="printPage('print-content', 'jobs')"
                                                        class="bi-printer"></i>
                                                    {{i+1}}.
                                                    #{{vehicle.id}}
                                                    {{vehicle.year}}
                                                    {{vehicle.make}} {{vehicle.model}}
                                                    {{vehicle.color}}
                                                </a>

                                                <a class="list-group-item list-group-item-action py-0">
                                                    <i class="bi bi-truck"></i> {{vehicle.description}}
                                                </a>
                                                <a class="list-group-item list-group-item-action py-0">
                                                    <i class="bi bi-menu-up"></i>
                                                    <ng-container
                                                        *ngFor="let jobRequestType of jobRequestTypes; let i=index">
                                                        <ng-container *ngIf="vehicle.jobRequestType==jobRequestType.id">
                                                            <strong> {{jobRequestType.name}}</strong></ng-container>
                                                    </ng-container>
                                                </a>
                                                <a class="list-group-item list-group-item-action py-0">
                                                    <i class="bi bi-menu-up"></i>
                                                    <ng-container *ngFor="let option of statuss; let i=index">
                                                        <strong *ngIf="vehicle.status==option.id">
                                                            {{option.name}}</strong>
                                                    </ng-container>
                                                </a>
                                                <a class="list-group-item list-group-item-action py-0">
                                                    <i class="bi bi-clock"></i> Been {{vehicle.daysInShop}} days
                                                </a>
                                                <ng-container *ngFor="let job of vehicle.jobs; let j=index ">
                                                    <ng-container *ngIf="job.status==0">
                                                        <a class="list-group-item list-group-item-action py-0"
                                                            (click)="setJobId(job.id)"
                                                            [class.active]="job.id == currentJobId">
                                                            <strong>{{j+1}}.</strong> {{job.name}} => {{job.notes}}
                                                        </a>
                                                        <a class="list-group-item list-group-item-action py-0"
                                                            (click)="setJobId(job.id)">
                                                            <input type="checkbox" [checked]="isJobChecked(job)"
                                                                [disabled]="user.allowUpdateJobStatus == false"
                                                                *ngIf="job.employeeId > 0 && job.targetDate != null"
                                                                (change)="updateJobStatus(job)">
                                                            by {{job.targetDate | date}}
                                                        </a>
                                                    </ng-container>
                                                    <ng-container *ngIf="job.status==1 && filterOff == false">
                                                        <a class="list-group-item list-group-item-action py-0"
                                                            (click)="setJobId(job.id)"
                                                            [class.active]="job.id == currentJobId">
                                                            <strong>{{j+1}}.</strong> {{job.name}} => {{job.notes}}
                                                        </a>
                                                        <a class="list-group-item list-group-item-action py-0"
                                                            (click)="setJobId(job.id)">
                                                            <input type="checkbox" [checked]="isJobChecked(job)"
                                                                [disabled]="user.allowUpdateJobStatus == false"
                                                                *ngIf="job.employeeId > 0 && job.targetDate != null"
                                                                (change)="updateJobStatus(job)">
                                                            by {{job.targetDate | date}}
                                                        </a>
                                                    </ng-container>
                                                </ng-container>
                                            </div>
                                        </ng-container>
                                    </div>
                                    <div class="input-group col-mb-12">
                                        <div class="container-fluid">
                                            <div class="row mb-2">
                                                <div class="col-sm-6">

                                                </div>

                                            </div>
                                        </div>
                                        <div class="card">
                                            <full-calendar [options]="calendarOptionsJob1">
                                                <ng-template #eventContent let-arg>

                                                    <span
                                                        id="{{arg.event.extendedProps['jobRequestType']}} 
                                                at {{arg.event.extendedProps['location']}} been {{arg.event.extendedProps['days']}} days"
                                                        style="color: white; white-space: normal;">{{arg.event.title}}<br>
                                                        <small
                                                            style="color: lightgray;width: 100%;">{{arg.event.extendedProps['description']}}
                                                        </small>
                                                    </span>

                                                </ng-template>
                                            </full-calendar>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade show " id="nav-vehicle-receipt" role="tabpanel" #taggroup
                                    aria-labelledby="nav-vehicle-receipt-tab" style="min-height: 500px;">
                                    <div class="row mb-2">
                                        <div class="col-sm-6">

                                        </div>

                                    </div>
                                    <div class="input-group mb-12">
                                        <label for="placeholder"> </label>
                                        <div class="input-group-append" *ngIf="user.allowAddReceipt == true">

                                            <!-- Add Receipt -->
                                            <button type="button" class="btn-outline-secondary"
                                                (click)="createReceipt()" title="Add A Receipt Item">
                                                <i class="bi-plus-lg"></i>
                                            </button>

                                        </div>
                                        <!-- <div class="input-group-append">
                                            <button type="button" class="btn-outline-secondary" title="pdf"
                                                (click)="printPdf('print-content-receipt')">
                                                <i class="bi bi-calendar-week"></i>
                                            </button>
                                        </div> -->
                                        <div class="input-group-append">
                                            <button type="button" class="btn-outline-secondary" title="Print Receipt"
                                                (click)="printPage('print-content-receipt', 'Receipt')">
                                                <i class="bi bi-printer"></i>
                                            </button>
                                        </div>
                                        <div class="input-group-append">
                                            <select [(ngModel)]="vehicle.paymentMethod" #paymentMethod
                                                (change)="onChangeVehiclePaymentMethod($event, paymentMethod.value)"
                                                placeholder="Model">
                                                <option [value]="paymentMethod.id"
                                                    *ngFor="let paymentMethod of paymentMethods;let i=index;">
                                                    {{paymentMethod.name}}
                                                </option>
                                            </select>
                                        </div>
                                        <div class="input-group-append">
                                            <select [(ngModel)]="disclaimerId" #optionDisclaimerId
                                                (change)="setDisclaimerText(optionDisclaimerId.value)"
                                                placeholder="Disclaimer" title="please set a disclaimer">
                                                <option [value]="disclaimer.id"
                                                    *ngFor="let disclaimer of disclaimers;let i=index;">
                                                    {{disclaimer.name}}
                                                </option>
                                            </select>
                                        </div>
                                        <div class="input-group-append">
                                            <label class="form-check-label text-center">&nbsp;&nbsp;</label>
                                            <label class="form-check">

                                                <input trimText class="form-check-input" type="checkbox"
                                                    style="width:15px;height:15px;" title="No Tax"
                                                    (change)="onChangeNoTax($event)">

                                                <label class="form-check-label text-center">&nbsp; No Tax</label>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="input-group mb-12" cdkDropList
                                        (cdkDropListDropped)="droppedReceipt($event)">
                                        <div class="input-group mb-12" *ngFor="let receipt of receipts; let i=index"
                                            (click)="setReceiptId(receipt.id)">
                                            <div class="form-group col-3 nopadding">
                                                <label *ngIf="i==0" style="background-color: white;"># Item Name</label>
                                                <div class="input-group">
                                                    <button class="btn btn-outline-secondary"
                                                        [style.background-color]="receipt.id == currentReceiptId? '#0d6efd' : (true ? 'white' : 'white')"
                                                        cdkDrag>{{i+1}}</button>

                                                    <input for="receipt name" type="text" class="form-control"
                                                        [(ngModel)]="receipt.name"
                                                        (keyup.enter)="onEnterReceipt('receipt name',receipt)">

                                                </div>
                                            </div>

                                            <div class="form-group col-2 nopadding">
                                                <label *ngIf="i==0" for="vin">Amount</label>
                                                <div class="input-group mb-12">
                                                    <input type="number" class="form-control" placeholder="Amount"
                                                        (keyup.enter)="onEnterReceipt('receipt amount',receipt)"
                                                        [(ngModel)]="receipt.amount" pattern="[0-9]" />
                                                </div>
                                            </div>


                                            <div class="form-group col-7 nopadding">
                                                <label *ngIf="i==0" style="background-color: white;">Description</label>
                                                <div class="input-group">

                                                    <textarea type="text" [(ngModel)]="receipt.notes"
                                                        class="form-control"
                                                        (keyup.enter)="onEnterReceipt('receipt notes',receipt)" rows="1"
                                                        oninput='this.style.height = "";this.style.height = this.scrollHeight + "px"'
                                                        [disabled]="user.allowAddReceipt == false"></textarea>
                                                    <div class="input-group-append">
                                                        <button class="btn-outline-secondary" title="Remove this item"
                                                            (click)="deleteVehicleReceipt(null, receipt)">
                                                            <i class="bi bi-trash"></i>
                                                        </button>
                                                        <button class="btn-outline-secondary" title="Save"
                                                            (click)="onEnterReceipt('update receipt', receipt)"><i
                                                                class="bi-save"></i></button>
                                                    </div>


                                                </div>
                                            </div>
                                            <div class="form-group col-3 nopadding">

                                            </div>

                                        </div>
                                    </div>
                                    <div class="row mb-2">
                                        <div class="col-sm-6">

                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-5"></div>
                                        <div class="col-7" *ngIf="getSubtotal() > 0">
                                            <ng-container *ngFor="let paymentMethod of this.paymentMethods">
                                                <p class="lead" *ngIf="paymentMethod.id==vehicle.paymentMethod">
                                                    Pay By {{paymentMethod.name}}
                                                </p>
                                            </ng-container>
                                            <div class="table-responsive">
                                                <table class="table table-striped">
                                                    <tr>
                                                        <td style="width:50%;">
                                                            <strong>Subtotal:</strong>
                                                        </td>
                                                        <td>${{getSubtotal()}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <strong>Tax ({{company.taxRate
                                                                *100}}%)</strong>
                                                        </td>
                                                        <td>${{getTax() }}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <strong>Total:</strong>
                                                        </td>
                                                        <td>${{getTotal()}}</td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <p class="lead"> </p>

                                        </div>
                                    </div>
                                    <div class="row mb-12">
                                        <div class="col-sm-12" *ngIf="disclaimerText != ''">
                                            <div [innerHtml]="disclaimerText"></div>
                                        </div>

                                    </div>


                                </div>
                                <div class="tab-pane fade show" id="nav-vehicle-list2" role="tabpanel" #taggroup
                                    style="height: 100vh; width: 100%" aria-labelledby="nav-vehicle-list2-tab">
                                    <div class="container-fluid">
                                        <div class="row mb-2">
                                            <div class="col-sm-6">

                                            </div>

                                        </div>
                                    </div><!-- /.container-fluid -->
                                    <div class="card">
                                        <full-calendar [options]="calendarOptions">
                                            <ng-template #eventContent let-arg>
                                                <!-- <b>{{arg.timeText}}</b> -->
                                                <span
                                                    id="{{arg.event.extendedProps['jobRequestType']}} 
                                                at {{arg.event.extendedProps['location']}} been {{arg.event.extendedProps['days']}} days"
                                                    style="color: white; white-space: normal;">{{arg.event.title}}<br>
                                                    <small
                                                        style="color: lightgray;width: 100%;">{{arg.event.extendedProps['description']}}
                                                    </small>
                                                </span>
                                            </ng-template>
                                        </full-calendar>
                                    </div>

                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="currentUser !=null  && currentUser?.roles.includes('ROLE_ADMIN')" (click)="getAllUsers()">
        <select [(ngModel)]="user" (change)="resetUser(user)">
            <option *ngFor="let user of users" [ngValue]="user">{{user.username}} {{user.companyId}}</option>
        </select>
    </div>



    <div class="modal fade" id="myAccount" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="myAccountLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
          <div class="modal-content border-radius-8">
            <div class="modal-header p-4">
              <h1 class="modal-title fs-20 fw-600 text-capitalize" id="myAccountLabel">My Account</h1>
              <button type="button" class="btn-close mt-1" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body px-2" *ngIf="currentUser">
              <form *ngIf="!isSuccessful" name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
                <div class="row">
                  <div class="col-md-4">
                    <div class="mt-4 pt-1">
                      <label for="title" class="form-label fs-14 fw-400 mb-3">Title</label>
                      <select class="form-select h-48 px-3 border-radius-8" name="role" #type="ngModel" size="1" [(ngModel)]="form.role" required disabled [ngClass]="{ 'is-invalid': f.submitted && type.errors }">
                        <option value="ROLE_USER" selected>User</option>
                        <option value="ROLE_SHOP">Auto Shop</option>
                        <option value="ROLE_ADMIN">Admin</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-4"  *ngIf="form.role == 'ROLE_SHOP' || form.role == 'ROLE_RECYCLER' ">
                    <div class="mt-4 pt-1">
                      <label for="bussnessName" class="form-label fs-14 fw-400 mb-3">Bussness Name</label>
                      <input trimText class="form-control h-48 px-3 border-radius-8" name="bussinessname" [(ngModel)]="form.bussinessname" required minlength="5" maxlength="200" #bussinessname="ngModel" [ngClass]="{ 'is-invalid': f.submitted && bussinessname.errors }" />
                      <div class="invalid-feedback" *ngIf="bussinessname.errors && f.submitted">
                        <span *ngIf="bussinessname.errors['required']">Bussness name is required</span>
                        <span *ngIf="bussinessname.errors['minlength']">Bussness name must be at least 5 characters</span>
                        <span *ngIf="bussinessname.errors['maxlength']">Bussness name must be at most 200 characters</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mt-4 pt-1">
                      <label for="firstName" class="form-label fs-14 fw-400 mb-3">First Name</label>
                      <input trimText class="form-control h-48 px-3 border-radius-8" type="text" name="firstName" [(ngModel)]="form.firstName" required minlength="2" maxlength="20" #firstName="ngModel" [ngClass]="{ 'is-invalid': f.submitted && firstName.errors }" placeholder="Enter Your First Name" />
                      <div class="invalid-feedback" *ngIf="firstName.errors && f.submitted">
                        <span *ngIf="firstName.errors['required']">First Name is required</span>
                        <span *ngIf="firstName.errors['minlength']">First Name must be at least 2 characters</span>
                        <span *ngIf="firstName.errors['maxlength']">First Name must be at most 200 characters</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mt-4 pt-1">
                      <label for="lastName" class="form-label fs-14 fw-400 mb-3">Last Name</label>
                      <input trimText class="form-control h-48 px-3 border-radius-8" type="text" name="lastName" [(ngModel)]="form.lastName" required minlength="2" maxlength="20" #lastName="ngModel" [ngClass]="{ 'is-invalid': f.submitted && lastName.errors }" placeholder="Enter Your Last Name" />
                      <div class="invalid-feedback" *ngIf="lastName.errors && f.submitted">
                        <span *ngIf="lastName.errors['required']">Last Name is required</span>
                        <span *ngIf="lastName.errors['minlength']">Last Name must be at least 2 characters</span>
                        <span *ngIf="lastName.errors['maxlength']">Last Name must be at most 200 characters</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mt-4 pt-1">
                      <label for="email" class="form-label fs-14 fw-400 mb-3">Email Address</label>
                      <input trimText class="form-control h-48 px-3 border-radius-8" name="email" [(ngModel)]="form.email" required email #email="ngModel" [ngClass]="{ 'is-invalid': f.submitted && email.errors }"  placeholder="Enter Your Email Address" />
                      <div class="invalid-feedback" *ngIf="email.errors && f.submitted">
                        <span *ngIf="email.errors['required']">Email is required</span>
                        <span *ngIf="email.errors['email']">Email must be a valid email address</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mt-4 pt-1">
                      <label for="phone" class="form-label fs-14 fw-400 mb-3">Phone</label>
                      <input trimText class="form-control h-48 px-3 border-radius-8" name="phone" [(ngModel)]="form.phone" required #phone="ngModel" [ngClass]="{ 'is-invalid': f.submitted && phone.errors }" pattern="^[-+()0-9]{10,12}(?:-\d+)?$" placeholder="Enter Your Phone Number" />
                      <div class="invalid-feedback" *ngIf="phone.errors && f.submitted">
                        <span *ngIf="phone.errors['required']">Phone is required</span>
                        <span *ngIf="phone.errors['pattern']">Phone must be a valid phone number</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mt-4 pt-1">
                      <label for="street" class="form-label fs-14 fw-400 mb-3">Street</label>
                      <input trimText class="form-control h-48 px-3 border-radius-8" name="street" [(ngModel)]="form.street" required minlength="2" maxlength="200" #street="ngModel" [ngClass]="{ 'is-invalid': f.submitted && street.errors }" placeholder="Enter Your Street" />
                      <div class="invalid-feedback" *ngIf="street.errors && f.submitted">
                        <span *ngIf="street.errors['required']">Street is required</span>
                        <span *ngIf="street.errors['minlength']">Street must be at least 2 characters</span>
                        <span *ngIf="street.errors['maxlength']">Street must be at most 200 characters</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mt-4 pt-1">
                      <label for="city" class="form-label fs-14 fw-400 mb-3">City</label>
                      <input trimText class="form-control h-48 px-3 border-radius-8" name="city" [(ngModel)]="form.city" required minlength="2" maxlength="200" #city="ngModel" [ngClass]="{ 'is-invalid': f.submitted && city.errors }" placeholder="Enter Your City" />
                      <div class="invalid-feedback" *ngIf="city.errors && f.submitted">
                        <span *ngIf="city.errors['required']">City is required</span>
                        <span *ngIf="city.errors['minlength']">City must be at least 2 characters</span>
                        <span *ngIf="city.errors['maxlength']">City must be at most 200 characters</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mt-4 pt-1">
                      <label for="state" class="form-label fs-14 fw-400 mb-3">State</label>
                      <select class="form-select h-48 px-3 border-radius-8" name="state" #state="ngModel" size="1" required [(ngModel)]="form.state" [ngClass]="{ 'is-invalid': f.submitted && state.errors }">
                        <option value="AL">Alabama</option>
                        <option value="AK">Alaska</option>
                        <option value="AZ">Arizona</option>
                        <option value="AR">Arkansas</option>
                        <option value="CA">California</option>
                        <option value="CO">Colorado</option>
                        <option value="CT">Connecticut</option>
                        <option value="DE">Delaware</option>
                        <option value="DC">District Of Columbia</option>
                        <option value="FL">Florida</option>
                        <option value="GA">Georgia</option>
                        <option value="HI">Hawaii</option>
                        <option value="ID">Idaho</option>
                        <option value="IL">Illinois</option>
                        <option value="IN">Indiana</option>
                        <option value="IA">Iowa</option>
                        <option value="KS">Kansas</option>
                        <option value="KY">Kentucky</option>
                        <option value="LA">Louisiana</option>
                        <option value="ME">Maine</option>
                        <option value="MD">Maryland</option>
                        <option value="MA">Massachusetts</option>
                        <option value="MI">Michigan</option>
                        <option value="MN">Minnesota</option>
                        <option value="MS">Mississippi</option>
                        <option value="MO">Missouri</option>
                        <option value="MT">Montana</option>
                        <option value="NE">Nebraska</option>
                        <option value="NV">Nevada</option>
                        <option value="NH">New Hampshire</option>
                        <option value="NJ">New Jersey</option>
                        <option value="NM">New Mexico</option>
                        <option value="NY">New York</option>
                        <option value="NC">North Carolina</option>
                        <option value="ND">North Dakota</option>
                        <option value="OH">Ohio</option>
                        <option value="OK">Oklahoma</option>
                        <option value="OR">Oregon</option>
                        <option value="PA">Pennsylvania</option>
                        <option value="RI">Rhode Island</option>
                        <option value="SC">South Carolina</option>
                        <option value="SD">South Dakota</option>
                        <option value="TN">Tennessee</option>
                        <option value="TX">Texas</option>
                        <option value="UT">Utah</option>
                        <option value="VT">Vermont</option>
                        <option value="VA">Virginia</option>
                        <option value="WA">Washington</option>
                        <option value="WV">West Virginia</option>
                        <option value="WI">Wisconsin</option>
                        <option value="WY">Wyoming</option>
                      </select>
                      <div class="invalid-feedback d-block" *ngIf="state.errors && f.submitted">
                        <span *ngIf="state.errors['required']">State is required</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mt-4 pt-1">
                      <label for="zip" class="form-label fs-14 fw-400 mb-3">Zip Code</label>
                      <input trimText class="form-control h-48 px-3 border-radius-8" pattern="[0-9]*" name="zip" [(ngModel)]="form.zip" required minlength="5" maxlength="200" #zip="ngModel" [ngClass]="{ 'is-invalid': f.submitted && zip.errors }" placeholder="Enter Your Zip Code" />
                      <div class="invalid-feedback" *ngIf="zip.errors && f.submitted">
                        <span *ngIf="zip.errors['required']">Zip is required</span>
                        <span *ngIf="zip.errors['zip']">Must be a valid zip</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mt-4">
                    <div *ngIf="f.submitted && isUpdateFailed">
                      <span *ngIf="errorMessage" class="alert alert-danger" role="alert">Update failed!<br />{{ errorMessage }}</span>
                    </div>
                  </div>
                </div>
                <div class="d-flex align-items-center gap-3 mt-5 px-3" *ngIf="currentUser"> 
                  <button class="btn btn-primary-abs h-45 px-4 rounded-4 fs-14 fw-600">Update Account</button> 
                </div>
              </form>
              <div *ngIf="isSuccessful" class="p-4">
                <span class="alert alert-success" role="alert">Your update is successful! <button class="btn btn-sm btn-primary-abs ms-3" (click)="reload()">Ok</button></span>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      
      <div class="modal fade" id="resetPassword" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="resetPasswordLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
          <div class="modal-content border-radius-8">
            <div class="modal-header p-4">
              <h1 class="modal-title fs-20 fw-600 text-capitalize" id="resetPasswordLabel">Reset Password</h1>
              <button type="button" class="btn-close mt-1" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body px-2" *ngIf="currentUser">
              <form name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
                <div class="row">
                  <div class="col-md-4"  *ngIf="form.role == 'ROLE_SHOP' || form.role == 'ROLE_RECYCLER' ">
                    <div class="mt-4 pt-1">
                      <label for="password" class="form-label fs-14 fw-400 mb-3">Old Password</label>
                      <input trimText class="form-control h-48 px-3 border-radius-8" type="password" name="password" [(ngModel)]="form.password" required minlength="6" #password="ngModel" [ngClass]="{ 'is-invalid': f.submitted && password.errors }" placeholder="Enter Your Old Password" />
                      <div class="invalid-feedback" *ngIf="password.errors && f.submitted">
                        <span *ngIf="password.errors['required']">Password is required</span>
                        <span *ngIf="password.errors['minlength']">Password must be at least 6 characters</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mt-4 pt-1">
                      <label for="newPassword" class="form-label fs-14 fw-400 mb-3">New Password</label>
                      <input trimText class="form-control h-48 px-3 border-radius-8" type="password" name="newPassword" [(ngModel)]="form.newPassword" minlength="6" #newPassword="ngModel" [ngClass]="{ 'is-invalid': f.submitted && newPassword.errors }" required placeholder="Enter Your New Password" />
                      <div class="invalid-feedback" *ngIf="newPassword.errors && f.submitted">
                        <span *ngIf="newPassword.errors['required']">New Password is required</span>
                        <span *ngIf="newPassword.errors['minlength']">New Password must be at least 6 characters</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="mt-4 pt-1">
                      <label for="newPasswordComfirmed" class="form-label fs-14 fw-400 mb-3">Confirm New Password</label>
                      <input trimText class="form-control h-48 px-3 border-radius-8" type="password" name="newPasswordComfirmed" [(ngModel)]="form.newPasswordComfirmed" required minlength="6" #newPasswordComfirmed="ngModel" required [ngClass]="{ 'is-invalid': f.submitted && newPasswordComfirmed.errors }" placeholder="Please Confirm Your New Password" />
                      <div class="invalid-feedback" *ngIf="newPasswordComfirmed.errors && f.submitted">
                        <span *ngIf="newPasswordComfirmed.errors['required']">New Password Comfirmed is required</span>
                        <span *ngIf="newPasswordComfirmed.errors['minlength']">New Password Comfirmed must be at least 6 characters</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="d-flex align-items-center gap-3 mt-4 px-3" *ngIf="currentUser"> 
                  <button class="btn btn-primary-abs h-45 px-4 rounded-4 fs-14 fw-600">Reset Password</button> 
                </div>
              </form>
              <div class="col-md-12 py-4 mt-4" *ngIf="errorMessage != ''">
                <span class="alert alert-success line-height-150" role="alert">{{errorMessage}}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      