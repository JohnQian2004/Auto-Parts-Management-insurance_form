<div class="row">

  <div class="col-12" *ngIf="selectedAutopart">
    <div class="card">
      <div class="card-header">
        <h4 class="card-title">{{ selectedAutopart.year }} {{ selectedAutopart.make }}
          {{
          selectedAutopart.model }} {{
          selectedAutopart.title }}</h4>
      </div>

      <!-- <img class="card-img-top" *ngIf="selectedAutopart.imageModels" src="{{baseUrlImage + '/' + selectedImage}}"
                alt=""> -->


      <div class="card-body">

        <div class="row">

          <div class="col-md-2" style="padding-left: 1px; padding-right: 1px; overflow-y: scroll;">
            <div *ngFor='let imageModel of selectedAutopart.imageModels; let i=index'>
              <img class="img-fluid" src="{{baseUrlResizeImage + '/' + imageModel.id}}" (click)="setImage(i)"
                style="border: 3px solid #555;">
            </div>
          </div>
          <div class="col-md-10">
            <img class="card-img-top" *ngIf="selectedAutopart.imageModels" src="{{baseUrlImage + '/' + selectedImage}}"
              alt="" style="border: 3px solid #555;">

            <p></p>
            <div class="mt-4 pt-1">
              <p class="py-2 fs-13 line-height-130" style="display: inline-block; word-break: break-word;">{{
                selectedAutopart.comments }}</p>
              <p class="py-2 fs-13 line-height-130" style="display: inline-block; word-break: break-word;">{{
                selectedAutopart.description }}</p>
              <div class="clearfix"></div>
              <p class="py-2 fs-13 line-height-130 w-50 d-inline-block"
                style="display: inline-block; word-break: break-word;"><b>Part No.: </b>
                {{ selectedAutopart.partNumber
                }}</p>
              <p class="py-2 fs-13 line-height-130 w-50 d-inline-block"
                style="display: inline-block; word-break: break-word;"><b>Stock No.: </b>
                {{ selectedAutopart.stocknumber
                }}</p>
              <p class="py-2 fs-13 line-height-130 w-50 d-inline-block"><b>Grade: </b> {{ selectedAutopart.grade }}</p>
              <p class="py-2 fs-13 line-height-130 w-50 d-inline-block"><b>Sales Price: </b> $ {{
                selectedAutopart.salePrice }}</p>
              <p *ngIf=" selectedAutopart.bussinessUrl && selectedAutopart.bussinessName "
                class="py-2 fs-13 line-height-130 w-50 d-inline-block"
                style="display: inline-block; word-break: break-word;"><b>Dealer Info: </b>
                <a target="_blank" [attr.href]="'//'+ selectedAutopart.bussinessUrl ">{{selectedAutopart.bussinessName |
                  titlecase}}</a>
              </p>
              <p class="py-2 fs-13 line-height-130 w-50 d-inline-block"
                style="display: inline-block; word-break: break-word;"><b>Phone: </b> {{
                formatPhoneNumber(
                selectedAutopart.phone) }}</p>
              <p class="py-2 fs-13 line-height-13 w-50 d-inline-block"
                style="display: inline-block; word-break: break-word;"><b>Address: </b>
                {{selectedAutopart.street }} {{selectedAutopart.city |
                titlecase}}, {{ selectedAutopart.state}} {{ selectedAutopart.zip}} </p>
              <!-- <p class="py-2 fs-13 line-height-130 w-50 d-inline-block" *ngIf="selectedAutopart.distance !='0' ">
                <b>Distance: </b> {{ selectedAutopart.distance }} Mil.
              </p> -->
            </div>
          </div>
          <!-- <div class="col-md-10">
            <img class="card-img-top" *ngIf="selectedAutopart.imageModels" src="{{baseUrlImage + '/' + selectedImage}}"
              alt="" style="border: 3px solid #555;">

            <p></p>
            <p class="card-text"> {{
              selectedAutopart.description }} </p>
            <b>grade:{{selectedAutopart.grade}}</b>
            <br>
            <ng-container *ngIf="selectedAutopart.published == false">
              <b class="card-text"> ${{selectedAutopart.price }}</b>
            </ng-container>
            <ng-container *ngIf="selectedAutopart.published == true">
              <b class="card-text"> ${{selectedAutopart.salePrice }}</b>
            </ng-container>
            <br>
 
            <p><a target="_blank" [attr.href]="'//'+ selectedAutopart.bussinessUrl ">{{selectedAutopart.bussinessName
                |
                titlecase}}</a> {{
              formatPhoneNumber( selectedAutopart.phone)}} <br>
            </p>
            <p class="card-text"><strong>{{selectedAutopart.street}} {{selectedAutopart.city | titlecase}}, {{
                selectedAutopart.state}} {{selectedAutopart.zip}}</strong>
            </p>
            <div class="row">
              <div class="col-12">
                <fieldset class="border rounded-3 p-3" *ngIf="currentUser != null">
                  <a class="col-md-3" *ngIf="selectedAutopart.showSavedButton==true && selectedAutopart.status==2"
                    class="btn btn-outline-secondary" (click)="addSavedItem(selectedAutopart.id)">Save To My List</a>

                  <a class="col-md-3" *ngIf="selectedAutopart.showSavedButton==false && selectedAutopart.status==2"
                    class="btn btn-outline-secondary" (click)="deleteSavedItem(null, selectedAutopart.id)">Remove From
                    List</a>
                  <a class="col-md-3" *ngIf="showSavedItem ==false && selectedAutopart.status==2"
                    class="btn btn-outline-secondary" (click)="showSavedItem =!showSavedItem">Show Saved Items</a>
                  <a class="col-md-3" *ngIf="showSavedItem ==true && selectedAutopart.status==2"
                    class="btn btn-outline-secondary" (click)="showSavedItem =!showSavedItem">Hide Saved Items</a>
                </fieldset>
              </div>
            </div>
          </div> -->
        </div>

      </div>

      <div class="card-footer text-muted" *ngIf="selectedAutopart.published == true">Posted on {{
        selectedAutopart.postingAt | date}}</div>
      <div class="card-footer text-muted" *ngIf="selectedAutopart.published == false">Posted on {{
        selectedAutopart.createdAt | date}}</div>
    </div>
  </div>

  <div *ngIf="showSavedItem==true" class="col-md-12 p-3">
    <div class="card">
      <div class="card-header">
        <h5>Saved Items {{ savedItems.length}}</h5>
      </div>

      <table class="col-md-12">
        <tr>
          <th>#</th>
          <th>Year<br>Make<br>Model</th>
          <th>Name</th>
          <th>Description</th>
          <th style="text-align: center">Grade</th>
          <th style="text-align: center">Stock #</th>
          <th style="text-align: center">Sale Price</th>
          <th>Dealer Info</th>
          <th style="text-align: center">Action</th>
        </tr>
        <tr id="{{autopart.id}}" [style.background-color]="i == cindex? 'lightyellow' : (even ? 'white' : 'white')"
          *ngFor="let autopart of savedItems; let i = index;  let even=even">
          <td>{{i+1}}</td>
          <td> {{ autopart.id }} {{ autopart.year }}<br>
            {{ autopart.make }}<br>
            {{ autopart.model }}<br>
            <!-- {{autopart.engine}}.L {{ autopart.transmission}} <br> -->

          </td>
          <td>{{autopart.title}}</td>
          <td>

            <img height="100" width="100" *ngIf="autopart.imageModels"
              src="{{baseUrlResizeImage + '/' + autopart.showInSearchImageId}}" alt="">
            {{ autopart.description }}
            {{ autopart.partNumber }}
          </td>
          <td style="text-align: center">{{ autopart.grade}}</td>
          <td style="text-align: center">#{{ autopart.id}}</td>
          <td style="text-align: center">${{autopart.salePrice}}</td>
          <td>
            <div *ngIf="currentUser"><a target="_blank" href={{autopart.bussinessUrl}}>{{autopart.bussinessName |
                titlecase}}</a> {{
              formatPhoneNumber( autopart.phone)}} <br>
            </div>
            {{autopart.city |
            titlecase}}, {{ autopart.state}}
          </td>
          <td style="text-align: center">
            <a style="TEXT-DECORATION: underline; color: blue" *ngIf="autopart.id != selectedAutopart.id"
              (click)="getDetailSavedItem(autopart, i)">Detail</a>
            <br><a style="TEXT-DECORATION: underline; color: blue" (click)="deleteSavedItem(null, autopart.id)"
              title="Remove from saved items">Remove</a>
          </td>

        </tr>
      </table>
    </div>
  </div>
</div>

<!-- <p>detail {{autopartId}}</p>

<code>
    <pre>{{selectedAutopart |json}}</pre>
</code> -->